(()=>{var Te=class{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){let n=[];return this.decompose(0,e,n,2),r.length&&r.decompose(0,r.length,n,3),this.decompose(t,this.length,n,1),rr.from(n,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let r=[];return this.decompose(e,t,r,0),rr.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),n=new li(this),s=new li(e);for(let a=t,l=t;;){if(n.next(a),s.next(a),a=0,n.lineBreak!=s.lineBreak||n.done!=s.done||n.value!=s.value)return!1;if(l+=n.value.length,n.done||l>=r)return!0}}iter(e=1){return new li(this,e)}iterRange(e,t=this.length){return new Hn(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;r=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new jn(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Te.empty:e.length<=32?new rt(e):rr.from(rt.split(e,[]))}},rt=class extends Te{constructor(e,t=dm(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,n){for(let s=0;;s++){let a=this.text[s],l=n+a.length;if((t?r:l)>=e)return new $a(n,l,r,a);n=l+1,r++}}decompose(e,t,r,n){let s=e<=0&&t>=this.length?this:new rt(zo(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let a=r.pop(),l=Nn(s.text,a.text.slice(),0,s.length);if(l.length<=32)r.push(new rt(l,a.length+s.length));else{let o=l.length>>1;r.push(new rt(l.slice(0,o)),new rt(l.slice(o)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof rt))return super.replace(e,t,r);let n=Nn(this.text,Nn(r.text,zo(this.text,0,e)),t),s=this.length+r.length-(t-e);return n.length<=32?new rt(n,s):rr.from(rt.split(n,[]),s)}sliceString(e,t=this.length,r=`
`){let n="";for(let s=0,a=0;s<=t&&a<this.text.length;a++){let l=this.text[a],o=s+l.length;s>e&&a&&(n+=r),e<o&&t>s&&(n+=l.slice(Math.max(0,e-s),t-s)),s=o+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],n=-1;for(let s of e)r.push(s),n+=s.length+1,r.length==32&&(t.push(new rt(r,n)),r=[],n=-1);return n>-1&&t.push(new rt(r,n)),t}},rr=class extends Te{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,n){for(let s=0;;s++){let a=this.children[s],l=n+a.length,o=r+a.lines-1;if((t?o:l)>=e)return a.lineInner(e,t,r,n);n=l+1,r=o+1}}decompose(e,t,r,n){for(let s=0,a=0;a<=t&&s<this.children.length;s++){let l=this.children[s],o=a+l.length;if(e<=o&&t>=a){let u=n&((a<=e?1:0)|(o>=t?2:0));a>=e&&o<=t&&!u?r.push(l):l.decompose(e-a,t-a,r,u)}a=o+1}}replace(e,t,r){if(r.lines<this.lines)for(let n=0,s=0;n<this.children.length;n++){let a=this.children[n],l=s+a.length;if(e>=s&&t<=l){let o=a.replace(e-s,t-s,r),u=this.lines-a.lines+o.lines;if(o.lines<u>>5-1&&o.lines>u>>5+1){let h=this.children.slice();return h[n]=o,new rr(h,this.length-(t-e)+r.length)}return super.replace(s,l,o)}s=l+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){let n="";for(let s=0,a=0;s<this.children.length&&a<=t;s++){let l=this.children[s],o=a+l.length;a>e&&s&&(n+=r),e<o&&t>a&&(n+=l.sliceString(e-a,t-a,r)),a=o+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof rr))return 0;let r=0,[n,s,a,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,s+=t){if(n==a||s==l)return r;let o=this.children[n],u=e.children[s];if(o!=u)return r+o.scanIdentical(u,t);r+=o.length+1}}static from(e,t=e.reduce((r,n)=>r+n.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let m of e)m.flatten(d);return new rt(d,t)}let n=Math.max(32,r>>5),s=n<<1,a=n>>1,l=[],o=0,u=-1,h=[];function c(d){let m;if(d.lines>s&&d instanceof rr)for(let v of d.children)c(v);else d.lines>a&&(o>a||!o)?(f(),l.push(d)):d instanceof rt&&o&&(m=h[h.length-1])instanceof rt&&d.lines+m.lines<=32?(o+=d.lines,u+=d.length+1,h[h.length-1]=new rt(m.text.concat(d.text),m.length+1+d.length)):(o+d.lines>n&&f(),o+=d.lines,u+=d.length+1,h.push(d))}function f(){o!=0&&(l.push(h.length==1?h[0]:rr.from(h,u)),u=-1,o=h.length=0)}for(let d of e)c(d);return f(),l.length==1?l[0]:new rr(l,t)}};Te.empty=new rt([""],0);function dm(i){let e=-1;for(let t of i)e+=t.length+1;return e}function Nn(i,e,t=0,r=1e9){for(let n=0,s=0,a=!0;s<i.length&&n<=r;s++){let l=i[s],o=n+l.length;o>=t&&(o>r&&(l=l.slice(0,r-n)),n<t&&(l=l.slice(t-n)),a?(e[e.length-1]+=l,a=!1):e.push(l)),n=o+1}return e}function zo(i,e,t){return Nn(i,[""],e,t)}var li=class{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof rt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,n=this.nodes[r],s=this.offsets[r],a=s>>1,l=n instanceof rt?n.text.length:n.children.length;if(a==(t>0?l:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof rt){let o=n.text[a+(t<0?-1:0)];if(this.offsets[r]+=t,o.length>Math.max(0,e))return this.value=e==0?o:t>0?o.slice(e):o.slice(0,o.length-e),this;e-=o.length}else{let o=n.children[a+(t<0?-1:0)];e>o.length?(e-=o.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(o),this.offsets.push(t>0?1:(o instanceof rt?o.text.length:o.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},Hn=class{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new li(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=r?n:t<0?n.slice(n.length-r):n.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},jn=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:n}=this.inner.next(e);return t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(Te.prototype[Symbol.iterator]=function(){return this.iter()},li.prototype[Symbol.iterator]=Hn.prototype[Symbol.iterator]=jn.prototype[Symbol.iterator]=function(){return this});var $a=class{constructor(e,t,r,n){this.from=e,this.to=t,this.number=r,this.text=n}get length(){return this.to-this.from}},yi="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(i=>i?parseInt(i,36):1);for(let i=1;i<yi.length;i++)yi[i]+=yi[i-1];function mm(i){for(let e=1;e<yi.length;e+=2)if(yi[e]>i)return yi[e-1]<=i;return!1}function Go(i){return i>=127462&&i<=127487}var Ko=8205;function vt(i,e,t=!0,r=!0){return(t?Yo:pm)(i,e,r)}function Yo(i,e,t){if(e==i.length)return e;e&&eu(i.charCodeAt(e))&&tu(i.charCodeAt(e-1))&&e--;let r=ct(i,e);for(e+=Ct(r);e<i.length;){let n=ct(i,e);if(r==Ko||n==Ko||t&&mm(n))e+=Ct(n),r=n;else if(Go(n)){let s=0,a=e-2;for(;a>=0&&Go(ct(i,a));)s++,a-=2;if(s%2==0)break;e+=2}else break}return e}function pm(i,e,t){for(;e>0;){let r=Yo(i,e-2,t);if(r<e)return r;e--}return 0}function eu(i){return i>=56320&&i<57344}function tu(i){return i>=55296&&i<56320}function ct(i,e){let t=i.charCodeAt(e);if(!tu(t)||e+1==i.length)return t;let r=i.charCodeAt(e+1);return eu(r)?(t-55296<<10)+(r-56320)+65536:t}function ln(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function Ct(i){return i<65536?1:2}var ka=/\r\n?|\n/,wt=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(wt||(wt={})),Vt=class{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,n=0;t<this.sections.length;){let s=this.sections[t++],a=this.sections[t++];a<0?(e(r,n,s),n+=s):n+=a,r+=s}}iterChangedRanges(e,t=!1){wa(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],n=this.sections[t++];n<0?e.push(r,n):e.push(n,r)}return new Vt(e)}composeDesc(e){return this.empty?e:e.empty?this:ru(this,e)}mapDesc(e,t=!1){return e.empty?this:xa(this,e,t)}mapPos(e,t=-1,r=wt.Simple){let n=0,s=0;for(let a=0;a<this.sections.length;){let l=this.sections[a++],o=this.sections[a++],u=n+l;if(o<0){if(u>e)return s+(e-n);s+=l}else{if(r!=wt.Simple&&u>=e&&(r==wt.TrackDel&&n<e&&u>e||r==wt.TrackBefore&&n<e||r==wt.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!l)return e==n||t<0?s:s+o;s+=o}n=u}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return s}touchesRange(e,t=e){for(let r=0,n=0;r<this.sections.length&&n<=t;){let s=this.sections[r++],a=this.sections[r++],l=n+s;if(a>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+r+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Vt(e)}static create(e){return new Vt(e)}},it=class extends Vt{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return wa(this,(t,r,n,s,a)=>e=e.replace(n,n+(r-t),a),!1),e}mapDesc(e,t=!1){return xa(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let n=0,s=0;n<t.length;n+=2){let a=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=a;let o=n>>1;for(;r.length<o;)r.push(Te.empty);r.push(a?e.slice(s,s+a):Te.empty)}s+=a}return new it(t,r)}compose(e){return this.empty?e:e.empty?this:ru(this,e,!0)}map(e,t=!1){return e.empty?this:xa(this,e,t,!0)}iterChanges(e,t=!1){wa(this,e,t)}get desc(){return Vt.create(this.sections)}filter(e){let t=[],r=[],n=[],s=new oi(this);e:for(let a=0,l=0;;){let o=a==e.length?1e9:e[a++];for(;l<o||l==o&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,o-l);Pt(n,h,-1);let c=s.ins==-1?-1:s.off==0?s.ins:0;Pt(t,h,c),c>0&&Lr(r,t,s.text),s.forward(h),l+=h}let u=e[a++];for(;l<u;){if(s.done)break e;let h=Math.min(s.len,u-l);Pt(t,h,-1),Pt(n,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),l+=h}}return{changes:new it(t,r),filtered:Vt.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],n=this.sections[t+1];n<0?e.push(r):n==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let n=[],s=[],a=0,l=null;function o(h=!1){if(!h&&!n.length)return;a<t&&Pt(n,t-a,-1);let c=new it(n,s);l=l?l.compose(c.map(l)):c,n=[],s=[],a=0}function u(h){if(Array.isArray(h))for(let c of h)u(c);else if(h instanceof it){if(h.length!=t)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${t})`);o(),l=l?l.compose(h.map(l)):h}else{let{from:c,to:f=c,insert:d}=h;if(c>f||c<0||f>t)throw new RangeError(`Invalid change range ${c} to ${f} (in doc of length ${t})`);let m=d?typeof d=="string"?Te.of(d.split(r||ka)):d:Te.empty,v=m.length;if(c==f&&v==0)return;c<a&&o(),c>a&&Pt(n,c-a,-1),Pt(n,f-c,v),Lr(s,n,m),a=f}}return u(e),o(!l),l}static empty(e){return new it(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let n=0;n<e.length;n++){let s=e[n];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((a,l)=>l&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<n;)r.push(Te.empty);r[n]=Te.of(s.slice(1)),t.push(s[0],r[n].length)}}}return new it(t,r)}static createSet(e,t){return new it(e,t)}};function Pt(i,e,t,r=!1){if(e==0&&t<=0)return;let n=i.length-2;n>=0&&t<=0&&t==i[n+1]?i[n]+=e:e==0&&i[n]==0?i[n+1]+=t:r?(i[n]+=e,i[n+1]+=t):i.push(e,t)}function Lr(i,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<i.length)i[i.length-1]=i[i.length-1].append(t);else{for(;i.length<r;)i.push(Te.empty);i.push(t)}}function wa(i,e,t){let r=i.inserted;for(let n=0,s=0,a=0;a<i.sections.length;){let l=i.sections[a++],o=i.sections[a++];if(o<0)n+=l,s+=l;else{let u=n,h=s,c=Te.empty;for(;u+=l,h+=o,o&&r&&(c=c.append(r[a-2>>1])),!(t||a==i.sections.length||i.sections[a+1]<0);)l=i.sections[a++],o=i.sections[a++];e(n,u,s,h,c),n=u,s=h}}}function xa(i,e,t,r=!1){let n=[],s=r?[]:null,a=new oi(i),l=new oi(e);for(let o=-1;;)if(a.ins==-1&&l.ins==-1){let u=Math.min(a.len,l.len);Pt(n,u,-1),a.forward(u),l.forward(u)}else if(l.ins>=0&&(a.ins<0||o==a.i||a.off==0&&(l.len<a.len||l.len==a.len&&!t))){let u=l.len;for(Pt(n,l.ins,-1);u;){let h=Math.min(a.len,u);a.ins>=0&&o<a.i&&a.len<=h&&(Pt(n,0,a.ins),s&&Lr(s,n,a.text),o=a.i),a.forward(h),u-=h}l.next()}else if(a.ins>=0){let u=0,h=a.len;for(;h;)if(l.ins==-1){let c=Math.min(h,l.len);u+=c,h-=c,l.forward(c)}else if(l.ins==0&&l.len<h)h-=l.len,l.next();else break;Pt(n,u,o<a.i?a.ins:0),s&&o<a.i&&Lr(s,n,a.text),o=a.i,a.forward(a.len-h)}else{if(a.done&&l.done)return s?it.createSet(n,s):Vt.create(n);throw new Error("Mismatched change set lengths")}}function ru(i,e,t=!1){let r=[],n=t?[]:null,s=new oi(i),a=new oi(e);for(let l=!1;;){if(s.done&&a.done)return n?it.createSet(r,n):Vt.create(r);if(s.ins==0)Pt(r,s.len,0,l),s.next();else if(a.len==0&&!a.done)Pt(r,0,a.ins,l),n&&Lr(n,r,a.text),a.next();else{if(s.done||a.done)throw new Error("Mismatched change set lengths");{let o=Math.min(s.len2,a.len),u=r.length;if(s.ins==-1){let h=a.ins==-1?-1:a.off?0:a.ins;Pt(r,o,h,l),n&&h&&Lr(n,r,a.text)}else a.ins==-1?(Pt(r,s.off?0:s.len,o,l),n&&Lr(n,r,s.textBit(o))):(Pt(r,s.off?0:s.len,a.off?0:a.ins,l),n&&!a.off&&Lr(n,r,a.text));l=(s.ins>o||a.ins>=0&&a.len>o)&&(l||r.length>u),s.forward2(o),a.forward(o)}}}}var oi=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Te.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Te.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},Mr=class{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let r,n;return this.empty?r=n=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),r==this.from&&n==this.to?this:new Mr(r,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return j.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return j.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return j.range(e.anchor,e.head)}static create(e,t,r){return new Mr(e,t,r)}},j=class{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:j.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new j([this.main],0)}addRange(e,t=!0){return j.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,j.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new j(e.ranges.map(t=>Mr.fromJSON(t)),e.main)}static single(e,t=e){return new j([j.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,n=0;n<e.length;n++){let s=e[n];if(s.empty?s.from<=r:s.from<r)return j.normalized(e.slice(),t);r=s.to}return new j(e,t)}static cursor(e,t=0,r,n){return Mr.create(e,e,(t==0?0:t<0?4:8)|(r==null?3:Math.min(2,r))|(n??33554431)<<5)}static range(e,t,r){let n=(r??33554431)<<5;return t<e?Mr.create(t,e,16|n|8):Mr.create(e,t,n|(t>e?4:0))}static normalized(e,t=0){let r=e[t];e.sort((n,s)=>n.from-s.from),t=e.indexOf(r);for(let n=1;n<e.length;n++){let s=e[n],a=e[n-1];if(s.empty?s.from<=a.to:s.from<a.to){let l=a.from,o=Math.max(s.to,a.to);n<=t&&t--,e.splice(--n,2,s.anchor>s.head?j.range(o,l):j.range(l,o))}}return new j(e,t)}};function iu(i,e){for(let t of i.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}var Da=0,le=class{constructor(e,t,r,n,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=n,this.id=Da++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new le(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:Ma),!!e.static,e.enables)}of(e){return new Pi([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Pi(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Pi(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}};function Ma(i,e){return i==e||i.length==e.length&&i.every((t,r)=>t===e[r])}var Pi=class{constructor(e,t,r,n){this.dependencies=e,this.facet=t,this.type=r,this.value=n,this.id=Da++}dynamicSlot(e){var t;let r=this.value,n=this.facet.compareInput,s=this.id,a=e[s]>>1,l=this.type==2,o=!1,u=!1,h=[];for(let c of this.dependencies)c=="doc"?o=!0:c=="selection"?u=!0:(((t=e[c.id])!==null&&t!==void 0?t:1)&1)==0&&h.push(e[c.id]);return{create(c){return c.values[a]=r(c),1},update(c,f){if(o&&f.docChanged||u&&(f.docChanged||f.selection)||Sa(c,h)){let d=r(c);if(l?!Qo(d,c.values[a],n):!n(d,c.values[a]))return c.values[a]=d,1}return 0},reconfigure:(c,f)=>{let d=r(c),m=f.config.address[s];if(m!=null){let v=zn(f,m);if(this.dependencies.every(p=>p instanceof le?f.facet(p)===c.facet(p):p instanceof Ue?f.field(p,!1)==c.field(p,!1):!0)||(l?Qo(d,v,n):n(d,v)))return c.values[a]=v,0}return c.values[a]=d,1}}}};function Qo(i,e,t){if(i.length!=e.length)return!1;for(let r=0;r<i.length;r++)if(!t(i[r],e[r]))return!1;return!0}function Sa(i,e){let t=!1;for(let r of e)nn(i,r)&1&&(t=!0);return t}function vm(i,e,t){let r=t.map(o=>i[o.id]),n=t.map(o=>o.type),s=r.filter(o=>!(o&1)),a=i[e.id]>>1;function l(o){let u=[];for(let h=0;h<r.length;h++){let c=zn(o,r[h]);if(n[h]==2)for(let f of c)u.push(f);else u.push(c)}return e.combine(u)}return{create(o){for(let u of r)nn(o,u);return o.values[a]=l(o),1},update(o,u){if(!Sa(o,s))return 0;let h=l(o);return e.compare(h,o.values[a])?0:(o.values[a]=h,1)},reconfigure(o,u){let h=Sa(o,r),c=u.config.facets[e.id],f=u.facet(e);if(c&&!h&&Ma(t,c))return o.values[a]=f,0;let d=l(o);return e.compare(d,f)?(o.values[a]=f,0):(o.values[a]=d,1)}}}var qo=le.define({static:!0}),Ue=class{constructor(e,t,r,n,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=n,this.spec=s,this.provides=void 0}static define(e){let t=new Ue(Da++,e.create,e.update,e.compare||((r,n)=>r===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(qo).find(r=>r.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,n)=>{let s=r.values[t],a=this.updateF(s,n);return this.compareF(s,a)?0:(r.values[t]=a,1)},reconfigure:(r,n)=>n.config.address[this.id]!=null?(r.values[t]=n.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,qo.of({field:this,create:e})]}get extension(){return this}},si={lowest:4,low:3,default:2,high:1,highest:0};function rn(i){return e=>new Vn(e,i)}var br={highest:rn(si.highest),high:rn(si.high),default:rn(si.default),low:rn(si.low),lowest:rn(si.lowest)},Vn=class{constructor(e,t){this.inner=e,this.prec=t}},Ai=class{of(e){return new sn(this,e)}reconfigure(e){return Ai.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},sn=class{constructor(e,t){this.compartment=e,this.inner=t}},_i=class{constructor(e,t,r,n,s,a){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=n,this.staticValues=s,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let n=[],s=Object.create(null),a=new Map;for(let f of gm(e,t,a))f instanceof Ue?n.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let l=Object.create(null),o=[],u=[];for(let f of n)l[f.id]=u.length<<1,u.push(d=>f.slot(d));let h=r?.config.facets;for(let f in s){let d=s[f],m=d[0].facet,v=h&&h[f]||[];if(d.every(p=>p.type==0))if(l[m.id]=o.length<<1|1,Ma(v,d))o.push(r.facet(m));else{let p=m.combine(d.map(g=>g.value));o.push(r&&m.compare(p,r.facet(m))?r.facet(m):p)}else{for(let p of d)p.type==0?(l[p.id]=o.length<<1|1,o.push(p.value)):(l[p.id]=u.length<<1,u.push(g=>p.dynamicSlot(g)));l[m.id]=u.length<<1,u.push(p=>vm(p,m,d))}}let c=u.map(f=>f(l));return new _i(e,a,c,l,o,s)}};function gm(i,e,t){let r=[[],[],[],[],[]],n=new Map;function s(a,l){let o=n.get(a);if(o!=null){if(o<=l)return;let u=r[o].indexOf(a);u>-1&&r[o].splice(u,1),a instanceof sn&&t.delete(a.compartment)}if(n.set(a,l),Array.isArray(a))for(let u of a)s(u,l);else if(a instanceof sn){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(a.compartment)||a.inner;t.set(a.compartment,u),s(u,l)}else if(a instanceof Vn)s(a.inner,a.prec);else if(a instanceof Ue)r[l].push(a),a.provides&&s(a.provides,l);else if(a instanceof Pi)r[l].push(a),a.facet.extensions&&s(a.facet.extensions,si.default);else{let u=a.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,l)}}return s(i,si.default),r.reduce((a,l)=>a.concat(l))}function nn(i,e){if(e&1)return 2;let t=e>>1,r=i.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;i.status[t]=4;let n=i.computeSlot(i,i.config.dynamicSlots[t]);return i.status[t]=2|n}function zn(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}var nu=le.define(),su=le.define({combine:i=>i.some(e=>e),static:!0}),au=le.define({combine:i=>i.length?i[0]:void 0,static:!0}),lu=le.define(),ou=le.define(),uu=le.define(),hu=le.define({combine:i=>i.length?i[0]:!1}),fr=class{constructor(e,t){this.type=e,this.value=t}static define(){return new ya}},ya=class{of(e){return new fr(this,e)}},Pa=class{constructor(e){this.map=e}of(e){return new we(this,e)}},we=class{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new we(this.type,t)}is(e){return this.type==e}static define(e={}){return new Pa(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let n of e){let s=n.map(t);s&&r.push(s)}return r}};we.reconfigure=we.define();we.appendConfig=we.define();var nt=class{constructor(e,t,r,n,s,a){this.startState=e,this.changes=t,this.selection=r,this.effects=n,this.annotations=s,this.scrollIntoView=a,this._doc=null,this._state=null,r&&iu(r,t.newLength),s.some(l=>l.type==nt.time)||(this.annotations=s.concat(nt.time.of(Date.now())))}static create(e,t,r,n,s,a){return new nt(e,t,r,n,s,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(nt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};nt.time=fr.define();nt.userEvent=fr.define();nt.addToHistory=fr.define();nt.remote=fr.define();function bm(i,e){let t=[];for(let r=0,n=0;;){let s,a;if(r<i.length&&(n==e.length||e[n]>=i[r]))s=i[r++],a=i[r++];else if(n<e.length)s=e[n++],a=e[n++];else return t;!t.length||t[t.length-1]<s?t.push(s,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function cu(i,e,t){var r;let n,s,a;return t?(n=e.changes,s=it.empty(e.changes.length),a=i.changes.compose(e.changes)):(n=e.changes.map(i.changes),s=i.changes.mapDesc(e.changes,!0),a=i.changes.compose(n)),{changes:a,selection:e.selection?e.selection.map(s):(r=i.selection)===null||r===void 0?void 0:r.map(n),effects:we.mapEffects(i.effects,n).concat(we.mapEffects(e.effects,s)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function Ca(i,e,t){let r=e.selection,n=Ci(e.annotations);return e.userEvent&&(n=n.concat(nt.userEvent.of(e.userEvent))),{changes:e.changes instanceof it?e.changes:it.of(e.changes||[],t,i.facet(au)),selection:r&&(r instanceof j?r:j.single(r.anchor,r.head)),effects:Ci(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function fu(i,e,t){let r=Ca(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let a=!!e[s].sequential;r=cu(r,Ca(i,e[s],a?r.changes.newLength:i.doc.length),a)}let n=nt.create(i,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return km(t?$m(n):n)}function $m(i){let e=i.startState,t=!0;for(let n of e.facet(lu)){let s=n(i);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:bm(t,s))}if(t!==!0){let n,s;if(t===!1)s=i.changes.invertedDesc,n=it.empty(e.doc.length);else{let a=i.changes.filter(t);n=a.changes,s=a.filtered.mapDesc(a.changes).invertedDesc}i=nt.create(e,n,i.selection&&i.selection.map(s),we.mapEffects(i.effects,s),i.annotations,i.scrollIntoView)}let r=e.facet(ou);for(let n=r.length-1;n>=0;n--){let s=r[n](i);s instanceof nt?i=s:Array.isArray(s)&&s.length==1&&s[0]instanceof nt?i=s[0]:i=fu(e,Ci(s),!1)}return i}function km(i){let e=i.startState,t=e.facet(uu),r=i;for(let n=t.length-1;n>=0;n--){let s=t[n](i);s&&Object.keys(s).length&&(r=cu(r,Ca(e,s,i.changes.newLength),!0))}return r==i?i:nt.create(e,i.changes,i.selection,r.effects,r.annotations,r.scrollIntoView)}var wm=[];function Ci(i){return i==null?wm:Array.isArray(i)?i:[i]}var Ve=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(Ve||(Ve={})),xm=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Aa;try{Aa=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Sm(i){if(Aa)return Aa.test(i);for(let e=0;e<i.length;e++){let t=i[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||xm.test(t)))return!0}return!1}function ym(i){return e=>{if(!/\S/.test(e))return Ve.Space;if(Sm(e))return Ve.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return Ve.Word;return Ve.Other}}var Ae=class{constructor(e,t,r,n,s,a){this.config=e,this.doc=t,this.selection=r,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=s,a&&(a._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)nn(this,l<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return nn(this,r),zn(this,r)}update(...e){return fu(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:n}=t;for(let a of e.effects)a.is(Ai.reconfigure)?(t&&(n=new Map,t.compartments.forEach((l,o)=>n.set(o,l)),t=null),n.set(a.value.compartment,a.value.extension)):a.is(we.reconfigure)?(t=null,r=a.value):a.is(we.appendConfig)&&(t=null,r=Ci(r).concat(a.value));let s;t?s=e.startState.values.slice():(t=_i.resolve(r,n,this),s=new Ae(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,o)=>o.reconfigure(l,this),null).values),new Ae(t,e.newDoc,e.newSelection,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:j.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),n=this.changes(r.changes),s=[r.range],a=Ci(r.effects);for(let l=1;l<t.ranges.length;l++){let o=e(t.ranges[l]),u=this.changes(o.changes),h=u.map(n);for(let f=0;f<l;f++)s[f]=s[f].map(h);let c=n.mapDesc(u,!0);s.push(o.range.map(c)),n=n.compose(h),a=we.mapEffects(a,h).concat(we.mapEffects(Ci(o.effects),c))}return{changes:n,selection:j.create(s,t.mainIndex),effects:a}}changes(e=[]){return e instanceof it?e:it.of(e,this.doc.length,this.facet(Ae.lineSeparator))}toText(e){return Te.of(e.split(this.facet(Ae.lineSeparator)||ka))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(nn(this,t),zn(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let n=e[r];n instanceof Ue&&this.config.address[n.id]!=null&&(t[r]=n.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let a=r[s],l=e[s];n.push(a.init(o=>a.spec.fromJSON(l,o)))}}return Ae.create({doc:e.doc,selection:j.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=_i.resolve(e.extensions||[],new Map),r=e.doc instanceof Te?e.doc:Te.of((e.doc||"").split(t.staticFacet(Ae.lineSeparator)||ka)),n=e.selection?e.selection instanceof j?e.selection:j.single(e.selection.anchor,e.selection.head):j.single(0);return iu(n,r.length),t.staticFacet(su)||(n=n.asSingle()),new Ae(t,r,n,t.dynamicSlots.map(()=>null),(s,a)=>a.create(s),null)}get tabSize(){return this.facet(Ae.tabSize)}get lineBreak(){return this.facet(Ae.lineSeparator)||`
`}get readOnly(){return this.facet(hu)}phrase(e,...t){for(let r of this.facet(Ae.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,n)=>{if(n=="$")return"$";let s=+(n||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let n=[];for(let s of this.facet(nu))for(let a of s(this,t,r))Object.prototype.hasOwnProperty.call(a,e)&&n.push(a[e]);return n}charCategorizer(e){return ym(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:n}=this.doc.lineAt(e),s=this.charCategorizer(e),a=e-r,l=e-r;for(;a>0;){let o=vt(t,a,!1);if(s(t.slice(o,a))!=Ve.Word)break;a=o}for(;l<n;){let o=vt(t,l);if(s(t.slice(l,o))!=Ve.Word)break;l=o}return a==l?null:j.range(a+r,l+r)}};Ae.allowMultipleSelections=su;Ae.tabSize=le.define({combine:i=>i.length?i[0]:4});Ae.lineSeparator=au;Ae.readOnly=hu;Ae.phrases=le.define({compare(i,e){let t=Object.keys(i),r=Object.keys(e);return t.length==r.length&&t.every(n=>i[n]==e[n])}});Ae.languageData=nu;Ae.changeFilter=lu;Ae.transactionFilter=ou;Ae.transactionExtender=uu;Ai.reconfigure=we.define();function At(i,e,t={}){let r={};for(let n of i)for(let s of Object.keys(n)){let a=n[s],l=r[s];if(l===void 0)r[s]=a;else if(!(l===a||a===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](l,a);else throw new Error("Config merge conflict for field "+s)}for(let n in e)r[n]===void 0&&(r[n]=e[n]);return r}var dr=class{eq(e){return this==e}range(e,t=e){return ui.create(e,t,this)}};dr.prototype.startSide=dr.prototype.endSide=0;dr.prototype.point=!1;dr.prototype.mapMode=wt.TrackDel;var ui=class{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new ui(e,t,r)}};function _a(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}var an=class{constructor(e,t,r,n){this.from=e,this.to=t,this.value=r,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,n=0){let s=r?this.to:this.from;for(let a=n,l=s.length;;){if(a==l)return a;let o=a+l>>1,u=s[o]-e||(r?this.value[o].endSide:this.value[o].startSide)-t;if(o==a)return u>=0?a:l;u>=0?l=o:a=o+1}}between(e,t,r,n){for(let s=this.findIndex(t,-1e9,!0),a=this.findIndex(r,1e9,!1,s);s<a;s++)if(n(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],n=[],s=[],a=-1,l=-1;for(let o=0;o<this.value.length;o++){let u=this.value[o],h=this.from[o]+e,c=this.to[o]+e,f,d;if(h==c){let m=t.mapPos(h,u.startSide,u.mapMode);if(m==null||(f=d=m,u.startSide!=u.endSide&&(d=t.mapPos(h,u.endSide),d<f)))continue}else if(f=t.mapPos(h,u.startSide),d=t.mapPos(c,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(a<0&&(a=f),u.point&&(l=Math.max(l,d-f)),r.push(u),n.push(f-a),s.push(d-a))}return{mapped:r.length?new an(n,s,r,l):null,pos:a}}},Ie=class{constructor(e,t,r,n){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=n}static create(e,t,r,n){return new Ie(e,t,r,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:n=0,filterTo:s=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(r&&(t=t.slice().sort(_a)),this.isEmpty)return t.length?Ie.of(t):this;let l=new Gn(this,null,-1).goto(0),o=0,u=[],h=new zt;for(;l.value||o<t.length;)if(o<t.length&&(l.from-t[o].from||l.startSide-t[o].value.startSide)>=0){let c=t[o++];h.addInner(c.from,c.to,c.value)||u.push(c)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(o==t.length||this.chunkEnd(l.chunkIndex)<t[o].from)&&(!a||n>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&h.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!a||n>l.to||s<l.from||a(l.from,l.to,l.value))&&(h.addInner(l.from,l.to,l.value)||u.push(ui.create(l.from,l.to,l.value))),l.next());return h.finishInner(this.nextLayer.isEmpty&&!u.length?Ie.empty:this.nextLayer.update({add:u,filter:a,filterFrom:n,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],n=-1;for(let a=0;a<this.chunk.length;a++){let l=this.chunkPos[a],o=this.chunk[a],u=e.touchesRange(l,l+o.length);if(u===!1)n=Math.max(n,o.maxPoint),t.push(o),r.push(e.mapPos(l));else if(u===!0){let{mapped:h,pos:c}=o.map(l,e);h&&(n=Math.max(n,h.maxPoint),t.push(h),r.push(c))}}let s=this.nextLayer.map(e);return t.length==0?s:new Ie(r,t,s||Ie.empty,n)}between(e,t,r){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],a=this.chunk[n];if(t>=s&&e<=s+a.length&&a.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return hi.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return hi.from(e).goto(t)}static compare(e,t,r,n,s=-1){let a=e.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),l=t.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),o=Zo(a,l,r),u=new ai(a,o,s),h=new ai(l,o,s);r.iterGaps((c,f,d)=>Xo(u,c,h,f,d,n)),r.empty&&r.length==0&&Xo(u,0,h,0,0,n)}static eq(e,t,r=0,n){n==null&&(n=1e9);let s=e.filter(h=>!h.isEmpty&&t.indexOf(h)<0),a=t.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=a.length)return!1;if(!s.length)return!0;let l=Zo(s,a),o=new ai(s,l,0).goto(r),u=new ai(a,l,0).goto(r);for(;;){if(o.to!=u.to||!Ia(o.active,u.active)||o.point&&(!u.point||!o.point.eq(u.point)))return!1;if(o.to>n)return!0;o.next(),u.next()}}static spans(e,t,r,n,s=-1){let a=new ai(e,null,s).goto(t),l=t,o=a.openStart;for(;;){let u=Math.min(a.to,r);if(a.point?(n.point(l,u,a.point,a.activeForPoint(a.to),o,a.pointRank),o=a.openEnd(u)+(a.to>u?1:0)):u>l&&(n.span(l,u,a.active,o),o=a.openEnd(u)),a.to>r)break;l=a.to,a.next()}return o}static of(e,t=!1){let r=new zt;for(let n of e instanceof ui?[e]:t?Pm(e):e)r.add(n.from,n.to,n.value);return r.finish()}};Ie.empty=new Ie([],[],null,-1);function Pm(i){if(i.length>1)for(let e=i[0],t=1;t<i.length;t++){let r=i[t];if(_a(e,r)>0)return i.slice().sort(_a);e=r}return i}Ie.empty.nextLayer=Ie.empty;var zt=class{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new an(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new zt)).add(e,t,r)}addInner(e,t,r){let n=e-this.lastTo||r.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Ie.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ie.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}};function Zo(i,e,t){let r=new Map;for(let s of i)for(let a=0;a<s.chunk.length;a++)s.chunk[a].maxPoint<=0&&r.set(s.chunk[a],s.chunkPos[a]);let n=new Set;for(let s of e)for(let a=0;a<s.chunk.length;a++){let l=r.get(s.chunk[a]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[a]&&!t?.touchesRange(l,l+s.chunk[a].length)&&n.add(s.chunk[a])}return n}var Gn=class{constructor(e,t,r,n=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}},hi=class{constructor(e){this.heap=e}static from(e,t=null,r=-1){let n=[];for(let s=0;s<e.length;s++)for(let a=e[s];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&n.push(new Gn(a,t,r,s));return n.length==1?n[0]:new hi(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)ba(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)ba(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),ba(this.heap,0)}}};function ba(i,e){for(let t=i[e];;){let r=(e<<1)+1;if(r>=i.length)break;let n=i[r];if(r+1<i.length&&n.compare(i[r+1])>=0&&(n=i[r+1],r++),t.compare(n)<0)break;i[r]=t,i[e]=n,e=r}}var ai=class{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=hi.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Jn(this.active,e),Jn(this.activeTo,e),Jn(this.activeRank,e),this.minActive=Uo(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:n,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;Rn(this.active,t,r),Rn(this.activeTo,t,n),Rn(this.activeRank,t,s),e&&Rn(e,t,this.cursor.from),this.minActive=Uo(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null,n=0;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&Jn(r,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(r),this.cursor.from<e&&this.cursor.to>e&&n++,this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.from<e&&(n=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){let s=0;for(;s<r.length&&r[s]<e;)s++;this.openStart=s+n}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}};function Xo(i,e,t,r,n,s){i.goto(e),t.goto(r);let a=r+n,l=r,o=r-e;for(;;){let u=i.to+o-t.to||i.endSide-t.endSide,h=u<0?i.to+o:t.to,c=Math.min(h,a);if(i.point||t.point?i.point&&t.point&&(i.point==t.point||i.point.eq(t.point))&&Ia(i.activeForPoint(i.to+o),t.activeForPoint(t.to))||s.comparePoint(l,c,i.point,t.point):c>l&&!Ia(i.active,t.active)&&s.compareRange(l,c,i.active,t.active),h>a)break;l=h,u<=0&&i.next(),u>=0&&t.next()}}function Ia(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t]&&!i[t].eq(e[t]))return!1;return!0}function Jn(i,e){for(let t=e,r=i.length-1;t<r;t++)i[t]=i[t+1];i.pop()}function Rn(i,e,t){for(let r=i.length-1;r>=e;r--)i[r+1]=i[r];i[e]=t}function Uo(i,e){let t=-1,r=1e9;for(let n=0;n<e.length;n++)(e[n]-r||i[n].endSide-i[t].endSide)<0&&(t=n,r=e[n]);return t}function Fr(i,e,t=i.length){let r=0;for(let n=0;n<t;)i.charCodeAt(n)==9?(r+=e-r%e,n++):(r++,n=vt(i,n));return r}function Kn(i,e,t,r){for(let n=0,s=0;;){if(s>=e)return n;if(n==i.length)break;s+=i.charCodeAt(n)==9?t-s%t:1,n=vt(i,n)}return r===!0?-1:i.length}var Ta="\u037C",du=typeof Symbol>"u"?"__"+Ta:Symbol.for(Ta),Ba=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},ir=class{constructor(e,t){this.rules=[];let{finish:r}=t||{};function n(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function s(a,l,o,u){let h=[],c=/^@(\w+)\b/.exec(a[0]),f=c&&c[1]=="keyframes";if(c&&l==null)return o.push(a[0]+";");for(let d in l){let m=l[d];if(/&/.test(d))s(d.split(/,\s*/).map(v=>a.map(p=>v.replace(/&/,p))).reduce((v,p)=>v.concat(p)),m,o);else if(m&&typeof m=="object"){if(!c)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(n(d),m,h,f)}else m!=null&&h.push(d.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+m+";")}(h.length||f)&&o.push((r&&!c&&!u?a.map(r):a).join(", ")+" {"+h.join(" ")+"}")}for(let a in e)s(n(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=mu[du]||1;return mu[du]=e+1,Ta+e.toString(36)}static mount(e,t){(e[Ba]||new Oa(e)).mount(Array.isArray(t)?t:[t])}},Qn=null,Oa=class{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(Qn)return e.adoptedStyleSheets=[Qn.sheet].concat(e.adoptedStyleSheets),e[Ba]=Qn;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Qn=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Ba]=this}mount(e){let t=this.sheet,r=0,n=0;for(let s=0;s<e.length;s++){let a=e[s],l=this.modules.indexOf(a);if(l<n&&l>-1&&(this.modules.splice(l,1),n--,l=-1),l==-1){if(this.modules.splice(n++,0,a),t)for(let o=0;o<a.rules.length;o++)t.insertRule(a.rules[o],r++)}else{for(;n<l;)r+=this.modules[n++].rules.length;r+=a.rules.length,n++}}if(!t){let s="";for(let a=0;a<this.modules.length;a++)s+=this.modules[a].getRules()+`
`;this.styleTag.textContent=s}}};var Tr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ii={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},pu=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),yb=typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent),Cm=typeof navigator<"u"&&/Mac/.test(navigator.platform),Am=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),_m=Cm||pu&&+pu[1]<57;for(ft=0;ft<10;ft++)Tr[48+ft]=Tr[96+ft]=String(ft);var ft;for(ft=1;ft<=24;ft++)Tr[ft+111]="F"+ft;var ft;for(ft=65;ft<=90;ft++)Tr[ft]=String.fromCharCode(ft+32),Ii[ft]=String.fromCharCode(ft);var ft;for(qn in Tr)Ii.hasOwnProperty(qn)||(Ii[qn]=Tr[qn]);var qn;function vu(i){var e=_m&&(i.ctrlKey||i.altKey||i.metaKey)||Am&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?Ii:Tr)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function ss(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function Wi(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function Im(i){let e=i.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function ts(i,e){if(!e.anchorNode)return!1;try{return Wi(i,e.anchorNode)}catch{return!1}}function gn(i){return i.nodeType==3?Ei(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function as(i,e,t,r){return t?gu(i,e,t,r,-1)||gu(i,e,t,r,1):!1}function ls(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function gu(i,e,t,r,n){for(;;){if(i==t&&e==r)return!0;if(e==(n<0?0:bn(i))){if(i.nodeName=="DIV")return!1;let s=i.parentNode;if(!s||s.nodeType!=1)return!1;e=ls(i)+(n<0?0:1),i=s}else if(i.nodeType==1){if(i=i.childNodes[e+(n<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=n<0?bn(i):0}else return!1}}function bn(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}var eh={left:0,right:0,top:0,bottom:0};function Al(i,e){let t=e?i.left:i.right;return{left:t,right:t,top:i.top,bottom:i.bottom}}function Dm(i){return{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function Mm(i,e,t,r,n,s,a,l){let o=i.ownerDocument,u=o.defaultView||window;for(let h=i;h;)if(h.nodeType==1){let c,f=h==o.body;if(f)c=Dm(u);else{if(h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let v=h.getBoundingClientRect();c={left:v.left,right:v.left+h.clientWidth,top:v.top,bottom:v.top+h.clientHeight}}let d=0,m=0;if(n=="nearest")e.top<c.top?(m=-(c.top-e.top+a),t>0&&e.bottom>c.bottom+m&&(m=e.bottom-c.bottom+m+a)):e.bottom>c.bottom&&(m=e.bottom-c.bottom+a,t<0&&e.top-m<c.top&&(m=-(c.top+m-e.top+a)));else{let v=e.bottom-e.top,p=c.bottom-c.top;m=(n=="center"&&v<=p?e.top+v/2-p/2:n=="start"||n=="center"&&t<0?e.top-a:e.bottom-p+a)-c.top}if(r=="nearest"?e.left<c.left?(d=-(c.left-e.left+s),t>0&&e.right>c.right+d&&(d=e.right-c.right+d+s)):e.right>c.right&&(d=e.right-c.right+s,t<0&&e.left<c.left+d&&(d=-(c.left+d-e.left+s))):d=(r=="center"?e.left+(e.right-e.left)/2-(c.right-c.left)/2:r=="start"==l?e.left-s:e.right-(c.right-c.left)+s)-c.left,d||m)if(f)u.scrollBy(d,m);else{let v=0,p=0;if(m){let g=h.scrollTop;h.scrollTop+=m,p=h.scrollTop-g}if(d){let g=h.scrollLeft;h.scrollLeft+=d,v=h.scrollLeft-g}e={left:e.left-v,top:e.top-p,right:e.right-v,bottom:e.bottom-p},v&&Math.abs(v-d)<1&&(r="nearest"),p&&Math.abs(p-m)<1&&(n="nearest")}if(f)break;h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}var ja=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,r,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=n}},Di=null;function th(i){if(i.setActive)return i.setActive();if(Di)return i.focus(Di);let e=[];for(let t=i;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(i.focus(Di==null?{get preventScroll(){return Di={preventScroll:!0},!0}}:void 0),!Di){Di=!1;for(let t=0;t<e.length;){let r=e[t++],n=e[t++],s=e[t++];r.scrollTop!=n&&(r.scrollTop=n),r.scrollLeft!=s&&(r.scrollLeft=s)}}}var bu;function Ei(i,e,t=e){let r=bu||(bu=document.createRange());return r.setEnd(i,t),r.setStart(i,e),r}function Oi(i,e,t){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",r);n.synthetic=!0,i.dispatchEvent(n);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,i.dispatchEvent(s),n.defaultPrevented||s.defaultPrevented}function Tm(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function rh(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function Bm(i,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(;;)if(r){if(t.nodeType!=1)return!1;let n=t.childNodes[r-1];n.contentEditable=="false"?r--:(t=n,r=bn(t))}else{if(t==i)return!0;r=ls(t),t=t.parentNode}}var gt=class{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new gt(e.parentNode,ls(e),t)}static after(e,t){return new gt(e.parentNode,ls(e)+1,t)}},_l=[],Ke=class{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,r=null,n;for(let s of this.children){if(s.dirty){if(!s.dom&&(n=r?r.nextSibling:t.firstChild)){let a=Ke.get(n);(!a||!a.parent&&a.canReuseDOM(s))&&s.reuseDOM(n)}s.sync(e),s.dirty=0}if(n=r?r.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&n!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;n&&n!=s.dom;)n=$u(n);else t.insertBefore(s.dom,n);r=s.dom}for(n=r?r.nextSibling:t.firstChild,n&&e&&e.node==t&&(e.written=!0);n;)n=$u(n)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let n=bn(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;n==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?n=-1:n=1),e=s}n<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Ke.get(r);)r=r.nextSibling;if(!r)return this.length;for(let n=0,s=0;;n++){let a=this.children[n];if(a.dom==r)return s;s+=a.length+a.breakAfter}}domBoundsAround(e,t,r=0){let n=-1,s=-1,a=-1,l=-1;for(let o=0,u=r,h=r;o<this.children.length;o++){let c=this.children[o],f=u+c.length;if(u<e&&f>t)return c.domBoundsAround(e,t,u);if(f>=e&&n==-1&&(n=o,s=u),u>t&&c.dom.parentNode==this.dom){a=o,l=h;break}h=f,u=f+c.breakAfter}return{from:s,to:l<0?r+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=_l){this.markDirty();for(let n=e;n<t;n++){let s=this.children[n];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...r);for(let n=0;n<r.length;n++)r[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new os(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,r,n,s,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}};Ke.prototype.breakAfter=0;function $u(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}var os=class{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}};function ih(i,e,t,r,n,s,a,l,o){let{children:u}=i,h=u.length?u[e]:null,c=s.length?s[s.length-1]:null,f=c?c.breakAfter:a;if(!(e==r&&h&&!a&&!f&&s.length<2&&h.merge(t,n,s.length?c:null,t==0,l,o))){if(r<u.length){let d=u[r];d&&n<d.length?(e==r&&(d=d.split(n),n=0),!f&&c&&d.merge(0,n,c,!0,0,o)?s[s.length-1]=d:(n&&d.merge(0,n,null,!1,0,o),s.push(d))):d?.breakAfter&&(c?c.breakAfter=1:a=1),r++}for(h&&(h.breakAfter=a,t>0&&(!a&&s.length&&h.merge(t,h.length,s[0],!1,l,0)?h.breakAfter=s.shift().breakAfter:(t<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(t,h.length,null,!1,l,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),o=s.length?0:l;else if(u[e].become(s[0]))e++,s.shift(),l=s.length?0:o;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,l,o)&&e--,(e<r||s.length)&&i.replaceChildren(e,r,s)}}function nh(i,e,t,r,n,s){let a=i.childCursor(),{i:l,off:o}=a.findPos(t,1),{i:u,off:h}=a.findPos(e,-1),c=e-t;for(let f of r)c+=f.length;i.length+=c,ih(i,u,h,l,o,r,0,n,s)}var Gt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Va=typeof document<"u"?document:{documentElement:{style:{}}},za=/Edge\/(\d+)/.exec(Gt.userAgent),sh=/MSIE \d/.test(Gt.userAgent),Ga=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Gt.userAgent),xs=!!(sh||Ga||za),ku=!xs&&/gecko\/(\d+)/i.test(Gt.userAgent),Wa=!xs&&/Chrome\/(\d+)/.exec(Gt.userAgent),wu="webkitFontSmoothing"in Va.documentElement.style,ah=!xs&&/Apple Computer/.test(Gt.vendor),xu=ah&&(/Mobile\/\w+/.test(Gt.userAgent)||Gt.maxTouchPoints>2),ce={mac:xu||/Mac/.test(Gt.platform),windows:/Win/.test(Gt.platform),linux:/Linux|X11/.test(Gt.platform),ie:xs,ie_version:sh?Va.documentMode||6:Ga?+Ga[1]:za?+za[1]:0,gecko:ku,gecko_version:ku?+(/Firefox\/(\d+)/.exec(Gt.userAgent)||[0,0])[1]:0,chrome:!!Wa,chrome_version:Wa?+Wa[1]:0,ios:xu,android:/Android\b/.test(Gt.userAgent),webkit:wu,safari:ah,webkit_version:wu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Va.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},Om=256,xr=class extends Ke{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return r&&(!(r instanceof xr)||this.length-(t-e)+r.length>Om)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new xr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new gt(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Ka(this.dom,e,t)}},nr=class extends Ke{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let n of t)n.setParent(this)}setAttrs(e){if(rh(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,r,n,s,a){return r&&(!(r instanceof nr&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&a<=0)?!1:(nh(this,e,t,r?r.children:[],s-1,a-1),this.markDirty(),!0)}split(e){let t=[],r=0,n=-1,s=0;for(let l of this.children){let o=r+l.length;o>e&&t.push(r<e?l.split(e-r):l),n<0&&r>=e&&(n=s),r=o,s++}let a=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new nr(this.mark,t,a)}domAtPos(e){return oh(this,e)}coordsAt(e,t){return hh(this,e,t)}};function Ka(i,e,t){let r=i.nodeValue.length;e>r&&(e=r);let n=e,s=e,a=0;e==0&&t<0||e==r&&t>=0?ce.chrome||ce.gecko||(e?(n--,a=1):s<r&&(s++,a=-1)):t<0?n--:s<r&&s++;let l=Ei(i,n,s).getClientRects();if(!l.length)return eh;let o=l[(a?a<0:t>=0)?0:l.length-1];return ce.safari&&!a&&o.width==0&&(o=Array.prototype.find.call(l,u=>u.width)||o),a?Al(o,a<0):o||null}var kr=class extends Ke{constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}static create(e,t,r){return new(e.customView||kr)(e,t,r)}split(e){let t=kr.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,r,n,s,a){return r&&(!(r instanceof kr)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof kr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Te.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,r=t&&t.state.doc,n=this.posAtStart;return r?r.slice(n,n+this.length):Te.empty}domAtPos(e){return e==0?gt.before(this.dom):gt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.dom.getClientRects(),n=null;if(!r.length)return eh;for(let s=e>0?r.length-1:0;n=r[s],!(e>0?s==0:s==r.length-1||n.top<n.bottom);s+=e>0?-1:1);return Al(n,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},us=class extends kr{domAtPos(e){let{topView:t,text:r}=this.widget;return t?Qa(e,0,t,r,(n,s)=>n.domAtPos(s),n=>new gt(r,Math.min(n,r.nodeValue.length))):new gt(r,Math.min(e,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:r,text:n}=this.widget;return r?lh(e,t,r,n):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:r,text:n}=this.widget;return r?Qa(e,t,r,n,(s,a,l)=>s.coordsAt(a,l),(s,a)=>Ka(n,s,a)):Ka(n,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}};function Qa(i,e,t,r,n,s){if(t instanceof nr){for(let a=t.dom.firstChild;a;a=a.nextSibling){let l=Ke.get(a);if(!l)return s(i,e);let o=Wi(a,r),u=l.length+(o?r.nodeValue.length:0);if(i<u||i==u&&l.getSide()<=0)return o?Qa(i,e,l,r,n,s):n(l,i,e);i-=u}return n(t,t.length,-1)}else return t.dom==r?s(i,e):n(t,i,e)}function lh(i,e,t,r){if(t instanceof nr)for(let n of t.children){let s=0,a=Wi(n.dom,r);if(Wi(n.dom,i))return s+(a?lh(i,e,n,r):n.localPosFromDOM(i,e));s+=a?r.nodeValue.length:n.length}else if(t.dom==r)return Math.min(e,r.nodeValue.length);return t.localPosFromDOM(i,e)}var Hr=class extends Ke{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Hr&&e.side==this.side}split(){return new Hr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return gt.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),r=Wm(this,this.side>0?-1:1);return r&&r.top<t.bottom&&r.bottom>t.top?{left:t.left,right:t.right,top:r.top,bottom:r.bottom}:t}get overrideDOMText(){return Te.empty}};xr.prototype.children=kr.prototype.children=Hr.prototype.children=_l;function Wm(i,e){let t=i.parent,r=t?t.children.indexOf(i):-1;for(;t&&r>=0;)if(e<0?r>0:r<t.children.length){let n=t.children[r+e];if(n instanceof xr){let s=n.coordsAt(e<0?n.length:0,e);if(s)return s}r+=e}else if(t instanceof nr&&t.parent)r=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let n=t.dom.lastChild;if(n&&n.nodeName=="BR")return n.getClientRects()[0];break}}function oh(i,e){let t=i.dom,{children:r}=i,n=0;for(let s=0;n<r.length;n++){let a=r[n],l=s+a.length;if(!(l==s&&a.getSide()<=0)){if(e>s&&e<l&&a.dom.parentNode==t)return a.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=n;s>0;s--){let a=r[s-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let s=n;s<r.length;s++){let a=r[s];if(a.dom.parentNode==t)return a.domAtPos(0)}return new gt(t,0)}function uh(i,e,t){let r,{children:n}=i;t>0&&e instanceof nr&&n.length&&(r=n[n.length-1])instanceof nr&&r.mark.eq(e.mark)?uh(r,e.children[0],t-1):(n.push(e),e.setParent(i)),i.length+=e.length}function hh(i,e,t){return i.children.length?(t<=0?ch:fh)(i,e):Em(i)}function ch(i,e){let t=null,r=-1;function n(s,a){for(let l=0,o=0;l<s.children.length&&o<=a;l++){let u=s.children[l],h=o+u.length;if(h>=a){if(u.children.length){if(n(u,a-o))return!0}else if(h>=a){if(h==a&&u.getSide()>0)return!0;t=u,r=a-o}}o=h}}return n(i,e),t?t.coordsAt(Math.max(0,r),-1):fh(i,e)}function fh(i,e){let t=null,r=-1;function n(s,a){for(let l=s.children.length-1,o=s.length;l>=0&&o>=a;l--){let u=s.children[l];if(o-=u.length,o<=a){if(u.children.length){if(n(u,a-o))return!0}else if(o<=a){if(o==a&&u.getSide()<0)return!0;t=u,r=a-o}}}}return n(i,e),t?t.coordsAt(Math.max(0,r),1):ch(i,e)}function Em(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let t=gn(e);return t[t.length-1]||null}function qa(i,e){for(let t in i)t=="class"&&e.class?e.class+=" "+i.class:t=="style"&&e.style?e.style+=";"+i.style:e[t]=i[t];return e}function Il(i,e){if(i==e)return!0;if(!i||!e)return!1;let t=Object.keys(i),r=Object.keys(e);if(t.length!=r.length)return!1;for(let n of t)if(r.indexOf(n)==-1||i[n]!==e[n])return!1;return!0}function Za(i,e,t){let r=null;if(e)for(let n in e)t&&n in t||i.removeAttribute(r=n);if(t)for(let n in t)e&&e[n]==t[n]||i.setAttribute(r=n,t[n]);return!!r}var Kt=class{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}},qe=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(qe||(qe={})),me=class extends dr{constructor(e,t,r,n){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Li(e)}static widget(e){let t=e.side||0,r=!!e.block;return t+=r?t>0?3e8:-4e8:t>0?1e8:-1e8,new Or(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,n;if(e.isBlockGap)r=-5e8,n=4e8;else{let{start:s,end:a}=dh(e,t);r=(s?t?-3e8:-1:5e8)-1,n=(a?t?2e8:1:-6e8)+1}return new Or(e,r,n,t,e.widget||null,!0)}static line(e){return new ci(e)}static set(e,t=!1){return Ie.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};me.none=Ie.empty;var Li=class extends me{constructor(e){let{start:t,end:r}=dh(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Li&&this.tagName==e.tagName&&this.class==e.class&&Il(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}};Li.prototype.point=!1;var ci=class extends me{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ci&&Il(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}};ci.prototype.mapMode=wt.TrackBefore;ci.prototype.point=!0;var Or=class extends me{constructor(e,t,r,n,s,a){super(t,r,s,e),this.block=n,this.isReplace=a,this.mapMode=n?t<=0?wt.TrackBefore:wt.TrackAfter:wt.TrackDel}get type(){return this.startSide<this.endSide?qe.WidgetRange:this.startSide<=0?qe.WidgetBefore:qe.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Or&&Lm(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}};Or.prototype.point=!0;function dh(i,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=i;return t==null&&(t=i.inclusive),r==null&&(r=i.inclusive),{start:t??e,end:r??e}}function Lm(i,e){return i==e||!!(i&&e&&i.compare(e))}function Xa(i,e,t,r=0){let n=t.length-1;n>=0&&t[n]+r>=i?t[n]=Math.max(t[n],e):t.push(i,e)}var xt=class extends Ke{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,n,s,a){if(r){if(!(r instanceof xt))return!1;this.dom||r.transferDOM(this)}return n&&this.setDeco(r?r.attrs:null),nh(this,e,t,r?r.children:[],s,a),!0}split(e){let t=new xt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:n}=this.childPos(e);n&&(t.append(this.children[r].split(n),0),this.children[r].merge(n,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Il(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){uh(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=qa(t,this.attrs||{})),r&&(this.attrs=qa({class:r},this.attrs||{}))}domAtPos(e){return oh(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(rh(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Za(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let r=this.dom.lastChild;for(;r&&Ke.get(r)instanceof nr;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((t=Ke.get(r))===null||t===void 0?void 0:t.isEditable)==!1&&(!ce.ios||!this.children.some(n=>n instanceof xr))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof xr)||/[^ -~]/.test(t.text))return null;let r=gn(t.dom);if(r.length!=1)return null;e+=r[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return hh(this,e,t)}become(e){return!1}get type(){return qe.Text}static find(e,t){for(let r=0,n=0;r<e.children.length;r++){let s=e.children[r],a=n+s.length;if(a>=t){if(s instanceof xt)return s;if(a>t)break}n=a+s.breakAfter}return null}},Br=class extends Ke{constructor(e,t,r){super(),this.widget=e,this.length=t,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,n,s,a){return r&&(!(r instanceof Br)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?gt.before(this.dom):gt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Br(this.widget,t,this.type);return r.breakAfter=this.breakAfter,r}get children(){return _l}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Te.empty}domBoundsAround(){return null}become(e){return e instanceof Br&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},$n=class{constructor(e,t,r,n){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Br&&e.type==qe.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new xt),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(Zn(new Hr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,r)),this.getLine().append(Zn(new xr(this.text.slice(this.textOff,this.textOff+n)),t),r),this.atCursorPos=!0,this.textOff+=n,e-=n,r=0}}span(e,t,r,n){this.buildText(t-e,r,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,r,n,s,a){if(this.disallowBlockEffectsFor[a]&&r instanceof Or){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(r instanceof Or)if(r.block){let{type:o}=r;o==qe.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Br(r.widget||new hs("div"),l,o))}else{let o=kr.create(r.widget||new hs("span"),l,l?0:r.startSide),u=this.atCursorPos&&!o.isEditable&&s<=n.length&&(e<t||r.startSide>0),h=!o.isEditable&&(e<t||r.startSide<=0),c=this.getLine();this.pendingBuffer==2&&!u&&(this.pendingBuffer=0),this.flushBuffer(n),u&&(c.append(Zn(new Hr(1),n),s),s=n.length+Math.max(0,s-n.length)),c.append(Zn(o,n),s),this.atCursorPos=h,this.pendingBuffer=h?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,n,s){let a=new $n(e,t,r,s);return a.openEnd=Ie.spans(n,t,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}};function Zn(i,e){for(let t of e)i=new nr(t,[i],i.length);return i}var hs=class extends Kt{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}},mh=le.define(),ph=le.define(),vh=le.define(),gh=le.define(),Ua=le.define(),bh=le.define(),$h=le.define({combine:i=>i.some(e=>e)}),Fi=class{constructor(e,t="nearest",r="nearest",n=5,s=5){this.range=e,this.y=t,this.x=r,this.yMargin=n,this.xMargin=s}map(e){return e.empty?this:new Fi(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}},Su=we.define({map:(i,e)=>i.map(e)});function _t(i,e,t){let r=i.facet(gh);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}var Ss=le.define({combine:i=>i.length?i[0]:!0}),Fm=0,on=le.define(),Ze=class{constructor(e,t,r,n){this.id=e,this.create=t,this.domEventHandlers=r,this.extension=n(this)}static define(e,t){let{eventHandlers:r,provide:n,decorations:s}=t||{};return new Ze(Fm++,e,r,a=>{let l=[on.of(a)];return s&&l.push(kn.of(o=>{let u=o.plugin(a);return u?s(u):me.none})),n&&l.push(n(a)),l})}static fromClass(e,t){return Ze.define(r=>new e(r),t)}},dn=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(_t(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){_t(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){_t(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},kh=le.define(),wh=le.define(),kn=le.define(),xh=le.define(),Sh=le.define(),un=le.define(),mr=class{constructor(e,t,r,n){this.fromA=e,this.toA=t,this.fromB=r,this.toB=n}join(e){return new mr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>r.toA)){if(n.toA<r.fromA)break;r=r.join(n),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let n=0,s=0,a=0,l=0;;n++){let o=n==e.length?null:e[n],u=a-l,h=o?o.fromB:1e9;for(;s<t.length&&t[s]<h;){let c=t[s],f=t[s+1],d=Math.max(l,c),m=Math.min(h,f);if(d<=m&&new mr(d+u,m+u,d,m).addToSet(r),f>h)break;s+=2}if(!o)return r;new mr(o.fromA,o.toA,o.fromB,o.toB).addToSet(r),a=o.toA,l=o.toB}}},Ji=class{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=it.empty(this.startState.doc.length);for(let a of r)this.changes=this.changes.compose(a.changes);let n=[];this.changes.iterChangedRanges((a,l,o,u)=>n.push(new mr(a,l,o,u))),this.changedRanges=n;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,r){return new Ji(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},et=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(et||(et={})),Ya=et.LTR,Jm=et.RTL;function yh(i){let e=[];for(let t=0;t<i.length;t++)e.push(1<<+i[t]);return e}var Rm=yh("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Nm=yh("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),el=Object.create(null),$r=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),t=i.charCodeAt(1);el[e]=t,el[t]=-e}function Hm(i){return i<=247?Rm[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?Nm[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8203?256:64336<=i&&i<=65023?4:i==8204?256:1}var jm=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,Nr=class{constructor(e,t,r){this.from=e,this.to=t,this.level=r}get dir(){return this.level%2?Jm:Ya}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,r,n){let s=-1;for(let a=0;a<e.length;a++){let l=e[a];if(l.from<=t&&l.to>=t){if(l.level==r)return a;(s<0||(n!=0?n<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=a)}}if(s<0)throw new RangeError("Index out of range");return s}},st=[];function Vm(i,e){let t=i.length,r=e==Ya?1:2,n=e==Ya?2:1;if(!i||r==1&&!jm.test(i))return Ph(t);for(let a=0,l=r,o=r;a<t;a++){let u=Hm(i.charCodeAt(a));u==512?u=l:u==8&&o==4&&(u=16),st[a]=u==4?2:u,u&7&&(o=u),l=u}for(let a=0,l=r,o=r;a<t;a++){let u=st[a];if(u==128)a<t-1&&l==st[a+1]&&l&24?u=st[a]=l:st[a]=256;else if(u==64){let h=a+1;for(;h<t&&st[h]==64;)h++;let c=a&&l==8||h<t&&st[h]==8?o==1?1:8:256;for(let f=a;f<h;f++)st[f]=c;a=h-1}else u==8&&o==1&&(st[a]=1);l=u,u&7&&(o=u)}for(let a=0,l=0,o=0,u,h,c;a<t;a++)if(h=el[u=i.charCodeAt(a)])if(h<0){for(let f=l-3;f>=0;f-=3)if($r[f+1]==-h){let d=$r[f+2],m=d&2?r:d&4?d&1?n:r:0;m&&(st[a]=st[$r[f]]=m),l=f;break}}else{if($r.length==189)break;$r[l++]=a,$r[l++]=u,$r[l++]=o}else if((c=st[a])==2||c==1){let f=c==r;o=f?0:1;for(let d=l-3;d>=0;d-=3){let m=$r[d+2];if(m&2)break;if(f)$r[d+2]|=2;else{if(m&4)break;$r[d+2]|=4}}}for(let a=0;a<t;a++)if(st[a]==256){let l=a+1;for(;l<t&&st[l]==256;)l++;let o=(a?st[a-1]:r)==1,u=(l<t?st[l]:r)==1,h=o==u?o?1:2:r;for(let c=a;c<l;c++)st[c]=h;a=l-1}let s=[];if(r==1)for(let a=0;a<t;){let l=a,o=st[a++]!=1;for(;a<t&&o==(st[a]!=1);)a++;if(o)for(let u=a;u>l;){let h=u,c=st[--u]!=2;for(;u>l&&c==(st[u-1]!=2);)u--;s.push(new Nr(u,h,c?2:1))}else s.push(new Nr(l,a,0))}else for(let a=0;a<t;){let l=a,o=st[a++]==2;for(;a<t&&o==(st[a]==2);)a++;s.push(new Nr(l,a,o?1:2))}return s}function Ph(i){return[new Nr(0,i,0)]}var Ch="";function zm(i,e,t,r,n){var s;let a=r.head-i.from,l=-1;if(a==0){if(!n||!i.length)return null;e[0].level!=t&&(a=e[0].side(!1,t),l=0)}else if(a==i.length){if(n)return null;let f=e[e.length-1];f.level!=t&&(a=f.side(!0,t),l=e.length-1)}l<0&&(l=Nr.find(e,a,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc));let o=e[l];a==o.side(n,t)&&(o=e[l+=n?1:-1],a=o.side(!n,t));let u=n==(o.dir==t),h=vt(i.text,a,u);if(Ch=i.text.slice(Math.min(a,h),Math.max(a,h)),h!=o.side(n,t))return j.cursor(h+i.from,u?-1:1,o.level);let c=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return!c&&o.level!=t?j.cursor(n?i.to:i.from,n?-1:1,t):c&&c.level<o.level?j.cursor(c.side(!n,t)+i.from,n?1:-1,c.level):j.cursor(h+i.from,n?-1:1,o.level)}var Rr="\uFFFF",cs=class{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ae.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Rr}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let n=e;;){this.findPointBefore(r,n),this.readNode(n);let s=n.nextSibling;if(s==t)break;let a=Ke.get(n),l=Ke.get(s);(a&&l?a.breakAfter:(a?a.breakAfter:yu(n))||yu(s)&&(n.nodeName!="BR"||n.cmIgnore))&&this.lineBreak(),n=s}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,a=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(l=n.exec(t))&&(s=l.index,a=l[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),a>1)for(let o of this.points)o.node==e&&o.pos>this.text.length&&(o.pos-=a-1);r=s+a}}readNode(e){if(e.cmIgnore)return;let t=Ke.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let n=r.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}};function yu(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}var fs=class{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}},ds=class extends Ke{constructor(e){super(),this.view=e,this.compositionDeco=me.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new xt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new mr(0,0,0,e.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:a,toA:l})=>l<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=me.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=Km(this.view,e.changes)),(ce.ie||ce.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,n=this.updateDeco(),s=qm(r,n,e.changes);return t=mr.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=ce.chrome||ce.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Br&&s.widget instanceof ms&&n.push(s.dom);r.updateGaps(n)}updateChildren(e,t){let r=this.childCursor(t);for(let n=e.length-1;;n--){let s=n>=0?e[n]:null;if(!s)break;let{fromA:a,toA:l,fromB:o,toB:u}=s,{content:h,breakAtStart:c,openStart:f,openEnd:d}=$n.build(this.view.state.doc,o,u,this.decorations,this.dynamicDecorationMap),{i:m,off:v}=r.findPos(l,1),{i:p,off:g}=r.findPos(a,-1);ih(this,p,g,m,v,h,c,f,d)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection()))return;let r=this.forceSelection;this.forceSelection=!1;let n=this.view.state.selection.main,s=this.domAtPos(n.anchor),a=n.empty?s:this.domAtPos(n.head);if(ce.gecko&&n.empty&&Gm(s)){let o=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(o,s.node.childNodes[s.offset]||null)),s=a=new gt(o,0),r=!0}let l=this.view.observer.selectionRange;(r||!l.focusNode||!as(s.node,s.offset,l.anchorNode,l.anchorOffset)||!as(a.node,a.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{ce.android&&ce.chrome&&this.dom.contains(l.focusNode)&&Zm(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let o=ss(this.view.root);if(o)if(n.empty){if(ce.gecko){let u=Qm(s.node,s.offset);if(u&&u!=3){let h=_h(s.node,s.offset,u==1?1:-1);h&&(s=new gt(h,u==1?0:h.nodeValue.length))}}o.collapse(s.node,s.offset),n.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=n.bidiLevel)}else if(o.extend){o.collapse(s.node,s.offset);try{o.extend(a.node,a.offset)}catch{}}else{let u=document.createRange();n.anchor>n.head&&([s,a]=[a,s]),u.setEnd(a.node,a.offset),u.setStart(s.node,s.offset),o.removeAllRanges(),o.addRange(u)}}),this.view.observer.setSelectionRange(s,a)),this.impreciseAnchor=s.precise?null:new gt(l.anchorNode,l.anchorOffset),this.impreciseHead=a.precise?null:new gt(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=ss(this.view.root);if(!t||!e.empty||!e.assoc||!t.modify)return;let r=xt.find(this,e.head);if(!r)return;let n=r.posAtStart;if(e.head==n||e.head==n+r.length)return;let s=this.coordsAt(e.head,-1),a=this.coordsAt(e.head,1);if(!s||!a||s.bottom>a.top)return;let l=this.domAtPos(e.head+e.assoc);t.collapse(l.node,l.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||ts(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let r=Ke.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(r<n.length||n instanceof xt)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){for(let r=this.length,n=this.children.length-1;;n--){let s=this.children[n],a=r-s.breakAfter-s.length;if(e>a||e==a&&s.type!=qe.WidgetBefore&&s.type!=qe.WidgetAfter&&(!n||t==2||this.children[n-1].breakAfter||this.children[n-1].type==qe.WidgetBefore&&t>-2))return s.coordsAt(e-a,t);r=a}}measureVisibleLineHeights(e){let t=[],{from:r,to:n}=e,s=this.view.contentDOM.clientWidth,a=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,o=this.view.textDirection==et.LTR;for(let u=0,h=0;h<this.children.length;h++){let c=this.children[h],f=u+c.length;if(f>n)break;if(u>=r){let d=c.dom.getBoundingClientRect();if(t.push(d.height),a){let m=c.dom.lastChild,v=m?gn(m):[];if(v.length){let p=v[v.length-1],g=o?p.right-d.left:d.right-p.left;g>l&&(l=g,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?et.RTL:et.LTR}measureTextSize(){for(let n of this.children)if(n instanceof xt){let s=n.measureTextSize();if(s)return s}let e=document.createElement("div"),t,r;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=gn(e.firstChild)[0];t=e.getBoundingClientRect().height,r=n?n.width/27:7,e.remove()}),{lineHeight:t,charWidth:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new os(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,n=0;;n++){let s=n==t.viewports.length?null:t.viewports[n],a=s?s.from-1:this.length;if(a>r){let l=t.lineBlockAt(a).bottom-t.lineBlockAt(r).top;e.push(me.replace({widget:new ms(l),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!s)break;r=s.to+1}return me.set(e)}updateDeco(){let e=this.view.state.facet(kn).map((t,r)=>(this.dynamicDecorationMap[r]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!r)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,n.left),top:Math.min(r.top,n.top),right:Math.max(r.right,n.right),bottom:Math.max(r.bottom,n.bottom)});let s=0,a=0,l=0,o=0;for(let h of this.view.state.facet(Sh).map(c=>c(this.view)))if(h){let{left:c,right:f,top:d,bottom:m}=h;c!=null&&(s=Math.max(s,c)),f!=null&&(a=Math.max(a,f)),d!=null&&(l=Math.max(l,d)),m!=null&&(o=Math.max(o,m))}let u={left:r.left-s,top:r.top-l,right:r.right+a,bottom:r.bottom+o};Mm(this.view.scrollDOM,u,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==et.LTR)}};function Gm(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}var ms=class extends Kt{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}};function Ah(i){let e=i.observer.selectionRange,t=e.focusNode&&_h(e.focusNode,e.focusOffset,0);if(!t)return null;let r=i.docView.nearest(t);if(!r)return null;if(r instanceof xt){let n=t;for(;n.parentNode!=r.dom;)n=n.parentNode;let s=n.previousSibling;for(;s&&!Ke.get(s);)s=s.previousSibling;let a=s?Ke.get(s).posAtEnd:r.posAtStart;return{from:a,to:a,node:n,text:t}}else{for(;;){let{parent:s}=r;if(!s)return null;if(s instanceof xt)break;r=s}let n=r.posAtStart;return{from:n,to:n+r.length,node:r.dom,text:t}}}function Km(i,e){let t=Ah(i);if(!t)return me.none;let{from:r,to:n,node:s,text:a}=t,l=e.mapPos(r,1),o=Math.max(l,e.mapPos(n,-1)),{state:u}=i,h=s.nodeType==3?s.nodeValue:new cs([],u).readRange(s.firstChild,null).text;if(o-l<h.length)if(u.doc.sliceString(l,Math.min(u.doc.length,l+h.length),Rr)==h)o=l+h.length;else if(u.doc.sliceString(Math.max(0,o-h.length),o,Rr)==h)l=o-h.length;else return me.none;else if(u.doc.sliceString(l,o,Rr)!=h)return me.none;let c=Ke.get(s);return c instanceof us?c=c.widget.topView:c&&(c.parent=null),me.set(me.replace({widget:new tl(s,a,c),inclusive:!0}).range(l,o))}var tl=class extends Kt{constructor(e,t,r){super(),this.top=e,this.text=t,this.topView=r}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return us}};function _h(i,e,t){for(;;){if(i.nodeType==3)return i;if(i.nodeType==1&&e>0&&t<=0)i=i.childNodes[e-1],e=bn(i);else if(i.nodeType==1&&e<i.childNodes.length&&t>=0)i=i.childNodes[e],e=0;else return null}}function Qm(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}var rl=class{constructor(){this.changes=[]}compareRange(e,t){Xa(e,t,this.changes)}comparePoint(e,t){Xa(e,t,this.changes)}};function qm(i,e,t){let r=new rl;return Ie.compare(i,e,t,r),r.changes}function Zm(i,e){for(let t=i;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Xm(i,e,t=1){let r=i.charCategorizer(e),n=i.doc.lineAt(e),s=e-n.from;if(n.length==0)return j.cursor(e);s==0?t=1:s==n.length&&(t=-1);let a=s,l=s;t<0?a=vt(n.text,s,!1):l=vt(n.text,s);let o=r(n.text.slice(a,l));for(;a>0;){let u=vt(n.text,a,!1);if(r(n.text.slice(u,a))!=o)break;a=u}for(;l<n.length;){let u=vt(n.text,l);if(r(n.text.slice(l,u))!=o)break;l=u}return j.range(a+n.from,l+n.from)}function Um(i,e){return e.left>i?e.left-i:Math.max(0,i-e.right)}function Ym(i,e){return e.top>i?e.top-i:Math.max(0,i-e.bottom)}function Ea(i,e){return i.top<e.bottom-1&&i.bottom>e.top+1}function Pu(i,e){return e<i.top?{top:e,left:i.left,right:i.right,bottom:i.bottom}:i}function Cu(i,e){return e>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:e}:i}function il(i,e,t){let r,n,s,a,l=!1,o,u,h,c;for(let m=i.firstChild;m;m=m.nextSibling){let v=gn(m);for(let p=0;p<v.length;p++){let g=v[p];n&&Ea(n,g)&&(g=Pu(Cu(g,n.bottom),n.top));let k=Um(e,g),S=Ym(t,g);if(k==0&&S==0)return m.nodeType==3?Au(m,e,t):il(m,e,t);(!r||a>S||a==S&&s>k)&&(r=m,n=g,s=k,a=S,l=!k||(k>0?p<v.length-1:p>0)),k==0?t>g.bottom&&(!h||h.bottom<g.bottom)?(o=m,h=g):t<g.top&&(!c||c.top>g.top)&&(u=m,c=g):h&&Ea(h,g)?h=Cu(h,g.bottom):c&&Ea(c,g)&&(c=Pu(c,g.top))}}if(h&&h.bottom>=t?(r=o,n=h):c&&c.top<=t&&(r=u,n=c),!r)return{node:i,offset:0};let f=Math.max(n.left,Math.min(n.right,e));if(r.nodeType==3)return Au(r,f,t);if(l&&r.contentEditable!="false")return il(r,f,t);let d=Array.prototype.indexOf.call(i.childNodes,r)+(e>=(n.left+n.right)/2?1:0);return{node:i,offset:d}}function Au(i,e,t){let r=i.nodeValue.length,n=-1,s=1e9,a=0;for(let l=0;l<r;l++){let o=Ei(i,l,l+1).getClientRects();for(let u=0;u<o.length;u++){let h=o[u];if(h.top==h.bottom)continue;a||(a=e-h.left);let c=(h.top>t?h.top-t:t-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&c<s){let f=e>=(h.left+h.right)/2,d=f;if((ce.chrome||ce.gecko)&&Ei(i,l).getBoundingClientRect().left==h.right&&(d=!f),c<=0)return{node:i,offset:l+(d?1:0)};n=l+(d?1:0),s=c}}}return{node:i,offset:n>-1?n:a>0?i.nodeValue.length:0}}function Ih(i,{x:e,y:t},r,n=-1){var s;let a=i.contentDOM.getBoundingClientRect(),l=a.top+i.viewState.paddingTop,o,{docHeight:u}=i.viewState,h=t-l;if(h<0)return 0;if(h>u)return i.state.doc.length;for(let g=i.defaultLineHeight/2,k=!1;o=i.elementAtHeight(h),o.type!=qe.Text;)for(;h=n>0?o.bottom+g:o.top-g,!(h>=0&&h<=u);){if(k)return r?null:0;k=!0,n=-n}t=l+h;let c=o.from;if(c<i.viewport.from)return i.viewport.from==0?0:r?null:_u(i,a,o,e,t);if(c>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:r?null:_u(i,a,o,e,t);let f=i.dom.ownerDocument,d=i.root.elementFromPoint?i.root:f,m=d.elementFromPoint(e,t);m&&!i.contentDOM.contains(m)&&(m=null),m||(e=Math.max(a.left+1,Math.min(a.right-1,e)),m=d.elementFromPoint(e,t),m&&!i.contentDOM.contains(m)&&(m=null));let v,p=-1;if(m&&((s=i.docView.nearest(m))===null||s===void 0?void 0:s.isEditable)!=!1){if(f.caretPositionFromPoint){let g=f.caretPositionFromPoint(e,t);g&&({offsetNode:v,offset:p}=g)}else if(f.caretRangeFromPoint){let g=f.caretRangeFromPoint(e,t);g&&({startContainer:v,startOffset:p}=g,(!i.contentDOM.contains(v)||ce.safari&&ep(v,p,e)||ce.chrome&&tp(v,p,e))&&(v=void 0))}}if(!v||!i.docView.dom.contains(v)){let g=xt.find(i.docView,c);if(!g)return h>o.top+o.height/2?o.to:o.from;({node:v,offset:p}=il(g.dom,e,t))}return i.docView.posFromDOM(v,p)}function _u(i,e,t,r,n){let s=Math.round((r-e.left)*i.defaultCharacterWidth);i.lineWrapping&&t.height>i.defaultLineHeight*1.5&&(s+=Math.floor((n-t.top)/i.defaultLineHeight)*i.viewState.heightOracle.lineLength);let a=i.state.sliceDoc(t.from,t.to);return t.from+Kn(a,s,i.state.tabSize)}function ep(i,e,t){let r;if(i.nodeType!=3||e!=(r=i.nodeValue.length))return!1;for(let n=i.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return Ei(i,r-1,r).getBoundingClientRect().left>t}function tp(i,e,t){if(e!=0)return!1;for(let n=i;;){let s=n.parentNode;if(!s||s.nodeType!=1||s.firstChild!=n)return!1;if(s.classList.contains("cm-line"))break;n=s}let r=i.nodeType==1?i.getBoundingClientRect():Ei(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function rp(i,e,t,r){let n=i.state.doc.lineAt(e.head),s=!r||!i.lineWrapping?null:i.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(s){let o=i.dom.getBoundingClientRect(),u=i.textDirectionAt(n.from),h=i.posAtCoords({x:t==(u==et.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(h!=null)return j.cursor(h,t?-1:1)}let a=xt.find(i.docView,e.head),l=a?t?a.posAtEnd:a.posAtStart:t?n.to:n.from;return j.cursor(l,t?-1:1)}function Iu(i,e,t,r){let n=i.state.doc.lineAt(e.head),s=i.bidiSpans(n),a=i.textDirectionAt(n.from);for(let l=e,o=null;;){let u=zm(n,s,a,l,t),h=Ch;if(!u){if(n.number==(t?i.state.doc.lines:1))return l;h=`
`,n=i.state.doc.line(n.number+(t?1:-1)),s=i.bidiSpans(n),u=j.cursor(t?n.from:n.to)}if(o){if(!o(h))return l}else{if(!r)return u;o=r(h)}l=u}}function ip(i,e,t){let r=i.state.charCategorizer(e),n=r(t);return s=>{let a=r(s);return n==Ve.Space&&(n=a),n==a}}function np(i,e,t,r){let n=e.head,s=t?1:-1;if(n==(t?i.state.doc.length:0))return j.cursor(n,e.assoc);let a=e.goalColumn,l,o=i.contentDOM.getBoundingClientRect(),u=i.coordsAtPos(n),h=i.documentTop;if(u)a==null&&(a=u.left-o.left),l=s<0?u.top:u.bottom;else{let d=i.viewState.lineBlockAt(n);a==null&&(a=Math.min(o.right-o.left,i.defaultCharacterWidth*(n-d.from))),l=(s<0?d.top:d.bottom)+h}let c=o.left+a,f=r??i.defaultLineHeight>>1;for(let d=0;;d+=10){let m=l+(f+d)*s,v=Ih(i,{x:c,y:m},!1,s);if(m<o.top||m>o.bottom||(s<0?v<n:v>n))return j.cursor(v,e.assoc,void 0,a)}}function La(i,e,t){let r=i.state.facet(xh).map(n=>n(i));for(;;){let n=!1;for(let s of r)s.between(t.from-1,t.from+1,(a,l,o)=>{t.from>a&&t.from<l&&(t=e.head>t.from?j.cursor(a,1):j.cursor(l,-1),n=!0)});if(!n)return t}}var nl=class{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let t in bt){let r=bt[t];e.contentDOM.addEventListener(t,n=>{!Du(e,n)||this.ignoreDuringComposition(n)||t=="keydown"&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():r(e,n))},al[t]),this.registeredEvents.push(t)}ce.chrome&&ce.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,ce.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var r;let n;this.customHandlers=[];for(let s of t)if(n=(r=s.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:n});for(let a in n)this.registeredEvents.indexOf(a)<0&&a!="scroll"&&(this.registeredEvents.push(a),e.contentDOM.addEventListener(a,l=>{!Du(e,l)||this.runCustomHandlers(a,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,t,r){for(let n of this.customHandlers){let s=n.handlers[e];if(s)try{if(s.call(n.plugin,r,t)||r.defaultPrevented)return!0}catch(a){_t(t.state,a)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let n=r.handlers.scroll;if(n)try{n.call(r.plugin,t,e)}catch(s){_t(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(ce.android&&ce.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let r;return ce.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((r=Dh.find(n=>n.keyCode==t.keyCode))&&!t.ctrlKey||sp.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=r||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Oi(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ce.safari&&!ce.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}},Dh=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],sp="dthko",Mh=[16,17,18,20,91,92,224,225],sl=class{constructor(e,t,r,n){this.view=e,this.style=r,this.mustSelect=n,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ae.allowMultipleSelections)&&ap(e,t),this.dragMove=lp(e,t),this.dragging=op(e,t)&&Wh(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};function ap(i,e){let t=i.state.facet(mh);return t.length?t[0](e):ce.mac?e.metaKey:e.ctrlKey}function lp(i,e){let t=i.state.facet(ph);return t.length?t[0](e):ce.mac?!e.altKey:!e.ctrlKey}function op(i,e){let{main:t}=i.state.selection;if(t.empty)return!1;let r=ss(i.root);if(!r||r.rangeCount==0)return!0;let n=r.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let a=n[s];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function Du(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=i.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Ke.get(t))&&r.ignoreEvent(e))return!1;return!0}var bt=Object.create(null),al=Object.create(null),Th=ce.ie&&ce.ie_version<15||ce.ios&&ce.webkit_version<604;function up(i){let e=i.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{i.focus(),t.remove(),Bh(i,t.value)},50)}function Bh(i,e){let{state:t}=i,r,n=1,s=t.toText(e),a=s.lines==t.selection.ranges.length;if(ll!=null&&t.selection.ranges.every(o=>o.empty)&&ll==s.toString()){let o=-1;r=t.changeByRange(u=>{let h=t.doc.lineAt(u.from);if(h.from==o)return{range:u};o=h.from;let c=t.toText((a?s.line(n++).text:e)+t.lineBreak);return{changes:{from:h.from,insert:c},range:j.cursor(u.from+c.length)}})}else a?r=t.changeByRange(o=>{let u=s.line(n++);return{changes:{from:o.from,to:o.to,insert:u.text},range:j.cursor(o.from+u.length)}}):r=t.replaceSelection(s);i.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}bt.keydown=(i,e)=>{i.inputState.setSelectionOrigin("select"),e.keyCode==27?i.inputState.lastEscPress=Date.now():Mh.indexOf(e.keyCode)<0&&(i.inputState.lastEscPress=0)};bt.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};bt.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};al.touchstart=al.touchmove={passive:!0};bt.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let r of i.state.facet(vh))if(t=r(i,e),t)break;if(!t&&e.button==0&&(t=fp(i,e)),t){let r=i.root.activeElement!=i.contentDOM;r&&i.observer.ignore(()=>th(i.contentDOM)),i.inputState.startMouseSelection(new sl(i,e,t,r))}};function Mu(i,e,t,r){if(r==1)return j.cursor(e,t);if(r==2)return Xm(i.state,e,t);{let n=xt.find(i.docView,e),s=i.state.doc.lineAt(n?n.posAtEnd:e),a=n?n.posAtStart:s.from,l=n?n.posAtEnd:s.to;return l<i.state.doc.length&&l==s.to&&l++,j.range(a,l)}}var Oh=(i,e)=>i>=e.top&&i<=e.bottom,Tu=(i,e,t)=>Oh(e,t)&&i>=t.left&&i<=t.right;function hp(i,e,t,r){let n=xt.find(i.docView,e);if(!n)return 1;let s=e-n.posAtStart;if(s==0)return 1;if(s==n.length)return-1;let a=n.coordsAt(s,-1);if(a&&Tu(t,r,a))return-1;let l=n.coordsAt(s,1);return l&&Tu(t,r,l)?1:a&&Oh(r,a)?-1:1}function Bu(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:hp(i,t,e.clientX,e.clientY)}}var cp=ce.ie&&ce.ie_version<=11,Ou=null,Wu=0,Eu=0;function Wh(i){if(!cp)return i.detail;let e=Ou,t=Eu;return Ou=i,Eu=Date.now(),Wu=!e||t>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(Wu+1)%3:1}function fp(i,e){let t=Bu(i,e),r=Wh(e),n=i.state.selection,s=t,a=e;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),n=n.map(l.changes),a=null)},get(l,o,u){let h;a&&l.clientX==a.clientX&&l.clientY==a.clientY?h=s:(h=s=Bu(i,l),a=l);let c=Mu(i,h.pos,h.bias,r);if(t.pos!=h.pos&&!o){let f=Mu(i,t.pos,t.bias,r),d=Math.min(f.from,c.from),m=Math.max(f.to,c.to);c=d<c.from?j.range(d,m):j.range(m,d)}return o?n.replaceRange(n.main.extend(c.from,c.to)):u&&n.ranges.length>1&&n.ranges.some(f=>f.eq(c))?dp(n,c):u?n.addRange(c):j.create([c])}}}function dp(i,e){for(let t=0;;t++)if(i.ranges[t].eq(e))return j.create(i.ranges.slice(0,t).concat(i.ranges.slice(t+1)),i.mainIndex==t?0:i.mainIndex-(i.mainIndex>t?1:0))}bt.dragstart=(i,e)=>{let{selection:{main:t}}=i.state,{mouseSelection:r}=i.inputState;r&&(r.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",i.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function Lu(i,e,t,r){if(!t)return;let n=i.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=i.inputState,a=r&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,l={from:n,insert:t},o=i.state.changes(a?[a,l]:l);i.focus(),i.dispatch({changes:o,selection:{anchor:o.mapPos(n,-1),head:o.mapPos(n,1)},userEvent:a?"move.drop":"input.drop"})}bt.drop=(i,e)=>{if(!e.dataTransfer)return;if(i.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let r=Array(t.length),n=0,s=()=>{++n==t.length&&Lu(i,e,r.filter(a=>a!=null).join(i.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(r[a]=l.result),s()},l.readAsText(t[a])}}else Lu(i,e,e.dataTransfer.getData("Text"),!0)};bt.paste=(i,e)=>{if(i.state.readOnly)return e.preventDefault();i.observer.flush();let t=Th?null:e.clipboardData;t?(Bh(i,t.getData("text/plain")),e.preventDefault()):up(i)};function mp(i,e){let t=i.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),i.focus()},50)}function pp(i){let e=[],t=[],r=!1;for(let n of i.selection.ranges)n.empty||(e.push(i.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:s}of i.selection.ranges){let a=i.doc.lineAt(s);a.number>n&&(e.push(a.text),t.push({from:a.from,to:Math.min(i.doc.length,a.to+1)})),n=a.number}r=!0}return{text:e.join(i.lineBreak),ranges:t,linewise:r}}var ll=null;bt.copy=bt.cut=(i,e)=>{let{text:t,ranges:r,linewise:n}=pp(i.state);if(!t&&!n)return;ll=n?t:null;let s=Th?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):mp(i,t),e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};function Eh(i){setTimeout(()=>{i.hasFocus!=i.inputState.notifiedFocused&&i.update([])},10)}bt.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),Eh(i)};bt.blur=i=>{i.observer.clearSelectionRange(),Eh(i)};bt.compositionstart=bt.compositionupdate=i=>{i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0)};bt.compositionend=i=>{i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionFirstChange=null,ce.chrome&&ce.android&&i.observer.flushSoon(),setTimeout(()=>{i.inputState.composing<0&&i.docView.compositionDeco.size&&i.update([])},50)};bt.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};bt.beforeinput=(i,e)=>{var t;let r;if(ce.chrome&&ce.android&&(r=Dh.find(n=>n.inputType==e.inputType))&&(i.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let n=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>n+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}};var Fu=["pre-wrap","normal","pre-line","break-spaces"],ol=class{constructor(){this.doc=Te.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength)),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Fu.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let n=e[r];n<0?r++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,r,n,s){let a=Fu.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=r,this.lineLength=n,l){this.heightSamples={};for(let o=0;o<s.length;o++){let u=s[o];u<0?o++:this.heightSamples[Math.floor(u*10)]=!0}}return l}},ul=class{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}},wr=class{constructor(e,t,r,n,s){this.from=e,this.length=t,this.top=r,this.height=n,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new wr(this.from,this.length+e.length,this.top,this.height+e.height,t)}},Ye=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(Ye||(Ye={})),rs=.001,It=class{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>rs&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return It.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,n){let s=this;for(let a=n.length-1;a>=0;a--){let{fromA:l,toA:o,fromB:u,toB:h}=n[a],c=s.lineAt(l,Ye.ByPosNoHeight,t,0,0),f=c.to>=o?c:s.lineAt(o,Ye.ByPosNoHeight,t,0,0);for(h+=f.to-o,o=f.to;a>0&&c.from<=n[a-1].toA;)l=n[a-1].fromA,u=n[a-1].fromB,a--,l<c.from&&(c=s.lineAt(l,Ye.ByPosNoHeight,t,0,0));u+=c.from-l,l=c.from;let d=wn.build(r,e,u,h);s=s.replace(l,o,d)}return s.updateHeight(r,0)}static empty(){return new Ft(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,n=0,s=0;for(;;)if(t==r)if(n>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),r+=1+l.break,n-=l.size}else if(s>n*2){let l=e[r];l.break?e.splice(r,1,l.left,null,l.right):e.splice(r,1,l.left,l.right),r+=2+l.break,s-=l.size}else break;else if(n<s){let l=e[t++];l&&(n+=l.size)}else{let l=e[--r];l&&(s+=l.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,r++),new hl(It.of(e.slice(0,t)),a,It.of(e.slice(r)))}};It.prototype.size=1;var ps=class extends It{constructor(e,t,r){super(e,t),this.type=r}blockAt(e,t,r,n){return new wr(n,this.length,r,this.height,this.type)}lineAt(e,t,r,n,s){return this.blockAt(0,r,n,s)}forEachLine(e,t,r,n,s,a){e<=s+this.length&&t>=s&&a(this.blockAt(0,r,n,s))}updateHeight(e,t=0,r=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},Ft=class extends ps{constructor(e,t){super(e,t,qe.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,r){let n=r[0];return r.length==1&&(n instanceof Ft||n instanceof dt&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof dt?n=new Ft(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):It.of(r)}updateHeight(e,t=0,r=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},dt=class extends It{constructor(e){super(e,0)}lines(e,t){let r=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:r,lastLine:n,lineHeight:this.height/(n-r+1)}}blockAt(e,t,r,n){let{firstLine:s,lastLine:a,lineHeight:l}=this.lines(t,n),o=Math.max(0,Math.min(a-s,Math.floor((e-r)/l))),{from:u,length:h}=t.line(s+o);return new wr(u,h,r+l*o,l,qe.Text)}lineAt(e,t,r,n,s){if(t==Ye.ByHeight)return this.blockAt(e,r,n,s);if(t==Ye.ByPosNoHeight){let{from:c,to:f}=r.lineAt(e);return new wr(c,f-c,0,0,qe.Text)}let{firstLine:a,lineHeight:l}=this.lines(r,s),{from:o,length:u,number:h}=r.lineAt(e);return new wr(o,u,n+l*(h-a),l,qe.Text)}forEachLine(e,t,r,n,s,a){let{firstLine:l,lineHeight:o}=this.lines(r,s);for(let u=Math.max(e,s),h=Math.min(s+this.length,t);u<=h;){let c=r.lineAt(u);u==e&&(n+=o*(c.number-l)),a(new wr(c.from,c.length,n,o,qe.Text)),n+=o,u=c.to+1}}replace(e,t,r){let n=this.length-t;if(n>0){let s=r[r.length-1];s instanceof dt?r[r.length-1]=new dt(s.length+n):r.push(null,new dt(n-1))}if(e>0){let s=r[0];s instanceof dt?r[0]=new dt(e+s.length):r.unshift(new dt(e-1),null)}return It.of(r)}decomposeLeft(e,t){t.push(new dt(e-1),null)}decomposeRight(e,t){t.push(null,new dt(this.length-e-1))}updateHeight(e,t=0,r=!1,n){let s=t+this.length;if(n&&n.from<=t+this.length&&n.more){let a=[],l=Math.max(t,n.from),o=-1,u=e.heightChanged;for(n.from>t&&a.push(new dt(n.from-t-1).updateHeight(e,t));l<=s&&n.more;){let c=e.doc.lineAt(l).length;a.length&&a.push(null);let f=n.heights[n.index++];o==-1?o=f:Math.abs(f-o)>=rs&&(o=-2);let d=new Ft(c,f);d.outdated=!1,a.push(d),l+=c+1}l<=s&&a.push(null,new dt(s-l).updateHeight(e,l));let h=It.of(a);return e.heightChanged=u||o<0||Math.abs(h.height-this.height)>=rs||Math.abs(o-this.lines(e.doc,t).lineHeight)>=rs,h}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},hl=class extends It{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,n){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,n):this.right.blockAt(e,t,s,n+this.left.length+this.break)}lineAt(e,t,r,n,s){let a=n+this.left.height,l=s+this.left.length+this.break,o=t==Ye.ByHeight?e<a:e<l,u=o?this.left.lineAt(e,t,r,n,s):this.right.lineAt(e,t,r,a,l);if(this.break||(o?u.to<l:u.from>l))return u;let h=t==Ye.ByPosNoHeight?Ye.ByPosNoHeight:Ye.ByPos;return o?u.join(this.right.lineAt(l,h,r,a,l)):this.left.lineAt(l,h,r,n,s).join(u)}forEachLine(e,t,r,n,s,a){let l=n+this.left.height,o=s+this.left.length+this.break;if(this.break)e<o&&this.left.forEachLine(e,t,r,n,s,a),t>=o&&this.right.forEachLine(e,t,r,l,o,a);else{let u=this.lineAt(o,Ye.ByPos,r,n,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,n,s,a),u.to>=e&&u.from<=t&&a(u),t>u.to&&this.right.forEachLine(u.to+1,t,r,l,o,a)}}replace(e,t,r){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,r));let s=[];e>0&&this.decomposeLeft(e,s);let a=s.length;for(let l of r)s.push(l);if(e>0&&Ju(s,a-1),t<this.length){let l=s.length;this.decomposeRight(t,s),Ju(s,l)}return It.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,n=r+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?It.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,n){let{left:s,right:a}=this,l=t+s.length+this.break,o=null;return n&&n.from<=t+s.length&&n.more?o=s=s.updateHeight(e,t,r,n):s.updateHeight(e,t,r),n&&n.from<=l+a.length&&n.more?o=a=a.updateHeight(e,l,r,n):a.updateHeight(e,l,r),o?this.balanced(s,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function Ju(i,e){let t,r;i[e]==null&&(t=i[e-1])instanceof dt&&(r=i[e+1])instanceof dt&&i.splice(e-1,3,new dt(t.length+1+r.length))}var vp=5,wn=class{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Ft?n.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Ft(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let n=r.widget?r.widget.estimatedHeight:0;n<0&&(n=this.oracle.lineHeight);let s=t-e;r.block?this.addBlock(new ps(s,n,r.type)):(s||n>=vp)&&this.addLineDeco(n,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ft(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new dt(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ft)return e;let t=new Ft(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==qe.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=qe.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let r=this.ensureLine();r.length+=t,r.collapsed+=t,r.widgetHeight=Math.max(r.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Ft)&&!this.isCovered?this.nodes.push(new Ft(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let n of this.nodes)n instanceof Ft&&n.updateHeight(this.oracle,r),r+=n?n.length:1;return this.nodes}static build(e,t,r,n){let s=new wn(r,e);return Ie.spans(t,r,n,s,0),s.finish(r)}};function gp(i,e,t){let r=new cl;return Ie.compare(i,e,t,r,0),r.changes}var cl=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,n){(e<t||r&&r.heightRelevant||n&&n.heightRelevant)&&Xa(e,t,this.changes,5)}};function bp(i,e){let t=i.getBoundingClientRect(),r=i.ownerDocument,n=r.defaultView||window,s=Math.max(0,t.left),a=Math.min(n.innerWidth,t.right),l=Math.max(0,t.top),o=Math.min(n.innerHeight,t.bottom);for(let u=i.parentNode;u&&u!=r.body;)if(u.nodeType==1){let h=u,c=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&c.overflow!="visible"){let f=h.getBoundingClientRect();s=Math.max(s,f.left),a=Math.min(a,f.right),l=Math.max(l,f.top),o=u==i.parentNode?f.bottom:Math.min(o,f.bottom)}u=c.position=="absolute"||c.position=="fixed"?h.offsetParent:h.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-t.left,right:Math.max(s,a)-t.left,top:l-(t.top+e),bottom:Math.max(l,o)-(t.top+e)}}function $p(i,e){let t=i.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}var mn=class{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let n=e[r],s=t[r];if(n.from!=s.from||n.to!=s.to||n.size!=s.size)return!1}return!0}draw(e){return me.replace({widget:new fl(this.size,e)}).range(this.from,this.to)}},fl=class extends Kt{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},vs=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new ol,this.scaler=Ru,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=et.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(kn).filter(t=>typeof t!="function"),this.heightMap=It.empty().applyChanges(this.stateDeco,Te.empty,this.heightOracle.setDoc(e.doc),[new mr(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=me.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let n=r?t.head:t.anchor;if(!e.some(({from:s,to:a})=>n>=s&&n<=a)){let{from:s,to:a}=this.lineBlockAt(n);e.push(new Mi(s,a))}}this.viewports=e.sort((r,n)=>r.from-n.from),this.scaler=this.heightMap.height<=7e6?Ru:new dl(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:hn(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(kn).filter(u=>typeof u!="function");let n=e.changedRanges,s=mr.extendWithRanges(n,gp(r,this.stateDeco,e?e.changes:it.empty(this.state.doc.length))),a=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=a&&(e.flags|=2);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let o=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),o&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),n=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?et.RTL:et.LTR;let a=this.heightOracle.mustRefreshForWrapping(s),l=a||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let o=0,u=0,h=parseInt(r.paddingTop)||0,c=parseInt(r.paddingBottom)||0;(this.paddingTop!=h||this.paddingBottom!=c)&&(this.paddingTop=h,this.paddingBottom=c,o|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,o|=8);let f=(this.printing?$p:bp)(t,this.paddingTop),d=f.top-this.pixelViewport.top,m=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let p=t.clientWidth;if((this.contentDOMWidth!=p||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=p,this.editorHeight=e.scrollDOM.clientHeight,o|=8),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(k)&&(a=!0),a||n.lineWrapping&&Math.abs(p-this.contentDOMWidth)>n.charWidth){let{lineHeight:S,charWidth:w}=e.docView.measureTextSize();a=S>0&&n.refresh(s,S,w,p/w,k),a&&(e.docView.minWidth=0,o|=8)}d>0&&m>0?u=Math.max(d,m):d<0&&m<0&&(u=Math.min(d,m)),n.heightChanged=!1;for(let S of this.viewports){let w=S.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(S);this.heightMap=this.heightMap.updateHeight(n,0,a,new ul(S.from,w))}n.heightChanged&&(o|=2)}let g=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return g&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(o&2||g)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),o|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),o}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,s=this.state.doc,{visibleTop:a,visibleBottom:l}=this,o=new Mi(n.lineAt(a-r*1e3,Ye.ByHeight,s,0,0).from,n.lineAt(l+(1-r)*1e3,Ye.ByHeight,s,0,0).to);if(t){let{head:u}=t.range;if(u<o.from||u>o.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=n.lineAt(u,Ye.ByPos,s,0,0),f;t.y=="center"?f=(c.top+c.bottom)/2-h/2:t.y=="start"||t.y=="nearest"&&u<o.from?f=c.top:f=c.bottom-h,o=new Mi(n.lineAt(f-1e3/2,Ye.ByHeight,s,0,0).from,n.lineAt(f+h+1e3/2,Ye.ByHeight,s,0,0).to)}}return o}mapViewport(e,t){let r=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Mi(this.heightMap.lineAt(r,Ye.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,Ye.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,Ye.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,Ye.ByPos,this.state.doc,0,0),{visibleTop:a,visibleBottom:l}=this;return(e==0||n<=a-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(r,250)))&&n>a-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let n of e)t.touchesRange(n.from,n.to)||r.push(new mn(t.mapPos(n.from),t.mapPos(n.to),n.size));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,n=r?1e4:2e3,s=n>>1,a=n<<1;if(this.defaultTextDirection!=et.LTR&&!r)return[];let l=[],o=(u,h,c,f)=>{if(h-u<s)return;let d=this.state.selection.main,m=[d.from];d.empty||m.push(d.to);for(let p of m)if(p>u&&p<h){o(u,p-10,c,f),o(p+10,h,c,f);return}let v=wp(e,p=>p.from>=c.from&&p.to<=c.to&&Math.abs(p.from-u)<s&&Math.abs(p.to-h)<s&&!m.some(g=>p.from<g&&p.to>g));if(!v){if(h<c.to&&t&&r&&t.visibleRanges.some(p=>p.from<=h&&p.to>=h)){let p=t.moveToLineBoundary(j.cursor(h),!1,!0).head;p>u&&(h=p)}v=new mn(u,h,this.gapSize(c,u,h,f))}l.push(v)};for(let u of this.viewportLines){if(u.length<a)continue;let h=kp(u.from,u.to,this.stateDeco);if(h.total<a)continue;let c=this.scrollTarget?this.scrollTarget.range.head:null,f,d;if(r){let m=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,p;if(c!=null){let g=Un(h,c),k=((this.visibleBottom-this.visibleTop)/2+m)/u.height;v=g-k,p=g+k}else v=(this.visibleTop-u.top-m)/u.height,p=(this.visibleBottom-u.top+m)/u.height;f=Xn(h,v),d=Xn(h,p)}else{let m=h.total*this.heightOracle.charWidth,v=n*this.heightOracle.charWidth,p,g;if(c!=null){let k=Un(h,c),S=((this.pixelViewport.right-this.pixelViewport.left)/2+v)/m;p=k-S,g=k+S}else p=(this.pixelViewport.left-v)/m,g=(this.pixelViewport.right+v)/m;f=Xn(h,p),d=Xn(h,g)}f>u.from&&o(u.from,f,u,h),d<u.to&&o(d,u.to,u,h)}return l}gapSize(e,t,r,n){let s=Un(n,r)-Un(n,t);return this.heightOracle.lineWrapping?e.height*s:n.total*this.heightOracle.charWidth*s}updateLineGaps(e){mn.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=me.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Ie.spans(e,this.viewport.from,this.viewport.to,{span(n,s){t.push({from:n,to:s})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,s)=>n.from!=t[s].from||n.to!=t[s].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||hn(this.heightMap.lineAt(e,Ye.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return hn(this.heightMap.lineAt(this.scaler.fromDOM(e),Ye.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return hn(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},Mi=class{constructor(e,t){this.from=e,this.to=t}};function kp(i,e,t){let r=[],n=i,s=0;return Ie.spans(t,i,e,{span(){},point(a,l){a>n&&(r.push({from:n,to:a}),s+=a-n),n=l}},20),n<e&&(r.push({from:n,to:e}),s+=e-n),{total:s,ranges:r}}function Xn({total:i,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(i*t);for(let n=0;;n++){let{from:s,to:a}=e[n],l=a-s;if(r<=l)return s+r;r-=l}}function Un(i,e){let t=0;for(let{from:r,to:n}of i.ranges){if(e<=n){t+=e-r;break}t+=n-r}return t/i.total}function wp(i,e){for(let t of i)if(e(t))return t}var Ru={toDOM(i){return i},fromDOM(i){return i},scale:1},dl=class{constructor(e,t,r){let n=0,s=0,a=0;this.viewports=r.map(({from:l,to:o})=>{let u=t.lineAt(l,Ye.ByPos,e,0,0).top,h=t.lineAt(o,Ye.ByPos,e,0,0).bottom;return n+=h-u,{from:l,to:o,top:u,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=a+(l.top-s)*this.scale,a=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,r=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return n+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,n=s.domBottom}}fromDOM(e){for(let t=0,r=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-n)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,n=s.domBottom}}};function hn(i,e){if(e.scale==1)return i;let t=e.toDOM(i.top),r=e.toDOM(i.bottom);return new wr(i.from,i.length,t,r-t,Array.isArray(i.type)?i.type.map(n=>hn(n,e)):i.type)}var Yn=le.define({combine:i=>i.join(" ")}),ml=le.define({combine:i=>i.indexOf(!0)>-1}),pl=ir.newName(),Lh=ir.newName(),Fh=ir.newName(),Jh={"&light":"."+Lh,"&dark":"."+Fh};function vl(i,e,t){return new ir(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,n=>{if(n=="&")return i;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):i+" "+r}})}var xp=vl("."+pl,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Jh),gl=class{constructor(e,t,r,n){this.typeOver=n,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:a}=e.docView;if(t>-1&&!e.state.readOnly&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let l=s||a?[]:yp(e),o=new cs(l,e.state);o.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=o.text,this.newSel=Pp(l,this.bounds.from)}else{let l=e.observer.selectionRange,o=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!Wi(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=a&&a.node==l.anchorNode&&a.offset==l.anchorOffset||!Wi(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=j.single(u,o)}}};function Rh(i,e){let t,{newSel:r}=e,n=i.state.selection.main;if(e.bounds){let{from:s,to:a}=e.bounds,l=n.from,o=null;(i.inputState.lastKeyCode===8&&i.inputState.lastKeyTime>Date.now()-100||ce.android&&e.text.length<a-s)&&(l=n.to,o="end");let u=Sp(i.state.doc.sliceString(s,a,Rr),e.text,l-s,o);u&&(ce.chrome&&i.inputState.lastKeyCode==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Rr+Rr&&u.toB--,t={from:s+u.from,to:s+u.toA,insert:Te.of(e.text.slice(u.from,u.toB).split(Rr))})}else r&&(!i.hasFocus||!i.state.facet(Ss)||r.main.eq(n))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!n.empty&&r&&r.main.empty?t={from:n.from,to:n.to,insert:i.state.doc.slice(n.from,n.to)}:t&&t.from>=n.from&&t.to<=n.to&&(t.from!=n.from||t.to!=n.to)&&n.to-n.from-(t.to-t.from)<=4?t={from:n.from,to:n.to,insert:i.state.doc.slice(n.from,t.from).append(t.insert).append(i.state.doc.slice(t.to,n.to))}:(ce.mac||ce.android)&&t&&t.from==t.to&&t.from==n.head-1&&/^\. ?$/.test(t.insert.toString())&&(r&&t.insert.length==2&&(r=j.single(r.main.anchor-1,r.main.head-1)),t={from:n.from,to:n.to,insert:Te.of([" "])}),t){let s=i.state;if(ce.ios&&i.inputState.flushIOSKey(i)||ce.android&&(t.from==n.from&&t.to==n.to&&t.insert.length==1&&t.insert.lines==2&&Oi(i.contentDOM,"Enter",13)||t.from==n.from-1&&t.to==n.to&&t.insert.length==0&&Oi(i.contentDOM,"Backspace",8)||t.from==n.from&&t.to==n.to+1&&t.insert.length==0&&Oi(i.contentDOM,"Delete",46)))return!0;let a=t.insert.toString();if(i.state.facet(bh).some(u=>u(i,t.from,t.to,a)))return!0;i.inputState.composing>=0&&i.inputState.composing++;let l;if(t.from>=n.from&&t.to<=n.to&&t.to-t.from>=(n.to-n.from)/3&&(!r||r.main.empty&&r.main.from==t.from+t.insert.length)&&i.inputState.composing<0){let u=n.from<t.from?s.sliceDoc(n.from,t.from):"",h=n.to>t.to?s.sliceDoc(t.to,n.to):"";l=s.replaceSelection(i.state.toText(u+t.insert.sliceString(0,void 0,i.state.lineBreak)+h))}else{let u=s.changes(t),h=r&&!s.selection.main.eq(r.main)&&r.main.to<=u.newLength?r.main:void 0;if(s.selection.ranges.length>1&&i.inputState.composing>=0&&t.to<=n.to&&t.to>=n.to-10){let c=i.state.sliceDoc(t.from,t.to),f=Ah(i)||i.state.doc.lineAt(n.head),d=n.to-t.to,m=n.to-n.from;l=s.changeByRange(v=>{if(v.from==n.from&&v.to==n.to)return{changes:u,range:h||v.map(u)};let p=v.to-d,g=p-c.length;if(v.to-v.from!=m||i.state.sliceDoc(g,p)!=c||f&&v.to>=f.from&&v.from<=f.to)return{range:v};let k=s.changes({from:g,to:p,insert:t.insert}),S=v.to-n.to;return{changes:k,range:h?j.range(Math.max(0,h.anchor+S),Math.max(0,h.head+S)):v.map(k)}})}else l={changes:u,selection:h&&s.selection.replaceRange(h)}}let o="input.type";return i.composing&&(o+=".compose",i.inputState.compositionFirstChange&&(o+=".start",i.inputState.compositionFirstChange=!1)),i.dispatch(l,{scrollIntoView:!0,userEvent:o}),!0}else if(r&&!r.main.eq(n)){let s=!1,a="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(s=!0),a=i.inputState.lastSelectionOrigin),i.dispatch({selection:r,scrollIntoView:s,userEvent:a}),!0}else return!1}function Sp(i,e,t,r){let n=Math.min(i.length,e.length),s=0;for(;s<n&&i.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==n&&i.length==e.length)return null;let a=i.length,l=e.length;for(;a>0&&l>0&&i.charCodeAt(a-1)==e.charCodeAt(l-1);)a--,l--;if(r=="end"){let o=Math.max(0,s-Math.min(a,l));t-=a+o-s}return a<s&&i.length<e.length?(s-=t<=s&&t>=a?s-t:0,l=s+(l-a),a=s):l<s&&(s-=t<=s&&t>=l?s-t:0,a=s+(a-l),l=s),{from:s,toA:a,toB:l}}function yp(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:n,focusOffset:s}=i.observer.selectionRange;return t&&(e.push(new fs(t,r)),(n!=t||s!=r)&&e.push(new fs(n,s))),e}function Pp(i,e){if(i.length==0)return null;let t=i[0].pos,r=i.length==2?i[1].pos:t;return t>-1&&r>-1?j.single(t+e,r+e):null}var Cp={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Fa=ce.ie&&ce.ie_version<=11,bl=class{constructor(e){this.view=e,this.active=!1,this.selectionRange=new ja,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(ce.ie&&ce.ie_version<=11||ce.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),Fa&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,n=this.selectionRange;if(r.state.facet(Ss)?r.root.activeElement!=this.dom:!ts(r.dom,n))return;let s=n.anchorNode&&r.docView.nearest(n.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ce.ie&&ce.ie_version<=11||ce.android&&ce.chrome)&&!r.state.selection.main.empty&&n.focusNode&&as(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=ce.safari&&e.root.nodeType==11&&Im(this.dom.ownerDocument)==this.dom&&Ap(this.view)||ss(e.root);if(!t||this.selectionRange.eq(t))return!1;let r=ts(this.dom,t);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Bm(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Cp),Fa&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),Fa&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let n=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),!this.flush()&&s.force&&Oi(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,r=-1,n=!1;for(let s of e){let a=this.readMutation(s);!a||(a.typeOver&&(n=!0),t==-1?{from:t,to:r}=a:(t=Math.min(a.from,t),r=Math.max(a.to,r)))}return{from:t,to:r,typeOver:n}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),n=this.selectionChanged&&ts(this.dom,this.selectionRange);return e<0&&!n?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new gl(this.view,e,t,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let r=this.view.state,n=Rh(this.view,t);return this.view.state==r&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let r=Nu(t,e.previousSibling||e.target.previousSibling,-1),n=Nu(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resize)===null||r===void 0||r.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}};function Nu(i,e,t){for(;e;){let r=Ke.get(e);if(r&&r.parent==i)return r;let n=e.parentNode;e=n!=i.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function Ap(i){let e=null;function t(o){o.preventDefault(),o.stopImmediatePropagation(),e=o.getTargetRanges()[0]}if(i.contentDOM.addEventListener("beforeinput",t,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let r=e.startContainer,n=e.startOffset,s=e.endContainer,a=e.endOffset,l=i.docView.domAtPos(i.state.selection.main.anchor);return as(l.node,l.offset,s,a)&&([r,n,s,a]=[s,a,r,n]),{anchorNode:r,anchorOffset:n,focusNode:s,focusOffset:a}}var oe=class{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||Tm(e.parent)||document,this.viewState=new vs(e.state||Ae.create(e)),this.plugins=this.state.facet(on).map(t=>new dn(t));for(let t of this.plugins)t.update(this);this.observer=new bl(this),this.inputState=new nl(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new ds(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof nt?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,n,s=this.state;for(let u of e){if(u.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=u.state}if(this.destroyed){this.viewState.state=s;return}let a=this.observer.delayedAndroidKey,l=null;if(a?(this.observer.clearDelayedAndroidKey(),l=this.observer.readChange(),(l&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(l=null)):this.observer.clear(),s.facet(Ae.phrases)!=this.state.facet(Ae.phrases))return this.setState(s);n=Ji.create(this,s,e);let o=this.viewState.scrollTarget;try{this.updateState=2;for(let u of e){if(o&&(o=o.map(u.changes)),u.scrollIntoView){let{main:h}=u.state.selection;o=new Fi(h.empty?h:j.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of u.effects)h.is(Su)&&(o=h.value)}this.viewState.update(n,o),this.bidiCache=Ri.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(un)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(u=>u.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(Yn)!=n.state.facet(Yn)&&(this.viewState.mustMeasureContent=!0),(t||r||o||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!n.empty)for(let u of this.state.facet(Ua))u(n);l&&!Rh(this,l)&&a.force&&Oi(this.contentDOM,a.key,a.keyCode)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new vs(e),this.plugins=e.facet(on).map(r=>new dn(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new ds(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(on),r=e.state.facet(on);if(t!=r){let n=[];for(let s of r){let a=t.indexOf(s);if(a<0)n.push(new dn(s));else{let l=this.plugins[a];l.mustUpdate=e,n.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=n,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:r,scrollTop:n,clientHeight:s}=this.scrollDOM,a=n>r-s-4?r:n;try{for(let l=0;;l++){this.updateState=1;let o=this.viewport,u=this.viewState.lineBlockAtHeight(a),h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];h&4||([this.measureRequests,c]=[c,this.measureRequests]);let f=c.map(p=>{try{return p.read(this)}catch(g){return _t(this.state,g),Hu}}),d=Ji.create(this,this.state,[]),m=!1,v=!1;d.flags|=h,t?t.flags|=h:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),m=this.docView.update(d));for(let p=0;p<c.length;p++)if(f[p]!=Hu)try{let g=c[p];g.write&&g.write(f[p],this)}catch(g){_t(this.state,g)}if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,v=!0;else{let p=this.viewState.lineBlockAt(u.from).top-u.top;(p>1||p<-1)&&(this.scrollDOM.scrollTop+=p,v=!0)}if(m&&this.docView.updateSelection(!0),this.viewport.from==o.from&&this.viewport.to==o.to&&!v&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(Ua))l(t)}get themeClasses(){return pl+" "+(this.state.facet(ml)?Fh:Lh)+" "+this.state.facet(Yn)}updateAttrs(){let e=ju(this,kh,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ss)?"true":"false",class:"cm-content",style:`${ce.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),ju(this,wh,t);let r=this.observer.ignore(()=>{let n=Za(this.contentDOM,this.contentAttrs,t),s=Za(this.dom,this.editorAttrs,e);return n||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let n of r.effects)if(n.is(oe.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(un),ir.mount(this.root,this.styleModules.concat(xp).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return La(this,e,Iu(this,e,t,r))}moveByGroup(e,t){return La(this,e,Iu(this,e,t,r=>ip(this,e.head,r)))}moveToLineBoundary(e,t,r=!0){return rp(this,e,t,r)}moveVertically(e,t,r){return La(this,e,np(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Ih(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let n=this.state.doc.lineAt(e),s=this.bidiSpans(n),a=s[Nr.find(s,e-n.from,-1,t)];return Al(r,a.dir==et.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet($h)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>_p)return Ph(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let r=Vm(e.text,t);return this.bidiCache.push(new Ri(e.from,e.to,t,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ce.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{th(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Su.of(new Fi(typeof e=="number"?j.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Ze.define(()=>({}),{eventHandlers:e})}static theme(e,t){let r=ir.newName(),n=[Yn.of(r),un.of(vl(`.${r}`,e))];return t&&t.dark&&n.push(ml.of(!0)),n}static baseTheme(e){return br.lowest(un.of(vl("."+pl,e,Jh)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),n=r&&Ke.get(r)||Ke.get(e);return((t=n?.rootView)===null||t===void 0?void 0:t.view)||null}};oe.styleModule=un;oe.inputHandler=bh;oe.perLineTextDirection=$h;oe.exceptionSink=gh;oe.updateListener=Ua;oe.editable=Ss;oe.mouseSelectionStyle=vh;oe.dragMovesSelection=ph;oe.clickAddsSelectionRange=mh;oe.decorations=kn;oe.atomicRanges=xh;oe.scrollMargins=Sh;oe.darkTheme=ml;oe.contentAttributes=wh;oe.editorAttributes=kh;oe.lineWrapping=oe.contentAttributes.of({class:"cm-lineWrapping"});oe.announce=we.define();var _p=4096,Hu={},Ri=class{constructor(e,t,r,n){this.from=e,this.to=t,this.dir=r,this.order=n}static update(e,t){if(t.empty)return e;let r=[],n=e.length?e[e.length-1].dir:et.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let a=e[s];a.dir==n&&!t.touchesRange(a.from,a.to)&&r.push(new Ri(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.order))}return r}};function ju(i,e,t){for(let r=i.state.facet(e),n=r.length-1;n>=0;n--){let s=r[n],a=typeof s=="function"?s(i):s;a&&qa(a,t)}return t}var Ip=ce.mac?"mac":ce.windows?"win":ce.linux?"linux":"key";function Dp(i,e){let t=i.split(/-(?!$)/),r=t[t.length-1];r=="Space"&&(r=" ");let n,s,a,l;for(let o=0;o<t.length-1;++o){let u=t[o];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))n=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))a=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return n&&(r="Alt-"+r),s&&(r="Ctrl-"+r),l&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function es(i,e,t){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t!==!1&&e.shiftKey&&(i="Shift-"+i),i}var Mp=br.default(oe.domEventHandlers({keydown(i,e){return jh(Nh(e.state),i,e,"editor")}})),Sn=le.define({enables:Mp}),Vu=new WeakMap;function Nh(i){let e=i.facet(Sn),t=Vu.get(e);return t||Vu.set(e,t=Bp(e.reduce((r,n)=>r.concat(n),[]))),t}function Hh(i,e,t){return jh(Nh(i.state),e,i,t)}var Jr=null,Tp=4e3;function Bp(i,e=Ip){let t=Object.create(null),r=Object.create(null),n=(a,l)=>{let o=r[a];if(o==null)r[a]=l;else if(o!=l)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},s=(a,l,o,u)=>{var h,c;let f=t[a]||(t[a]=Object.create(null)),d=l.split(/ (?!$)/).map(p=>Dp(p,e));for(let p=1;p<d.length;p++){let g=d.slice(0,p).join(" ");n(g,!0),f[g]||(f[g]={preventDefault:!0,run:[k=>{let S=Jr={view:k,prefix:g,scope:a};return setTimeout(()=>{Jr==S&&(Jr=null)},Tp),!0}]})}let m=d.join(" ");n(m,!1);let v=f[m]||(f[m]={preventDefault:!1,run:((c=(h=f._any)===null||h===void 0?void 0:h.run)===null||c===void 0?void 0:c.slice())||[]});o&&v.run.push(o),u&&(v.preventDefault=!0)};for(let a of i){let l=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let u of l){let h=t[u]||(t[u]=Object.create(null));h._any||(h._any={preventDefault:!1,run:[]});for(let c in h)h[c].run.push(a.any)}let o=a[e]||a.key;if(!!o)for(let u of l)s(u,o,a.run,a.preventDefault),a.shift&&s(u,"Shift-"+o,a.shift,a.preventDefault)}return t}function jh(i,e,t,r){let n=vu(e),s=ct(n,0),a=Ct(s)==n.length&&n!=" ",l="",o=!1;Jr&&Jr.view==t&&Jr.scope==r&&(l=Jr.prefix+" ",(o=Mh.indexOf(e.keyCode)<0)&&(Jr=null));let u=new Set,h=m=>{if(m){for(let v of m.run)if(!u.has(v)&&(u.add(v),v(t,e)))return!0;m.preventDefault&&(o=!0)}return!1},c=i[r],f,d;if(c){if(h(c[l+es(n,e,!a)]))return!0;if(a&&(e.shiftKey||e.altKey||e.metaKey||s>127)&&(f=Tr[e.keyCode])&&f!=n){if(h(c[l+es(f,e,!0)]))return!0;if(e.shiftKey&&(d=Ii[e.keyCode])!=n&&d!=f&&h(c[l+es(d,e,!1)]))return!0}else if(a&&e.shiftKey&&h(c[l+es(n,e,!0)]))return!0;if(h(c._any))return!0}return o}var Vh=!ce.ios,cn=le.define({combine(i){return At(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function zh(i={}){return[cn.of(i),Op,Wp]}var gs=class{constructor(e,t,r,n,s){this.left=e,this.top=t,this.width=r,this.height=n,this.className=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}},Op=Ze.fromClass(class{constructor(i){this.view=i,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=i.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=i.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),i.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(cn).cursorBlinkRate+"ms"}update(i){let e=i.startState.facet(cn)!=i.state.facet(cn);(e||i.selectionSet||i.geometryChanged||i.viewportChanged)&&this.view.requestMeasure(this.measureReq),i.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:i}=this.view,e=i.facet(cn),t=i.selection.ranges.map(n=>n.empty?[]:Ep(this.view,n)).reduce((n,s)=>n.concat(s)),r=[];for(let n of i.selection.ranges){let s=n==i.selection.main;if(n.empty?!s||Vh:e.drawRangeCursor){let a=Lp(this.view,n,s);a&&r.push(a)}}return{rangePieces:t,cursors:r}}drawSel({rangePieces:i,cursors:e}){if(i.length!=this.rangePieces.length||i.some((t,r)=>!t.eq(this.rangePieces[r]))){this.selectionLayer.textContent="";for(let t of i)this.selectionLayer.appendChild(t.draw());this.rangePieces=i}if(e.length!=this.cursors.length||e.some((t,r)=>!t.eq(this.cursors[r]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(let r of e)this.cursorLayer.appendChild(r.draw())}else e.forEach((r,n)=>r.adjust(t[n]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),Gh={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Vh&&(Gh[".cm-line"].caretColor="transparent !important");var Wp=br.highest(oe.theme(Gh));function Kh(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==et.LTR?e.left:e.right-i.scrollDOM.clientWidth)-i.scrollDOM.scrollLeft,top:e.top-i.scrollDOM.scrollTop}}function zu(i,e,t){let r=j.cursor(e);return{from:Math.max(t.from,i.moveToLineBoundary(r,!1,!0).from),to:Math.min(t.to,i.moveToLineBoundary(r,!0,!0).from),type:qe.Text}}function Gu(i,e){let t=i.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==qe.Text))return r}return t}function Ep(i,e){if(e.to<=i.viewport.from||e.from>=i.viewport.to)return[];let t=Math.max(e.from,i.viewport.from),r=Math.min(e.to,i.viewport.to),n=i.textDirection==et.LTR,s=i.contentDOM,a=s.getBoundingClientRect(),l=Kh(i),o=window.getComputedStyle(s.firstChild),u=a.left+parseInt(o.paddingLeft)+Math.min(0,parseInt(o.textIndent)),h=a.right-parseInt(o.paddingRight),c=Gu(i,t),f=Gu(i,r),d=c.type==qe.Text?c:null,m=f.type==qe.Text?f:null;if(i.lineWrapping&&(d&&(d=zu(i,t,d)),m&&(m=zu(i,r,m))),d&&m&&d.from==m.from)return p(g(e.from,e.to,d));{let S=d?g(e.from,null,d):k(c,!1),w=m?g(null,e.to,m):k(f,!0),A=[];return(d||c).to<(m||f).from-1?A.push(v(u,S.bottom,h,w.top)):S.bottom<w.top&&i.elementAtHeight((S.bottom+w.top)/2).type==qe.Text&&(S.bottom=w.top=(S.bottom+w.top)/2),p(S).concat(A).concat(p(w))}function v(S,w,A,_){return new gs(S-l.left,w-l.top-.01,A-S,_-w+.01,"cm-selectionBackground")}function p({top:S,bottom:w,horizontal:A}){let _=[];for(let W=0;W<A.length;W+=2)_.push(v(A[W],S,A[W+1],w));return _}function g(S,w,A){let _=1e9,W=-1e9,J=[];function H(U,y,P,C,b){let x=i.coordsAtPos(U,U==A.to?-2:2),$=i.coordsAtPos(P,P==A.from?2:-2);_=Math.min(x.top,$.top,_),W=Math.max(x.bottom,$.bottom,W),b==et.LTR?J.push(n&&y?u:x.left,n&&C?h:$.right):J.push(!n&&C?u:$.left,!n&&y?h:x.right)}let F=S??A.from,V=w??A.to;for(let U of i.visibleRanges)if(U.to>F&&U.from<V)for(let y=Math.max(U.from,F),P=Math.min(U.to,V);;){let C=i.state.doc.lineAt(y);for(let b of i.bidiSpans(C)){let x=b.from+C.from,$=b.to+C.from;if(x>=P)break;$>y&&H(Math.max(x,y),S==null&&x<=F,Math.min($,P),w==null&&$>=V,b.dir)}if(y=C.to+1,y>=P)break}return J.length==0&&H(F,S==null,V,w==null,i.textDirection),{top:_,bottom:W,horizontal:J}}function k(S,w){let A=a.top+(w?S.top:S.bottom);return{top:A,bottom:A,horizontal:[]}}}function Lp(i,e,t){let r=i.coordsAtPos(e.head,e.assoc||1);if(!r)return null;let n=Kh(i);return new gs(r.left-n.left,r.top-n.top,-1,r.bottom-r.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}var Qh=we.define({map(i,e){return i==null?null:e.mapPos(i)}}),fn=Ue.define({create(){return null},update(i,e){return i!=null&&(i=e.changes.mapPos(i)),e.effects.reduce((t,r)=>r.is(Qh)?r.value:t,i)}}),Fp=Ze.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var e;let t=i.state.field(fn);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(fn)!=t||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let i=this.view.state.field(fn),e=i!=null&&this.view.coordsAtPos(i);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(i){this.cursor&&(i?(this.cursor.style.left=i.left+"px",this.cursor.style.top=i.top+"px",this.cursor.style.height=i.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(fn)!=i&&this.view.dispatch({effects:Qh.of(i)})}},{eventHandlers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function qh(){return[fn,Fp]}function Ku(i,e,t,r,n){e.lastIndex=0;for(let s=i.iterRange(t,r),a=t,l;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)n(a+l.index,l)}function Jp(i,e){let t=i.visibleRanges;if(t.length==1&&t[0].from==i.viewport.from&&t[0].to==i.viewport.to)return t;let r=[];for(let{from:n,to:s}of t)n=Math.max(i.state.doc.lineAt(n).from,n-e),s=Math.min(i.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=n?r[r.length-1].to=s:r.push({from:n,to:s});return r}var $l=class{constructor(e){let{regexp:t,decoration:r,decorate:n,boundary:s,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(l,o,u,h)=>n(h,u,u+l[0].length,l,o);else if(typeof r=="function")this.addMatch=(l,o,u,h)=>{let c=r(l,o,u);c&&h(u,u+l[0].length,c)};else if(r)this.addMatch=(l,o,u,h)=>h(u,u+l[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=a}createDeco(e){let t=new zt,r=t.add.bind(t);for(let{from:n,to:s}of Jp(e,this.maxLength))Ku(e.state.doc,this.regexp,n,s,(a,l)=>this.addMatch(l,e,a,r));return t.finish()}updateDeco(e,t){let r=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((s,a,l,o)=>{o>e.view.viewport.from&&l<e.view.viewport.to&&(r=Math.min(l,r),n=Math.max(o,n))}),e.viewportChanged||n-r>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),r,n):t}updateRange(e,t,r,n){for(let s of e.visibleRanges){let a=Math.max(s.from,r),l=Math.min(s.to,n);if(l>a){let o=e.state.doc.lineAt(a),u=o.to<l?e.state.doc.lineAt(l):o,h=Math.max(s.from,o.from),c=Math.min(s.to,u.to);if(this.boundary){for(;a>o.from;a--)if(this.boundary.test(o.text[a-1-o.from])){h=a;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){c=l;break}}let f=[],d,m=(v,p,g)=>f.push(g.range(v,p));if(o==u)for(this.regexp.lastIndex=h-o.from;(d=this.regexp.exec(o.text))&&d.index<c-o.from;)this.addMatch(d,e,d.index+o.from,m);else Ku(e.state.doc,this.regexp,h,c,(v,p)=>this.addMatch(p,e,v,m));t=t.update({filterFrom:h,filterTo:c,filter:(v,p)=>v<h||p>c,add:f})}}return t}},kl=/x/.unicode!=null?"gu":"g",Rp=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,kl),Np={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},Ja=null;function Hp(){var i;if(Ja==null&&typeof document<"u"&&document.body){let e=document.body.style;Ja=((i=e.tabSize)!==null&&i!==void 0?i:e.MozTabSize)!=null}return Ja||!1}var is=le.define({combine(i){let e=At(i,{render:null,specialChars:Rp,addSpecialChars:null});return(e.replaceTabs=!Hp())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,kl)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,kl)),e}});function Zh(i={}){return[is.of(i),jp()]}var Qu=null;function jp(){return Qu||(Qu=Ze.fromClass(class{constructor(i){this.view=i,this.decorations=me.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(is)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new $l({regexp:i.specialChars,decoration:(e,t,r)=>{let{doc:n}=t.state,s=ct(e[0],0);if(s==9){let a=n.lineAt(r),l=t.state.tabSize,o=Fr(a.text,l,r-a.from);return me.replace({widget:new xl((l-o%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=me.replace({widget:new wl(i,s)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let e=i.state.facet(is);i.startState.facet(is)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}var Vp="\u2022";function zp(i){return i>=32?Vp:i==10?"\u2424":String.fromCharCode(9216+i)}var wl=class extends Kt{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=zp(this.code),r=e.state.phrase("Control character")+" "+(Np[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,r,t);if(n)return n;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}},xl=class extends Kt{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}};function Xh(){return Kp}var Gp=me.line({class:"cm-activeLine"}),Kp=Ze.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=-1,t=[];for(let r of i.state.selection.ranges){let n=i.lineBlockAt(r.head);n.from>e&&(t.push(Gp.range(n.from)),e=n.from)}return me.set(t)}},{decorations:i=>i.decorations});var Sl=2e3;function Qp(i,e,t){let r=Math.min(e.line,t.line),n=Math.max(e.line,t.line),s=[];if(e.off>Sl||t.off>Sl||e.col<0||t.col<0){let a=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let o=r;o<=n;o++){let u=i.doc.line(o);u.length<=l&&s.push(j.range(u.from+a,u.to+l))}}else{let a=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let o=r;o<=n;o++){let u=i.doc.line(o),h=Kn(u.text,a,i.tabSize,!0);if(h>-1){let c=Kn(u.text,l,i.tabSize);s.push(j.range(u.from+h,u.from+c))}}}return s}function qp(i,e){let t=i.coordsAtPos(i.viewport.from);return t?Math.round(Math.abs((t.left-e)/i.defaultCharacterWidth)):-1}function qu(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1),r=i.state.doc.lineAt(t),n=t-r.from,s=n>Sl?-1:n==r.length?qp(i,e.clientX):Fr(r.text,i.state.tabSize,t-r.from);return{line:r.number,col:s,off:n}}function Zp(i,e){let t=qu(i,e),r=i.state.selection;return t?{update(n){if(n.docChanged){let s=n.changes.mapPos(n.startState.doc.line(t.line).from),a=n.state.doc.lineAt(s);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},r=r.map(n.changes)}},get(n,s,a){let l=qu(i,n);if(!l)return r;let o=Qp(i.state,t,l);return o.length?a?j.create(o.concat(r.ranges)):j.create(o):r}}:null}function Uh(i){let e=i?.eventFilter||(t=>t.altKey&&t.button==0);return oe.mouseSelectionStyle.of((t,r)=>e(r)?Zp(t,r):null)}var Xp={Alt:[18,i=>i.altKey],Control:[17,i=>i.ctrlKey],Shift:[16,i=>i.shiftKey],Meta:[91,i=>i.metaKey]},Up={style:"cursor: crosshair"};function Yh(i={}){let[e,t]=Xp[i.key||"Alt"],r=Ze.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventHandlers:{keydown(n){this.set(n.keyCode==e||t(n))},keyup(n){(n.keyCode==e||!t(n))&&this.set(!1)}}});return[r,oe.contentAttributes.of(n=>{var s;return!((s=n.plugin(r))===null||s===void 0)&&s.isDown?Up:null})]}var Ra="-10000px",bs=class{constructor(e,t,r){this.facet=t,this.createTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(n=>n),this.tooltipViews=this.tooltips.map(r)}update(e){let t=e.state.facet(this.facet),r=t.filter(s=>s);if(t===this.input){for(let s of this.tooltipViews)s.update&&s.update(e);return!1}let n=[];for(let s=0;s<r.length;s++){let a=r[s],l=-1;if(!!a){for(let o=0;o<this.tooltips.length;o++){let u=this.tooltips[o];u&&u.create==a.create&&(l=o)}if(l<0)n[s]=this.createTooltipView(a);else{let o=n[s]=this.tooltipViews[l];o.update&&o.update(e)}}}for(let s of this.tooltipViews)n.indexOf(s)<0&&s.dom.remove();return this.input=t,this.tooltips=r,this.tooltipViews=n,!0}};function Yp(i){let{win:e}=i;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}var Na=le.define({combine:i=>{var e,t,r;return{position:ce.ios?"absolute":((e=i.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=i.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=i.find(n=>n.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||Yp}}}),ec=Ze.fromClass(class{constructor(i){this.view=i,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=i.state.facet(Na);this.position=e.position,this.parent=e.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new bs(i,yn,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(i);e&&this.observeIntersection();let t=e||i.geometryChanged,r=i.state.facet(Na);if(r.position!=this.position){this.position=r.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(i){let e=i.create(this.view);if(e.dom.classList.add("cm-tooltip"),i.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=Ra,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var i;this.view.win.removeEventListener("resize",this.measureSoon);for(let{dom:e}of this.manager.tooltipViews)e.remove();(i=this.intersectionObserver)===null||i===void 0||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=this.view.dom.getBoundingClientRect();return{editor:i,parent:this.parent?this.container.getBoundingClientRect():i,pos:this.manager.tooltips.map((e,t)=>{let r=this.manager.tooltipViews[t];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Na).tooltipSpace(this.view)}}writeMeasure(i){let{editor:e,space:t}=i,r=[];for(let n=0;n<this.manager.tooltips.length;n++){let s=this.manager.tooltips[n],a=this.manager.tooltipViews[n],{dom:l}=a,o=i.pos[n],u=i.size[n];if(!o||o.bottom<=Math.max(e.top,t.top)||o.top>=Math.min(e.bottom,t.bottom)||o.right<Math.max(e.left,t.left)-.1||o.left>Math.min(e.right,t.right)+.1){l.style.top=Ra;continue}let h=s.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,c=h?7:0,f=u.right-u.left,d=u.bottom-u.top,m=a.offset||t0,v=this.view.textDirection==et.LTR,p=u.width>t.right-t.left?v?t.left:t.right-u.width:v?Math.min(o.left-(h?14:0)+m.x,t.right-f):Math.max(t.left,o.left-f+(h?14:0)-m.x),g=!!s.above;!s.strictSide&&(g?o.top-(u.bottom-u.top)-m.y<t.top:o.bottom+(u.bottom-u.top)+m.y>t.bottom)&&g==t.bottom-o.bottom>o.top-t.top&&(g=!g);let k=g?o.top-d-c-m.y:o.bottom+c+m.y,S=p+f;if(a.overlap!==!0)for(let w of r)w.left<S&&w.right>p&&w.top<k+d&&w.bottom>k&&(k=g?w.top-d-2-c:w.bottom+c+2);this.position=="absolute"?(l.style.top=k-i.parent.top+"px",l.style.left=p-i.parent.left+"px"):(l.style.top=k+"px",l.style.left=p+"px"),h&&(h.style.left=`${o.left+(v?m.x:-m.x)-(p+14-7)}px`),a.overlap!==!0&&r.push({left:p,top:k,right:S,bottom:k+d}),l.classList.toggle("cm-tooltip-above",g),l.classList.toggle("cm-tooltip-below",!g),a.positioned&&a.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=Ra}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),e0=oe.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),t0={x:0,y:0},yn=le.define({enables:[ec,e0]}),$s=le.define(),xn=class{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new bs(e,$s,t=>this.createHostedView(t))}static create(e){return new xn(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}},r0=yn.compute([$s],i=>{let e=i.facet($s).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:xn.create,above:e[0].above,arrow:e.some(t=>t.arrow)}}),yl=class{constructor(e,t,r,n,s){this.view=e,this.source=t,this.field=r,this.setHover=n,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let r=this.view.coordsAtPos(t);if(r==null||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let n=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(l=>l.from<=t&&l.to>=t),s=n&&n.dir==et.RTL?-1:1,a=this.source(this.view,t,e.x<r.left?-s:s);if(a?.then){let l=this.pending={pos:t};a.then(o=>{this.pending==l&&(this.pending=null,o&&this.view.dispatch({effects:this.setHover.of(o)}))},o=>_t(this.view.state,o,"hover tooltip"))}else a&&this.view.dispatch({effects:this.setHover.of(a)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!i0(this.lastMove.target)||this.pending){let{pos:n}=r||this.pending,s=(t=r?.end)!==null&&t!==void 0?t:n;(n==s?this.view.posAtCoords(this.lastMove)!=n:!n0(this.view,n,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}};function i0(i){for(let e=i;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function n0(i,e,t,r,n,s){let a=document.createRange(),l=i.domAtPos(e),o=i.domAtPos(t);a.setEnd(o.node,o.offset),a.setStart(l.node,l.offset);let u=a.getClientRects();a.detach();for(let h=0;h<u.length;h++){let c=u[h];if(Math.max(c.top-n,n-c.bottom,c.left-r,r-c.right)<=s)return!0}return!1}function tc(i,e={}){let t=we.define(),r=Ue.define({create(){return null},update(n,s){if(n&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,n)))return null;if(n&&s.docChanged){let a=s.changes.mapPos(n.pos,-1,wt.TrackDel);if(a==null)return null;let l=Object.assign(Object.create(null),n);l.pos=a,n.end!=null&&(l.end=s.changes.mapPos(n.end)),n=l}for(let a of s.effects)a.is(t)&&(n=a.value),a.is(s0)&&(n=null);return n},provide:n=>$s.from(n)});return[r,Ze.define(n=>new yl(n,i,r,t,e.hoverTime||300)),r0]}function rc(i,e){let t=i.plugin(ec);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}var s0=we.define();var Zu=le.define({combine(i){let e,t;for(let r of i)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function di(i,e){let t=i.plugin(ic),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}var ic=Ze.fromClass(class{constructor(i){this.input=i.state.facet(fi),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(i));let e=i.state.facet(Zu);this.top=new Ti(i,!0,e.topContainer),this.bottom=new Ti(i,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(i){let e=i.state.facet(Zu);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ti(i.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ti(i.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=i.state.facet(fi);if(t!=this.input){let r=t.filter(o=>o),n=[],s=[],a=[],l=[];for(let o of r){let u=this.specs.indexOf(o),h;u<0?(h=o(i.view),l.push(h)):(h=this.panels[u],h.update&&h.update(i)),n.push(h),(h.top?s:a).push(h)}this.specs=r,this.panels=n,this.top.sync(s),this.bottom.sync(a);for(let o of l)o.dom.classList.add("cm-panel"),o.mount&&o.mount()}else for(let r of this.panels)r.update&&r.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>oe.scrollMargins.of(e=>{let t=e.plugin(i);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})}),Ti=class{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Xu(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Xu(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function Xu(i){let e=i.nextSibling;return i.remove(),e}var fi=le.define({enables:ic}),Qt=class extends dr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};Qt.prototype.elementClass="";Qt.prototype.toDOM=void 0;Qt.prototype.mapMode=wt.TrackBefore;Qt.prototype.startSide=Qt.prototype.endSide=-1;Qt.prototype.point=!0;var ns=le.define(),a0={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ie.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},pn=le.define();function Dl(i){return[nc(),pn.of(Object.assign(Object.assign({},a0),i))]}var Pl=le.define({combine:i=>i.some(e=>e)});function nc(i){let e=[l0];return i&&i.fixed===!1&&e.push(Pl.of(!0)),e}var l0=Ze.fromClass(class{constructor(i){this.view=i,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=i.state.facet(pn).map(e=>new ks(i,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!i.state.facet(Pl),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}update(i){if(this.updateGutters(i)){let e=this.prevViewport,t=i.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}i.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Pl)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=i.view.viewport}syncGutters(i){let e=this.dom.nextSibling;i&&this.dom.remove();let t=Ie.iter(this.view.state.facet(ns),this.view.viewport.from),r=[],n=this.gutters.map(s=>new Cl(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks){let a;if(Array.isArray(s.type)){for(let l of s.type)if(l.type==qe.Text){a=l;break}}else a=s.type==qe.Text?s:void 0;if(!!a){r.length&&(r=[]),sc(t,r,s.from);for(let l of n)l.line(this.view,a,r)}}for(let s of n)s.finish();i&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(i){let e=i.startState.facet(pn),t=i.state.facet(pn),r=i.docChanged||i.heightChanged||i.viewportChanged||!Ie.eq(i.startState.facet(ns),i.state.facet(ns),i.view.viewport.from,i.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(i)&&(r=!0);else{r=!0;let n=[];for(let s of t){let a=e.indexOf(s);a<0?n.push(new ks(this.view,s)):(this.gutters[a].update(i),n.push(this.gutters[a]))}for(let s of this.gutters)s.dom.remove(),n.indexOf(s)<0&&s.destroy();for(let s of n)this.dom.appendChild(s.dom);this.gutters=n}return r}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove()}},{provide:i=>oe.scrollMargins.of(e=>{let t=e.plugin(i);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==et.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function Uu(i){return Array.isArray(i)?i:[i]}function sc(i,e,t){for(;i.value&&i.from<=t;)i.from==t&&e.push(i.value),i.next()}var Cl=class{constructor(e,t,r){this.gutter=e,this.height=r,this.localMarkers=[],this.i=0,this.cursor=Ie.iter(e.markers,t.from)}line(e,t,r){this.localMarkers.length&&(this.localMarkers=[]),sc(this.cursor,this.localMarkers,t.from);let n=r.length?this.localMarkers.concat(r):this.localMarkers,s=this.gutter.config.lineMarker(e,t,n);s&&n.unshift(s);let a=this.gutter;if(n.length==0&&!a.config.renderEmptyElements)return;let l=t.top-this.height;if(this.i==a.elements.length){let o=new ws(e,t.height,l,n);a.elements.push(o),a.dom.appendChild(o.dom)}else a.elements[this.i].update(e,t.height,l,n);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}},ks=class{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,n=>{let s=e.lineBlockAtHeight(n.clientY-e.documentTop);t.domEventHandlers[r](e,s,n)&&n.preventDefault()});this.markers=Uu(t.markers(e)),t.initialSpacer&&(this.spacer=new ws(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Uu(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let r=e.view.viewport;return!Ie.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}},ws=class{constructor(e,t,r,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,n)}update(e,t,r,n){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),o0(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let r="cm-gutterElement",n=this.dom.firstChild;for(let s=0,a=0;;){let l=a,o=s<t.length?t[s++]:null,u=!1;if(o){let h=o.elementClass;h&&(r+=" "+h);for(let c=a;c<this.markers.length;c++)if(this.markers[c].compare(o)){l=c,u=!0;break}}else l=this.markers.length;for(;a<l;){let h=this.markers[a++];if(h.toDOM){h.destroy(n);let c=n.nextSibling;n.remove(),n=c}}if(!o)break;o.toDOM&&(u?n=n.nextSibling:this.dom.insertBefore(o.toDOM(e),n)),u&&a++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}};function o0(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].compare(e[t]))return!1;return!0}var u0=le.define(),Bi=le.define({combine(i){return At(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let n in t){let s=r[n],a=t[n];r[n]=s?(l,o,u)=>s(l,o,u)||a(l,o,u):a}return r}})}}),vn=class extends Qt{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}};function Ha(i,e){return i.state.facet(Bi).formatNumber(e,i.state)}var h0=pn.compute([Bi],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(u0)},lineMarker(e,t,r){return r.some(n=>n.toDOM)?null:new vn(Ha(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(Bi)!=e.state.facet(Bi),initialSpacer(e){return new vn(Ha(e,Yu(e.state.doc.lines)))},updateSpacer(e,t){let r=Ha(t.view,Yu(t.view.state.doc.lines));return r==e.number?e:new vn(r)},domEventHandlers:i.facet(Bi).domEventHandlers}));function ac(i={}){return[Bi.of(i),nc(),h0]}function Yu(i){let e=9;for(;e<i;)e=e*10+9;return e}var c0=new class extends Qt{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},f0=ns.compute(["selection"],i=>{let e=[],t=-1;for(let r of i.selection.ranges){let n=i.doc.lineAt(r.head).from;n>t&&(t=n,e.push(c0.range(n)))}return Ie.of(e)});function lc(){return f0}var d0=0,Pn=class{constructor(e,t){this.from=e,this.to=t}},_e=class{constructor(e={}){this.id=d0++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Jt.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}};_e.closedBy=new _e({deserialize:i=>i.split(" ")});_e.openedBy=new _e({deserialize:i=>i.split(" ")});_e.group=new _e({deserialize:i=>i.split(" ")});_e.contextHash=new _e({perNode:!0});_e.lookAhead=new _e({perNode:!0});_e.mounted=new _e({perNode:!0});var m0=Object.create(null),Jt=class{constructor(e,t,r,n=0){this.name=e,this.props=t,this.id=r,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):m0,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new Jt(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(_e.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let n of r.split(" "))t[n]=e[r];return r=>{for(let n=r.prop(_e.group),s=-1;s<(n?n.length:0);s++){let a=t[s<0?r.name:n[s]];if(a)return a}}}};Jt.none=new Jt("",Object.create(null),0,8);var ys=new WeakMap,oc=new WeakMap,St;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(St||(St={}));var mt=class{constructor(e,t,r,n,s){if(this.type=e,this.children=t,this.positions=r,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,l]of s)this.props[typeof a=="number"?a:a.id]=l}}toString(){let e=this.prop(_e.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let n=r.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Hi(this.topNode,e)}cursorAt(e,t=0,r=0){let n=ys.get(this)||this.topNode,s=new Hi(n);return s.moveTo(e,t),ys.set(this,s._tree),s}get topNode(){return new pr(this,0,0,null)}resolve(e,t=0){let r=Ni(ys.get(this)||this.topNode,e,t,!1);return ys.set(this,r),r}resolveInner(e,t=0){let r=Ni(oc.get(this)||this.topNode,e,t,!0);return oc.set(this,r),r}iterate(e){let{enter:t,leave:r,from:n=0,to:s=this.length}=e;for(let a=this.cursor((e.mode||0)|St.IncludeAnonymous);;){let l=!1;if(a.from<=s&&a.to>=n&&(a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;l=!0}for(;l&&r&&!a.type.isAnonymous&&r(a),!a.nextSibling();){if(!a.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Ol(Jt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,n)=>new mt(this.type,t,r,n,this.propValues),e.makeTree||((t,r,n)=>new mt(Jt.none,t,r,n)))}static build(e){return p0(e)}};mt.empty=new mt(Jt.none,[],[],0);var Cn=class{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Cn(this.buffer,this.index)}},Wr=class{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Jt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return s+"("+a.join(",")+")"}findChild(e,t,r,n,s){let{buffer:a}=this,l=-1;for(let o=e;o!=t&&!(hc(s,n,a[o+1],a[o+2])&&(l=o,r>0));o=a[o+3]);return l}slice(e,t,r,n){let s=this.buffer,a=new Uint16Array(t-e);for(let l=e,o=0;l<t;)a[o++]=s[l++],a[o++]=s[l++]-r,a[o++]=s[l++]-r,a[o++]=s[l++]-e;return new Wr(a,n-r,this.set)}};function hc(i,e,t,r){switch(i){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function cc(i,e){let t=i.childBefore(e);for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}function Ni(i,e,t,r){for(var n;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let a=!r&&i instanceof pr&&i.index<0?null:i.parent;if(!a)return i;i=a}let s=r?0:St.IgnoreOverlays;if(r)for(let a=i,l=a.parent;l;a=l,l=a.parent)a instanceof pr&&a.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=a.from&&(i=l);for(;;){let a=i.enter(e,t,s);if(!a)return i;i=a}}var pr=class{constructor(e,t,r,n){this._tree=e,this.from=t,this.index=r,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,n,s=0){for(let a=this;;){for(let{children:l,positions:o}=a._tree,u=t>0?l.length:-1;e!=u;e+=t){let h=l[e],c=o[e]+a.from;if(!!hc(n,r,c,c+h.length)){if(h instanceof Wr){if(s&St.ExcludeBuffers)continue;let f=h.findChild(0,h.buffer.length,t,r-c,n);if(f>-1)return new Sr(new Ml(a,h,e,c),null,f)}else if(s&St.IncludeAnonymous||!h.type.isAnonymous||Bl(h)){let f;if(!(s&St.IgnoreMounts)&&h.props&&(f=h.prop(_e.mounted))&&!f.overlay)return new pr(f.tree,c,e,a);let d=new pr(h,c,e,a);return s&St.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?h.children.length-1:0,t,r,n)}}}if(s&St.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let n;if(!(r&St.IgnoreOverlays)&&(n=this._tree.prop(_e.mounted))&&n.overlay){let s=e-this.from;for(let{from:a,to:l}of n.overlay)if((t>0?a<=s:a<s)&&(t<0?l>=s:l>s))return new pr(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Hi(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Ni(this,e,t,!1)}resolveInner(e,t=0){return Ni(this,e,t,!0)}enterUnfinishedNodesBefore(e){return cc(this,e)}getChild(e,t=null,r=null){let n=Cs(this,e,t,r);return n.length?n[0]:null}getChildren(e,t=null,r=null){return Cs(this,e,t,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return As(this,e)}};function Cs(i,e,t,r){let n=i.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(r!=null&&n.type.is(r))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return r==null?s:[]}}function As(i,e,t=e.length-1){for(let r=i.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}var Ml=class{constructor(e,t,r,n){this.parent=e,this.buffer=t,this.index=r,this.start=n}},Sr=class{constructor(e,t,r){this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,r){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new Sr(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&St.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Sr(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Sr(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Sr(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Hi(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,n=this.index+4,s=r.buffer[this.index+3];if(s>n){let a=r.buffer[this.index+1],l=r.buffer[this.index+2];e.push(r.slice(n,s,a,l)),t.push(0)}return new mt(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Ni(this,e,t,!1)}resolveInner(e,t=0){return Ni(this,e,t,!0)}enterUnfinishedNodesBefore(e){return cc(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,r=null){let n=Cs(this,e,t,r);return n.length?n[0]:null}getChildren(e,t=null,r=null){return Cs(this,e,t,r)}get node(){return this}matchContext(e){return As(this,e)}},Hi=class{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof pr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=r+n.buffer[e+1],this.to=r+n.buffer[e+2],!0}yield(e){return e?e instanceof pr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&St.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&St.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&St.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let n=r<0?0:this.stack[r]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(n)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=n)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,a=e<0?-1:r._tree.children.length;s!=a;s+=e){let l=r._tree.children[s];if(this.mode&St.IncludeAnonymous||l instanceof Wr||!l.type.isAnonymous||Bl(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let a=e;a;a=a._parent)if(a.index==n){if(n==this.index)return a;t=a,r=s+1;break e}n=this.stack[--s]}}for(let n=r;n<this.stack.length;n++)t=new Sr(this.buffer,t,this.stack[n]);return this.bufferNode=new Sr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,n=!0}}}matchContext(e){if(!this.buffer)return As(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return As(this.node,e,n);let a=r[t.buffer[this.stack[s]]];if(!a.isAnonymous){if(e[n]&&e[n]!=a.name)return!1;n--}}return!0}};function Bl(i){return i.children.some(e=>e instanceof Wr||!e.type.isAnonymous||Bl(e))}function p0(i){var e;let{buffer:t,nodeSet:r,maxBufferLength:n=1024,reused:s=[],minRepeatType:a=r.types.length}=i,l=Array.isArray(t)?new Cn(t,t.length):t,o=r.types,u=0,h=0;function c(w,A,_,W,J){let{id:H,start:F,end:V,size:U}=l,y=h;for(;U<0;)if(l.next(),U==-1){let $=s[H];_.push($),W.push(F-w);return}else if(U==-3){u=H;return}else if(U==-4){h=H;return}else throw new RangeError(`Unrecognized record size: ${U}`);let P=o[H],C,b,x=F-w;if(V-F<=n&&(b=v(l.pos-A,J))){let $=new Uint16Array(b.size-b.skip),I=l.pos-b.size,D=$.length;for(;l.pos>I;)D=p(b.start,$,D);C=new Wr($,V-b.start,r),x=b.start-w}else{let $=l.pos-U;l.next();let I=[],D=[],M=H>=a?H:-1,T=0,O=V;for(;l.pos>$;)M>=0&&l.id==M&&l.size>=0?(l.end<=O-n&&(d(I,D,F,T,l.end,O,M,y),T=I.length,O=l.end),l.next()):c(F,$,I,D,M);if(M>=0&&T>0&&T<I.length&&d(I,D,F,T,F,O,M,y),I.reverse(),D.reverse(),M>-1&&T>0){let B=f(P);C=Ol(P,I,D,0,I.length,0,V-F,B,B)}else C=m(P,I,D,V-F,y-V)}_.push(C),W.push(x)}function f(w){return(A,_,W)=>{let J=0,H=A.length-1,F,V;if(H>=0&&(F=A[H])instanceof mt){if(!H&&F.type==w&&F.length==W)return F;(V=F.prop(_e.lookAhead))&&(J=_[H]+F.length+V)}return m(w,A,_,W,J)}}function d(w,A,_,W,J,H,F,V){let U=[],y=[];for(;w.length>W;)U.push(w.pop()),y.push(A.pop()+_-J);w.push(m(r.types[F],U,y,H-J,V-H)),A.push(J-_)}function m(w,A,_,W,J=0,H){if(u){let F=[_e.contextHash,u];H=H?[F].concat(H):[F]}if(J>25){let F=[_e.lookAhead,J];H=H?[F].concat(H):[F]}return new mt(w,A,_,W,H)}function v(w,A){let _=l.fork(),W=0,J=0,H=0,F=_.end-n,V={size:0,start:0,skip:0};e:for(let U=_.pos-w;_.pos>U;){let y=_.size;if(_.id==A&&y>=0){V.size=W,V.start=J,V.skip=H,H+=4,W+=4,_.next();continue}let P=_.pos-y;if(y<0||P<U||_.start<F)break;let C=_.id>=a?4:0,b=_.start;for(_.next();_.pos>P;){if(_.size<0)if(_.size==-3)C+=4;else break e;else _.id>=a&&(C+=4);_.next()}J=b,W+=y,H+=C}return(A<0||W==w)&&(V.size=W,V.start=J,V.skip=H),V.size>4?V:void 0}function p(w,A,_){let{id:W,start:J,end:H,size:F}=l;if(l.next(),F>=0&&W<a){let V=_;if(F>4){let U=l.pos-(F-4);for(;l.pos>U;)_=p(w,A,_)}A[--_]=V,A[--_]=H-w,A[--_]=J-w,A[--_]=W}else F==-3?u=W:F==-4&&(h=W);return _}let g=[],k=[];for(;l.pos>0;)c(i.start||0,i.bufferStart||0,g,k,-1);let S=(e=i.length)!==null&&e!==void 0?e:g.length?k[0]+g[0].length:0;return new mt(o[i.topID],g.reverse(),k.reverse(),S)}var uc=new WeakMap;function Ps(i,e){if(!i.isAnonymous||e instanceof Wr||e.type!=i)return 1;let t=uc.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=i||!(r instanceof mt)){t=1;break}t+=Ps(i,r)}uc.set(e,t)}return t}function Ol(i,e,t,r,n,s,a,l,o){let u=0;for(let m=r;m<n;m++)u+=Ps(i,e[m]);let h=Math.ceil(u*1.5/8),c=[],f=[];function d(m,v,p,g,k){for(let S=p;S<g;){let w=S,A=v[S],_=Ps(i,m[S]);for(S++;S<g;S++){let W=Ps(i,m[S]);if(_+W>=h)break;_+=W}if(S==w+1){if(_>h){let W=m[w];d(W.children,W.positions,0,W.children.length,v[w]+k);continue}c.push(m[w])}else{let W=v[S-1]+m[S-1].length-A;c.push(Ol(i,m,v,w,S,A,W,null,o))}f.push(A+k-s)}}return d(e,t,r,n,0),(l||o)(c,f,a)}var yr=class{constructor(e,t,r,n,s=!1,a=!1){this.from=e,this.to=t,this.tree=r,this.offset=n,this.open=(s?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let n=[new yr(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,r=128){if(!t.length)return e;let n=[],s=1,a=e.length?e[0]:null;for(let l=0,o=0,u=0;;l++){let h=l<t.length?t[l]:null,c=h?h.fromA:1e9;if(c-o>=r)for(;a&&a.from<c;){let f=a;if(o>=f.from||c<=f.to||u){let d=Math.max(f.from,o)-u,m=Math.min(f.to,c)-u;f=d>=m?null:new yr(d,m,f.tree,f.offset+u,l>0,!!h)}if(f&&n.push(f),a.to>c)break;a=s<e.length?e[s++]:null}if(!h)break;o=h.toA,u=h.toA-h.toB}return n}},_s=class{startParse(e,t,r){return typeof e=="string"&&(e=new Tl(e)),r=r?r.length?r.map(n=>new Pn(n.from,n.to)):[new Pn(0,0)]:[new Pn(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let n=this.startParse(e,t,r);for(;;){let s=n.advance();if(s)return s}}},Tl=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};var Jb=new _e({perNode:!0});var v0=0,sr=class{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=v0++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new sr([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new ji;return t=>t.modified.indexOf(e)>-1?t:ji.get(t.base||t,t.modified.concat(e).sort((r,n)=>r.id-n.id))}},g0=0,ji=class{constructor(){this.instances=[],this.id=g0++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(l=>l.base==e&&b0(t,l.modified));if(r)return r;let n=[],s=new sr(n,e,t);for(let l of t)l.instances.push(s);let a=mc(t);for(let l of e.set)for(let o of a)n.push(ji.get(l,o));return s}};function b0(i,e){return i.length==e.length&&i.every((t,r)=>t==e[r])}function mc(i){let e=[i];for(let t=0;t<i.length;t++)for(let r of mc(i.slice(0,t).concat(i.slice(t+1))))e.push(r);return e}function pc(i){let e=Object.create(null);for(let t in i){let r=i[t];Array.isArray(r)||(r=[r]);for(let n of t.split(" "))if(n){let s=[],a=2,l=n;for(let c=0;;){if(l=="..."&&c>0&&c+3==n.length){a=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!f)throw new RangeError("Invalid path: "+n);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),c+=f[0].length,c==n.length)break;let d=n[c++];if(c==n.length&&d=="!"){a=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(c)}let o=s.length-1,u=s[o];if(!u)throw new RangeError("Invalid path: "+n);let h=new Vi(r,a,o>0?s.slice(0,o):null);e[u]=h.sort(e[u])}}return vc.add(e)}var vc=new _e,Vi=class{constructor(e,t,r,n){this.tags=e,this.mode=t,this.context=r,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};Vi.empty=new Vi([],2,null);function Fl(i,e){let t=Object.create(null);for(let s of i)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let a of s.tag)t[a.id]=s.class;let{scope:r,all:n=null}=e||{};return{style:s=>{let a=n;for(let l of s)for(let o of l.set){let u=t[o.id];if(u){a=a?a+" "+u:u;break}}return a},scope:r}}function $0(i,e){let t=null;for(let r of i){let n=r.style(e);n&&(t=t?t+" "+n:n)}return t}function gc(i,e,t,r=0,n=i.length){let s=new El(r,Array.isArray(e)?e:[e],t);s.highlightRange(i.cursor(),r,n,"",s.highlighters),s.flush(n)}var El=class{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,n,s){let{type:a,from:l,to:o}=e;if(l>=r||o<=t)return;a.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(a)));let u=n,h=k0(e)||Vi.empty,c=$0(s,h.tags);if(c&&(u&&(u+=" "),u+=c,h.mode==1&&(n+=(n?" ":"")+c)),this.startSpan(e.from,u),h.opaque)return;let f=e.tree&&e.tree.prop(_e.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+l,1),m=this.highlighters.filter(p=>!p.scope||p.scope(f.tree.type)),v=e.firstChild();for(let p=0,g=l;;p++){let k=p<f.overlay.length?f.overlay[p]:null,S=k?k.from+l:o,w=Math.max(t,g),A=Math.min(r,S);if(w<A&&v)for(;e.from<A&&(this.highlightRange(e,w,A,n,s),this.startSpan(Math.min(r,e.to),u),!(e.to>=S||!e.nextSibling())););if(!k||S>r)break;g=k.to+l,g>t&&(this.highlightRange(d.cursor(),Math.max(t,k.from+l),Math.min(r,g),n,m),this.startSpan(g,u))}v&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,n,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}};function k0(i){let e=i.type.prop(vc);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}var ee=sr.define,Is=ee(),jr=ee(),fc=ee(jr),dc=ee(jr),Vr=ee(),Ds=ee(Vr),Wl=ee(Vr),Ar=ee(),mi=ee(Ar),Pr=ee(),Cr=ee(),Ll=ee(),An=ee(Ll),Ms=ee(),ie={comment:Is,lineComment:ee(Is),blockComment:ee(Is),docComment:ee(Is),name:jr,variableName:ee(jr),typeName:fc,tagName:ee(fc),propertyName:dc,attributeName:ee(dc),className:ee(jr),labelName:ee(jr),namespace:ee(jr),macroName:ee(jr),literal:Vr,string:Ds,docString:ee(Ds),character:ee(Ds),attributeValue:ee(Ds),number:Wl,integer:ee(Wl),float:ee(Wl),bool:ee(Vr),regexp:ee(Vr),escape:ee(Vr),color:ee(Vr),url:ee(Vr),keyword:Pr,self:ee(Pr),null:ee(Pr),atom:ee(Pr),unit:ee(Pr),modifier:ee(Pr),operatorKeyword:ee(Pr),controlKeyword:ee(Pr),definitionKeyword:ee(Pr),moduleKeyword:ee(Pr),operator:Cr,derefOperator:ee(Cr),arithmeticOperator:ee(Cr),logicOperator:ee(Cr),bitwiseOperator:ee(Cr),compareOperator:ee(Cr),updateOperator:ee(Cr),definitionOperator:ee(Cr),typeOperator:ee(Cr),controlOperator:ee(Cr),punctuation:Ll,separator:ee(Ll),bracket:An,angleBracket:ee(An),squareBracket:ee(An),paren:ee(An),brace:ee(An),content:Ar,heading:mi,heading1:ee(mi),heading2:ee(mi),heading3:ee(mi),heading4:ee(mi),heading5:ee(mi),heading6:ee(mi),contentSeparator:ee(Ar),list:ee(Ar),quote:ee(Ar),emphasis:ee(Ar),strong:ee(Ar),link:ee(Ar),monospace:ee(Ar),strikethrough:ee(Ar),inserted:ee(),deleted:ee(),changed:ee(),invalid:ee(),meta:Ms,documentMeta:ee(Ms),annotation:ee(Ms),processingInstruction:ee(Ms),definition:sr.defineModifier(),constant:sr.defineModifier(),function:sr.defineModifier(),standard:sr.defineModifier(),local:sr.defineModifier(),special:sr.defineModifier()},Hb=Fl([{tag:ie.link,class:"tok-link"},{tag:ie.heading,class:"tok-heading"},{tag:ie.emphasis,class:"tok-emphasis"},{tag:ie.strong,class:"tok-strong"},{tag:ie.keyword,class:"tok-keyword"},{tag:ie.atom,class:"tok-atom"},{tag:ie.bool,class:"tok-bool"},{tag:ie.url,class:"tok-url"},{tag:ie.labelName,class:"tok-labelName"},{tag:ie.inserted,class:"tok-inserted"},{tag:ie.deleted,class:"tok-deleted"},{tag:ie.literal,class:"tok-literal"},{tag:ie.string,class:"tok-string"},{tag:ie.number,class:"tok-number"},{tag:[ie.regexp,ie.escape,ie.special(ie.string)],class:"tok-string2"},{tag:ie.variableName,class:"tok-variableName"},{tag:ie.local(ie.variableName),class:"tok-variableName tok-local"},{tag:ie.definition(ie.variableName),class:"tok-variableName tok-definition"},{tag:ie.special(ie.variableName),class:"tok-variableName2"},{tag:ie.definition(ie.propertyName),class:"tok-propertyName tok-definition"},{tag:ie.typeName,class:"tok-typeName"},{tag:ie.namespace,class:"tok-namespace"},{tag:ie.className,class:"tok-className"},{tag:ie.macroName,class:"tok-macroName"},{tag:ie.propertyName,class:"tok-propertyName"},{tag:ie.operator,class:"tok-operator"},{tag:ie.comment,class:"tok-comment"},{tag:ie.meta,class:"tok-meta"},{tag:ie.invalid,class:"tok-invalid"},{tag:ie.punctuation,class:"tok-punctuation"}]);var Jl,Ts=new _e;var ar=class{constructor(e,t,r=[]){this.data=e,Ae.prototype.hasOwnProperty("tree")||Object.defineProperty(Ae.prototype,"tree",{get(){return $t(this)}}),this.parser=t,this.extension=[Gr.of(this),Ae.languageData.of((n,s,a)=>n.facet(bc(n,s,a)))].concat(r)}isActiveAt(e,t,r=-1){return bc(e,t,r)==this.data}findRegions(e){let t=e.facet(Gr);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],n=(s,a)=>{if(s.prop(Ts)==this.data){r.push({from:a,to:a+s.length});return}let l=s.prop(_e.mounted);if(l){if(l.tree.prop(Ts)==this.data){if(l.overlay)for(let o of l.overlay)r.push({from:o.from+a,to:o.to+a});else r.push({from:a,to:a+s.length});return}else if(l.overlay){let o=r.length;if(n(l.tree,l.overlay[0].from+a),r.length>o)return}}for(let o=0;o<s.children.length;o++){let u=s.children[o];u instanceof mt&&n(u,s.positions[o]+a)}};return n($t(e),0),r}get allowsNesting(){return!0}};ar.setState=we.define();function bc(i,e,t){let r=i.facet(Gr);if(!r)return null;let n=r.data;if(r.allowsNesting)for(let s=$t(i).topNode;s;s=s.enter(e,t,St.ExcludeBuffers))n=s.type.prop(Ts)||n;return n}function $t(i){let e=i.field(ar.state,!1);return e?e.tree:mt.empty}var jl=class{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}},_n=null,zi=class{constructor(e,t,r=[],n,s,a,l,o){this.parser=e,this.state=t,this.fragments=r,this.tree=n,this.treeLen=s,this.viewport=a,this.skipped=l,this.scheduleOn=o,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new zi(e,t,[],mt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new jl(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=mt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(yr.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(yr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=_n;_n=this;try{return e()}finally{_n=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=$c(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:n,treeLen:s,viewport:a,skipped:l}=this;if(this.takeTree(),!e.empty){let o=[];if(e.iterChangedRanges((u,h,c,f)=>o.push({fromA:u,toA:h,fromB:c,toB:f})),r=yr.applyChanges(r,o),n=mt.empty,s=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let h=e.mapPos(u.from,1),c=e.mapPos(u.to,-1);h<c&&l.push({from:h,to:c})}}}return new zi(this.parser,t,r,n,s,a,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:n,to:s}=this.skipped[r];n<e.to&&s>e.from&&(this.fragments=$c(this.fragments,n,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends _s{createParse(t,r,n){let s=n[0].from,a=n[n.length-1].to;return{parsedPos:s,advance(){let o=_n;if(o){for(let u of n)o.tempSkipped.push(u);e&&(o.scheduleOn=o.scheduleOn?Promise.all([o.scheduleOn,e]):e)}return this.parsedPos=a,new mt(Jt.none,[],[],a-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return _n}};function $c(i,e,t){return yr.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}var zr=class{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new zr(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=zi.create(e.facet(Gr).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new zr(r)}};ar.state=Ue.define({create:zr.init,update(i,e){for(let t of e.effects)if(t.is(ar.setState))return t.value;return e.startState.facet(Gr)!=e.state.facet(Gr)?zr.init(e.state):i.apply(e)}});var Sc=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Sc=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});var Rl=typeof navigator<"u"&&((Jl=navigator.scheduling)===null||Jl===void 0?void 0:Jl.isInputPending)?()=>navigator.scheduling.isInputPending():null,w0=Ze.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ar.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ar.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Sc(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:n}}=this.view,s=r.field(ar.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Rl?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<n&&r.doc.length>n+1e3,o=s.context.work(()=>Rl&&Rl()||Date.now()>a,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(o||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ar.setState.of(new zr(s.context))})),this.chunkBudget>0&&!(o&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>_t(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Gr=le.define({combine(i){return i.length?i[0]:null},enables:[ar.state,w0]});var x0=le.define(),Mn=le.define({combine:i=>{if(!i.length)return"  ";if(!/^(?: +|\t+)$/.test(i[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return i[0]}});function Tn(i){let e=i.facet(Mn);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function Ki(i,e){let t="",r=i.tabSize;if(i.facet(Mn).charCodeAt(0)==9)for(;e>=r;)t+="	",e-=r;for(let n=0;n<e;n++)t+=" ";return t}function Ws(i,e){i instanceof Ae&&(i=new pi(i));for(let r of i.state.facet(x0)){let n=r(i,e);if(n!=null)return n}let t=$t(i.state);return t?y0(i,t,e):null}var pi=class{constructor(e,t={}){this.state=e,this.options=t,this.unit=Tn(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:s}=this.options;return n!=null&&n>=r.from&&n<=r.to?s&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:r.text.slice(n-r.from),from:n}:{text:r.text.slice(0,n-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:n}=this.lineAt(e,t);return r.slice(e-n,Math.min(r.length,e+100-n))}column(e,t=1){let{text:r,from:n}=this.lineAt(e,t),s=this.countColumn(r,e-n),a=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return a>-1&&(s+=a-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return Fr(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:n}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let a=s(n);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},S0=new _e;function y0(i,e,t){return yc(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,i)}function P0(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function C0(i){let e=i.type.prop(S0);if(e)return e;let t=i.firstChild,r;if(t&&(r=t.type.prop(_e.closedBy))){let n=i.lastChild,s=n&&r.indexOf(n.name)>-1;return a=>D0(a,!0,1,void 0,s&&!P0(a)?n.from:void 0)}return i.parent==null?A0:null}function yc(i,e,t){for(;i;i=i.parent){let r=C0(i);if(r)return r(Dn.create(t,e,i))}return null}function A0(){return 0}var Dn=class extends pi{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.node=r}static create(e,t,r){return new Dn(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(_0(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?yc(e,this.pos,this.base):0}};function _0(i,e){for(let t=e;t;t=t.parent)if(i==t)return!0;return!1}function I0(i){let e=i.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let n=i.options.simulateBreak,s=i.state.doc.lineAt(t.from),a=n==null||n<=s.from?s.to:Math.min(s.to,n);for(let l=t.to;;){let o=e.childAfter(l);if(!o||o==r)return null;if(!o.type.isSkipped)return o.from<a?t:null;l=o.to}}function D0(i,e,t,r,n){let s=i.textAfter,a=s.match(/^\s*/)[0].length,l=r&&s.slice(a,a+r.length)==r||n==i.pos+a,o=e?I0(i):null;return o?l?i.column(o.from):i.column(o.to):i.baseIndent+(l?0:i.unit*t)}var M0=200;function Pc(){return Ae.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let e=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!e.length)return i;let t=i.newDoc,{head:r}=i.newSelection.main,n=t.lineAt(r);if(r>n.from+M0)return i;let s=t.sliceString(n.from,r);if(!e.some(u=>u.test(s)))return i;let{state:a}=i,l=-1,o=[];for(let{head:u}of a.selection.ranges){let h=a.doc.lineAt(u);if(h.from==l)continue;l=h.from;let c=Ws(a,h.from);if(c==null)continue;let f=/^\s*/.exec(h.text)[0],d=Ki(a,c);f!=d&&o.push({from:h.from,to:h.from+f.length,insert:d})}return o.length?[i,{changes:o,sequential:!0}]:i})}var T0=le.define(),B0=new _e;function O0(i,e,t){let r=$t(i);if(r.length<t)return null;let n=r.resolveInner(t),s=null;for(let a=n;a;a=a.parent){if(a.to<=t||a.from>t)continue;if(s&&a.from<e)break;let l=a.type.prop(B0);if(l&&(a.to<r.length-50||r.length==i.doc.length||!W0(a))){let o=l(a,i);o&&o.from<=t&&o.from>=e&&o.to>t&&(s=o)}}return s}function W0(i){let e=i.lastChild;return e&&e.to==i.to&&e.type.isError}function Bs(i,e,t){for(let r of i.facet(T0)){let n=r(i,e,t);if(n)return n}return O0(i,e,t)}function Cc(i,e){let t=e.mapPos(i.from,1),r=e.mapPos(i.to,-1);return t>=r?void 0:{from:t,to:r}}var Es=we.define({map:Cc}),Bn=we.define({map:Cc});function Ac(i){let e=[];for(let{head:t}of i.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(i.lineBlockAt(t));return e}var vi=Ue.define({create(){return me.none},update(i,e){i=i.map(e.changes);for(let t of e.effects)t.is(Es)&&!E0(i,t.value.from,t.value.to)?i=i.update({add:[kc.range(t.value.from,t.value.to)]}):t.is(Bn)&&(i=i.update({filter:(r,n)=>t.value.from!=r||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;i.between(r,r,(n,s)=>{n<r&&s>r&&(t=!0)}),t&&(i=i.update({filterFrom:r,filterTo:r,filter:(n,s)=>s<=r||n>=r}))}return i},provide:i=>oe.decorations.from(i),toJSON(i,e){let t=[];return i.between(0,e.doc.length,(r,n)=>{t.push(r,n)}),t},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<i.length;){let r=i[t++],n=i[t++];if(typeof r!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(kc.range(r,n))}return me.set(e,!0)}});function Os(i,e,t){var r;let n=null;return(r=i.field(vi,!1))===null||r===void 0||r.between(e,t,(s,a)=>{(!n||n.from>s)&&(n={from:s,to:a})}),n}function E0(i,e,t){let r=!1;return i.between(e,e,(n,s)=>{n==e&&s==t&&(r=!0)}),r}function _c(i,e){return i.field(vi,!1)?e:e.concat(we.appendConfig.of(Tc()))}var L0=i=>{for(let e of Ac(i)){let t=Bs(i.state,e.from,e.to);if(t)return i.dispatch({effects:_c(i.state,[Es.of(t),Ic(i,t)])}),!0}return!1},F0=i=>{if(!i.state.field(vi,!1))return!1;let e=[];for(let t of Ac(i)){let r=Os(i.state,t.from,t.to);r&&e.push(Bn.of(r),Ic(i,r,!1))}return e.length&&i.dispatch({effects:e}),e.length>0};function Ic(i,e,t=!0){let r=i.state.doc.lineAt(e.from).number,n=i.state.doc.lineAt(e.to).number;return oe.announce.of(`${i.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${i.state.phrase("to")} ${n}.`)}var J0=i=>{let{state:e}=i,t=[];for(let r=0;r<e.doc.length;){let n=i.lineBlockAt(r),s=Bs(e,n.from,n.to);s&&t.push(Es.of(s)),r=(s?i.lineBlockAt(s.to):n).to+1}return t.length&&i.dispatch({effects:_c(i.state,t)}),!!t.length},R0=i=>{let e=i.state.field(vi,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,i.state.doc.length,(r,n)=>{t.push(Bn.of({from:r,to:n}))}),i.dispatch({effects:t}),!0},Dc=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:L0},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:F0},{key:"Ctrl-Alt-[",run:J0},{key:"Ctrl-Alt-]",run:R0}],N0={placeholderDOM:null,placeholderText:"\u2026"},Mc=le.define({combine(i){return At(i,N0)}});function Tc(i){let e=[vi,j0];return i&&e.push(Mc.of(i)),e}var kc=me.replace({widget:new class extends Kt{toDOM(i){let{state:e}=i,t=e.facet(Mc),r=s=>{let a=i.lineBlockAt(i.posAtDOM(s.target)),l=Os(i.state,a.from,a.to);l&&i.dispatch({effects:Bn.of(l)}),s.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(i,r);let n=document.createElement("span");return n.textContent=t.placeholderText,n.setAttribute("aria-label",e.phrase("folded code")),n.title=e.phrase("unfold"),n.className="cm-foldPlaceholder",n.onclick=r,n}}}),H0={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1},In=class extends Qt{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}};function Bc(i={}){let e=Object.assign(Object.assign({},H0),i),t=new In(e,!0),r=new In(e,!1),n=Ze.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(Gr)!=a.state.facet(Gr)||a.startState.field(vi,!1)!=a.state.field(vi,!1)||$t(a.startState)!=$t(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let l=new zt;for(let o of a.viewportLineBlocks){let u=Os(a.state,o.from,o.to)?r:Bs(a.state,o.from,o.to)?t:null;u&&l.add(o.from,o.from,u)}return l.finish()}}),{domEventHandlers:s}=e;return[n,Dl({class:"cm-foldGutter",markers(a){var l;return((l=a.plugin(n))===null||l===void 0?void 0:l.markers)||Ie.empty},initialSpacer(){return new In(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(a,l,o)=>{if(s.click&&s.click(a,l,o))return!0;let u=Os(a.state,l.from,l.to);if(u)return a.dispatch({effects:Bn.of(u)}),!0;let h=Bs(a.state,l.from,l.to);return h?(a.dispatch({effects:Es.of(h)}),!0):!1}})}),Tc()]}var j0=oe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),Gi=class{constructor(e,t){let r;function n(l){let o=ir.newName();return(r||(r=Object.create(null)))["."+o]=l,o}let s=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,a=t.scope;this.scope=a instanceof ar?l=>l.prop(Ts)==a.data:a?l=>l==a:void 0,this.style=Fl(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=r?new ir(r):null,this.themeType=t.themeType}static define(e,t){return new Gi(e,t||{})}},Vl=le.define(),Oc=le.define({combine(i){return i.length?[i[0]]:null}});function Nl(i){let e=i.facet(Vl);return e.length?e:i.facet(Oc)}function Wc(i,e){let t=[V0],r;return i instanceof Gi&&(i.module&&t.push(oe.styleModule.of(i.module)),r=i.themeType),e?.fallback?t.push(Oc.of(i)):r?t.push(Vl.computeN([oe.darkTheme],n=>n.facet(oe.darkTheme)==(r=="dark")?[i]:[])):t.push(Vl.of(i)),t}var zl=class{constructor(e){this.markCache=Object.create(null),this.tree=$t(e.state),this.decorations=this.buildDeco(e,Nl(e.state))}update(e){let t=$t(e.state),r=Nl(e.state),n=r!=Nl(e.startState);t.length<e.view.viewport.to&&!n&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,t){if(!t||!this.tree.length)return me.none;let r=new zt;for(let{from:n,to:s}of e.visibleRanges)gc(this.tree,t,(a,l,o)=>{r.add(a,l,this.markCache[o]||(this.markCache[o]=me.mark({class:o})))},n,s);return r.finish()}},V0=br.high(Ze.fromClass(zl,{decorations:i=>i.decorations})),Ec=Gi.define([{tag:ie.meta,color:"#7a757a"},{tag:ie.link,textDecoration:"underline"},{tag:ie.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ie.emphasis,fontStyle:"italic"},{tag:ie.strong,fontWeight:"bold"},{tag:ie.strikethrough,textDecoration:"line-through"},{tag:ie.keyword,color:"#708"},{tag:[ie.atom,ie.bool,ie.url,ie.contentSeparator,ie.labelName],color:"#219"},{tag:[ie.literal,ie.inserted],color:"#164"},{tag:[ie.string,ie.deleted],color:"#a11"},{tag:[ie.regexp,ie.escape,ie.special(ie.string)],color:"#e40"},{tag:ie.definition(ie.variableName),color:"#00f"},{tag:ie.local(ie.variableName),color:"#30a"},{tag:[ie.typeName,ie.namespace],color:"#085"},{tag:ie.className,color:"#167"},{tag:[ie.special(ie.variableName),ie.macroName],color:"#256"},{tag:ie.definition(ie.propertyName),color:"#00c"},{tag:ie.comment,color:"#940"},{tag:ie.invalid,color:"#f00"}]),z0=oe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Lc=1e4,Fc="()[]{}",Jc=le.define({combine(i){return At(i,{afterCursor:!0,brackets:Fc,maxScanDistance:Lc,renderMatch:Q0})}}),G0=me.mark({class:"cm-matchingBracket"}),K0=me.mark({class:"cm-nonmatchingBracket"});function Q0(i){let e=[],t=i.matched?G0:K0;return e.push(t.range(i.start.from,i.start.to)),i.end&&e.push(t.range(i.end.from,i.end.to)),e}var q0=Ue.define({create(){return me.none},update(i,e){if(!e.docChanged&&!e.selection)return i;let t=[],r=e.state.facet(Jc);for(let n of e.state.selection.ranges){if(!n.empty)continue;let s=vr(e.state,n.head,-1,r)||n.head>0&&vr(e.state,n.head-1,1,r)||r.afterCursor&&(vr(e.state,n.head,1,r)||n.head<e.state.doc.length&&vr(e.state,n.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return me.set(t,!0)},provide:i=>oe.decorations.from(i)}),Z0=[q0,z0];function Rc(i={}){return[Jc.of(i),Z0]}function Gl(i,e,t){let r=i.prop(e<0?_e.openedBy:_e.closedBy);if(r)return r;if(i.name.length==1){let n=t.indexOf(i.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function vr(i,e,t,r={}){let n=r.maxScanDistance||Lc,s=r.brackets||Fc,a=$t(i),l=a.resolveInner(e,t);for(let o=l;o;o=o.parent){let u=Gl(o.type,t,s);if(u&&o.from<o.to)return X0(i,e,t,o,u,s)}return U0(i,e,t,a,l.type,n,s)}function X0(i,e,t,r,n,s){let a=r.parent,l={from:r.from,to:r.to},o=0,u=a?.cursor();if(u&&(t<0?u.childBefore(r.from):u.childAfter(r.to)))do if(t<0?u.to<=r.from:u.from>=r.to){if(o==0&&n.indexOf(u.type.name)>-1&&u.from<u.to)return{start:l,end:{from:u.from,to:u.to},matched:!0};if(Gl(u.type,t,s))o++;else if(Gl(u.type,-t,s)){if(o==0)return{start:l,end:u.from==u.to?void 0:{from:u.from,to:u.to},matched:!1};o--}}while(t<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function U0(i,e,t,r,n,s,a){let l=t<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),o=a.indexOf(l);if(o<0||o%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},h=i.doc.iterRange(e,t>0?i.doc.length:0),c=0;for(let f=0;!h.next().done&&f<=s;){let d=h.value;t<0&&(f+=d.length);let m=e+f*t;for(let v=t>0?0:d.length-1,p=t>0?d.length:-1;v!=p;v+=t){let g=a.indexOf(d[v]);if(!(g<0||r.resolveInner(m+v,1).type!=n))if(g%2==0==t>0)c++;else{if(c==1)return{start:u,end:{from:m+v,to:m+v+1},matched:g>>1==o>>1};c--}}t>0&&(f+=d.length)}return h.done?{start:u,matched:!1}:null}var Y0=Object.create(null),wc=[Jt.none];var xc=[],ev=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ev[i]=tv(Y0,e);function Hl(i,e){xc.indexOf(i)>-1||(xc.push(i),console.warn(e))}function tv(i,e){let t=null;for(let s of e.split(".")){let a=i[s]||ie[s];a?typeof a=="function"?t?t=a(t):Hl(s,`Modifier ${s} used at start of tag`):t?Hl(s,`Tag ${s} used as modifier`):t=a:Hl(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let r=e.replace(/ /g,"_"),n=Jt.define({id:wc.length,name:r,props:[pc({[r]:t})]});return wc.push(n),n.id}var rv=i=>{let e=Yl(i.state);return e.line?iv(i):e.block?sv(i):!1};function Ul(i,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let n=i(e,t);return n?(r(t.update(n)),!0):!1}}var iv=Ul(ov,0);var nv=Ul(Qc,0);var sv=Ul((i,e)=>Qc(i,e,lv(e)),0);function Yl(i,e=i.selection.main.head){let t=i.languageDataAt("commentTokens",e);return t.length?t[0]:{}}var On=50;function av(i,{open:e,close:t},r,n){let s=i.sliceDoc(r-On,r),a=i.sliceDoc(n,n+On),l=/\s*$/.exec(s)[0].length,o=/^\s*/.exec(a)[0].length,u=s.length-l;if(s.slice(u-e.length,u)==e&&a.slice(o,o+t.length)==t)return{open:{pos:r-l,margin:l&&1},close:{pos:n+o,margin:o&&1}};let h,c;n-r<=2*On?h=c=i.sliceDoc(r,n):(h=i.sliceDoc(r,r+On),c=i.sliceDoc(n-On,n));let f=/^\s*/.exec(h)[0].length,d=/\s*$/.exec(c)[0].length,m=c.length-d-t.length;return h.slice(f,f+e.length)==e&&c.slice(m,m+t.length)==t?{open:{pos:r+f+e.length,margin:/\s/.test(h.charAt(f+e.length))?1:0},close:{pos:n-d-t.length,margin:/\s/.test(c.charAt(m-1))?1:0}}:null}function lv(i){let e=[];for(let t of i.selection.ranges){let r=i.doc.lineAt(t.from),n=t.to<=r.to?r:i.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=n.to:e.push({from:r.from,to:n.to})}return e}function Qc(i,e,t=e.selection.ranges){let r=t.map(s=>Yl(e,s.from).block);if(!r.every(s=>s))return null;let n=t.map((s,a)=>av(e,r[a],s.from,s.to));if(i!=2&&!n.every(s=>s))return{changes:e.changes(t.map((s,a)=>n[a]?[]:[{from:s.from,insert:r[a].open+" "},{from:s.to,insert:" "+r[a].close}]))};if(i!=1&&n.some(s=>s)){let s=[];for(let a=0,l;a<n.length;a++)if(l=n[a]){let o=r[a],{open:u,close:h}=l;s.push({from:u.pos-o.open.length,to:u.pos+u.margin},{from:h.pos-h.margin,to:h.pos+o.close.length})}return{changes:s}}return null}function ov(i,e,t=e.selection.ranges){let r=[],n=-1;for(let{from:s,to:a}of t){let l=r.length,o=1e9;for(let u=s;u<=a;){let h=e.doc.lineAt(u);if(h.from>n&&(s==a||a>h.from)){n=h.from;let c=Yl(e,u).line;if(!c)continue;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,m=h.text.slice(f,f+c.length)==c?f:-1;f<h.text.length&&f<o&&(o=f),r.push({line:h,comment:m,token:c,indent:f,empty:d,single:!1})}u=h.to+1}if(o<1e9)for(let u=l;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=o);r.length==l+1&&(r[l].single=!0)}if(i!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:o,indent:u,empty:h,single:c}of r)(c||!h)&&s.push({from:l.from+u,insert:o+" "});let a=e.changes(s);return{changes:a,selection:e.selection.map(a,1)}}else if(i!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:a,comment:l,token:o}of r)if(l>=0){let u=a.from+l,h=u+o.length;a.text[h-a.from]==" "&&h++,s.push({from:u,to:h})}return{changes:s}}return null}var Ql=fr.define(),uv=fr.define(),hv=le.define(),qc=le.define({combine(i){return At(i,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function cv(i){let e=0;return i.iterChangedRanges((t,r)=>e=r),e}var Zc=Ue.define({create(){return or.empty},update(i,e){let t=e.state.facet(qc),r=e.annotation(Ql);if(r){let o=e.docChanged?j.single(cv(e.changes)):void 0,u=Dt.fromTransaction(e,o),h=r.side,c=h==0?i.undone:i.done;return u?c=Fs(c,c.length,t.minDepth,u):c=ef(c,e.startState.selection),new or(h==0?r.rest:c,h==0?c:r.rest)}let n=e.annotation(uv);if((n=="full"||n=="before")&&(i=i.isolate()),e.annotation(nt.addToHistory)===!1)return e.changes.empty?i:i.addMapping(e.changes.desc);let s=Dt.fromTransaction(e),a=e.annotation(nt.time),l=e.annotation(nt.userEvent);return s?i=i.addChanges(s,a,l,t.newGroupDelay,t.minDepth):e.selection&&(i=i.addSelection(e.startState.selection,a,l,t.newGroupDelay)),(n=="full"||n=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(e=>e.toJSON()),undone:i.undone.map(e=>e.toJSON())}},fromJSON(i){return new or(i.done.map(Dt.fromJSON),i.undone.map(Dt.fromJSON))}});function Xc(i={}){return[Zc,qc.of(i),oe.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?Uc:e.inputType=="historyRedo"?ql:null;return r?(e.preventDefault(),r(t)):!1}})]}function Js(i,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let n=t.field(Zc,!1);if(!n)return!1;let s=n.pop(i,t,e);return s?(r(s),!0):!1}}var Uc=Js(0,!1),ql=Js(1,!1),fv=Js(0,!0),dv=Js(1,!0);var Dt=class{constructor(e,t,r,n,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=n,this.selectionsAfter=s}setSelAfter(e){return new Dt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new Dt(e.changes&&it.fromJSON(e.changes),[],e.mapped&&Vt.fromJSON(e.mapped),e.startSelection&&j.fromJSON(e.startSelection),e.selectionsAfter.map(j.fromJSON))}static fromTransaction(e,t){let r=lr;for(let n of e.startState.facet(hv)){let s=n(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Dt(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,lr)}static selection(e){return new Dt(void 0,lr,void 0,void 0,e)}};function Fs(i,e,t,r){let n=e+1>t+20?e-t-1:0,s=i.slice(n,e);return s.push(r),s}function mv(i,e){let t=[],r=!1;return i.iterChangedRanges((n,s)=>t.push(n,s)),e.iterChangedRanges((n,s,a,l)=>{for(let o=0;o<t.length;){let u=t[o++],h=t[o++];l>=u&&a<=h&&(r=!0)}}),r}function pv(i,e){return i.ranges.length==e.ranges.length&&i.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function Yc(i,e){return i.length?e.length?i.concat(e):i:e}var lr=[],vv=200;function ef(i,e){if(i.length){let t=i[i.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-vv));return r.length&&r[r.length-1].eq(e)?i:(r.push(e),Fs(i,i.length-1,1e9,t.setSelAfter(r)))}else return[Dt.selection([e])]}function gv(i){let e=i[i.length-1],t=i.slice();return t[i.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Kl(i,e){if(!i.length)return i;let t=i.length,r=lr;for(;t;){let n=bv(i[t-1],e,r);if(n.changes&&!n.changes.empty||n.effects.length){let s=i.slice(0,t);return s[t-1]=n,s}else e=n.mapped,t--,r=n.selectionsAfter}return r.length?[Dt.selection(r)]:lr}function bv(i,e,t){let r=Yc(i.selectionsAfter.length?i.selectionsAfter.map(l=>l.map(e)):lr,t);if(!i.changes)return Dt.selection(r);let n=i.changes.map(e),s=e.mapDesc(i.changes,!0),a=i.mapped?i.mapped.composeDesc(s):s;return new Dt(n,we.mapEffects(i.effects,e),a,i.startSelection.map(s),r)}var $v=/^(input\.type|delete)($|\.)/,or=class{constructor(e,t,r=0,n=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=n}isolate(){return this.prevTime?new or(this.done,this.undone):this}addChanges(e,t,r,n,s){let a=this.done,l=a[a.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||$v.test(r))&&(!l.selectionsAfter.length&&t-this.prevTime<n&&mv(l.changes,e.changes)||r=="input.type.compose")?a=Fs(a,a.length-1,s,new Dt(e.changes.compose(l.changes),Yc(e.effects,l.effects),l.mapped,l.startSelection,lr)):a=Fs(a,a.length,s,e),new or(a,lr,t,r)}addSelection(e,t,r,n){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:lr;return s.length>0&&t-this.prevTime<n&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&pv(s[s.length-1],e)?this:new or(ef(this.done,e),this.undone,t,r)}addMapping(e){return new or(Kl(this.done,e),Kl(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let n=e==0?this.done:this.undone;if(n.length==0)return null;let s=n[n.length-1];if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Ql.of({side:e,rest:gv(n)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=n.length==1?lr:n.slice(0,n.length-1);return s.mapped&&(a=Kl(a,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Ql.of({side:e,rest:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};or.empty=new or(lr,lr);var tf=[{key:"Mod-z",run:Uc,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ql,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ql,preventDefault:!0},{key:"Mod-u",run:fv,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:dv,preventDefault:!0}];function Qi(i,e){return j.create(i.ranges.map(e),i.mainIndex)}function _r(i,e){return i.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function gr({state:i,dispatch:e},t){let r=Qi(i.selection,t);return r.eq(i.selection)?!1:(e(_r(i,r)),!0)}function Rs(i,e){return j.cursor(e?i.to:i.from)}function rf(i,e){return gr(i,t=>t.empty?i.moveByChar(t,e):Rs(t,e))}function Mt(i){return i.textDirectionAt(i.state.selection.main.head)==et.LTR}var nf=i=>rf(i,!Mt(i)),sf=i=>rf(i,Mt(i));function af(i,e){return gr(i,t=>t.empty?i.moveByGroup(t,e):Rs(t,e))}var kv=i=>af(i,!Mt(i)),wv=i=>af(i,Mt(i));function xv(i,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(i.sliceDoc(e.from,e.to)))||e.firstChild}function Ns(i,e,t){let r=$t(i).resolveInner(e.head),n=t?_e.closedBy:_e.openedBy;for(let o=e.head;;){let u=t?r.childAfter(o):r.childBefore(o);if(!u)break;xv(i,u,n)?r=u:o=t?u.to:u.from}let s=r.type.prop(n),a,l;return s&&(a=t?vr(i,r.from,1):vr(i,r.to,-1))&&a.matched?l=t?a.end.to:a.end.from:l=t?r.to:r.from,j.cursor(l,t?-1:1)}var Sv=i=>gr(i,e=>Ns(i.state,e,!Mt(i))),yv=i=>gr(i,e=>Ns(i.state,e,Mt(i)));function lf(i,e){return gr(i,t=>{if(!t.empty)return Rs(t,e);let r=i.moveVertically(t,e);return r.head!=t.head?r:i.moveToLineBoundary(t,e)})}var of=i=>lf(i,!1),uf=i=>lf(i,!0);function hf(i){return Math.max(i.defaultLineHeight,Math.min(i.dom.clientHeight,innerHeight)-5)}function cf(i,e){let{state:t}=i,r=Qi(t.selection,l=>l.empty?i.moveVertically(l,e,hf(i)):Rs(l,e));if(r.eq(t.selection))return!1;let n=i.coordsAtPos(t.selection.main.head),s=i.scrollDOM.getBoundingClientRect(),a;return n&&n.top>s.top&&n.bottom<s.bottom&&n.top-s.top<=i.scrollDOM.scrollHeight-i.scrollDOM.scrollTop-i.scrollDOM.clientHeight&&(a=oe.scrollIntoView(r.main.head,{y:"start",yMargin:n.top-s.top})),i.dispatch(_r(t,r),{effects:a}),!0}var Nc=i=>cf(i,!1),Zl=i=>cf(i,!0);function Kr(i,e,t){let r=i.lineBlockAt(e.head),n=i.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?r.to:r.from)&&(n=i.moveToLineBoundary(e,t,!1)),!t&&n.head==r.from&&r.length){let s=/^\s*/.exec(i.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(n=j.cursor(r.from+s))}return n}var Pv=i=>gr(i,e=>Kr(i,e,!0)),Cv=i=>gr(i,e=>Kr(i,e,!1)),Av=i=>gr(i,e=>Kr(i,e,!Mt(i))),_v=i=>gr(i,e=>Kr(i,e,Mt(i))),Iv=i=>gr(i,e=>j.cursor(i.lineBlockAt(e.head).from,1)),Dv=i=>gr(i,e=>j.cursor(i.lineBlockAt(e.head).to,-1));function Mv(i,e,t){let r=!1,n=Qi(i.selection,s=>{let a=vr(i,s.head,-1)||vr(i,s.head,1)||s.head>0&&vr(i,s.head-1,1)||s.head<i.doc.length&&vr(i,s.head+1,-1);if(!a||!a.end)return s;r=!0;let l=a.start.from==s.head?a.end.to:a.end.from;return t?j.range(s.anchor,l):j.cursor(l)});return r?(e(_r(i,n)),!0):!1}var Tv=({state:i,dispatch:e})=>Mv(i,e,!1);function ur(i,e){let t=Qi(i.state.selection,r=>{let n=e(r);return j.range(r.anchor,n.head,n.goalColumn)});return t.eq(i.state.selection)?!1:(i.dispatch(_r(i.state,t)),!0)}function ff(i,e){return ur(i,t=>i.moveByChar(t,e))}var df=i=>ff(i,!Mt(i)),mf=i=>ff(i,Mt(i));function pf(i,e){return ur(i,t=>i.moveByGroup(t,e))}var Bv=i=>pf(i,!Mt(i)),Ov=i=>pf(i,Mt(i));var Wv=i=>ur(i,e=>Ns(i.state,e,!Mt(i))),Ev=i=>ur(i,e=>Ns(i.state,e,Mt(i)));function vf(i,e){return ur(i,t=>i.moveVertically(t,e))}var gf=i=>vf(i,!1),bf=i=>vf(i,!0);function $f(i,e){return ur(i,t=>i.moveVertically(t,e,hf(i)))}var Hc=i=>$f(i,!1),jc=i=>$f(i,!0),Lv=i=>ur(i,e=>Kr(i,e,!0)),Fv=i=>ur(i,e=>Kr(i,e,!1)),Jv=i=>ur(i,e=>Kr(i,e,!Mt(i))),Rv=i=>ur(i,e=>Kr(i,e,Mt(i))),Nv=i=>ur(i,e=>j.cursor(i.lineBlockAt(e.head).from)),Hv=i=>ur(i,e=>j.cursor(i.lineBlockAt(e.head).to)),Vc=({state:i,dispatch:e})=>(e(_r(i,{anchor:0})),!0),zc=({state:i,dispatch:e})=>(e(_r(i,{anchor:i.doc.length})),!0),Gc=({state:i,dispatch:e})=>(e(_r(i,{anchor:i.selection.main.anchor,head:0})),!0),Kc=({state:i,dispatch:e})=>(e(_r(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),jv=({state:i,dispatch:e})=>(e(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),Vv=({state:i,dispatch:e})=>{let t=js(i).map(({from:r,to:n})=>j.range(r,Math.min(n+1,i.doc.length)));return e(i.update({selection:j.create(t),userEvent:"select"})),!0},zv=({state:i,dispatch:e})=>{let t=Qi(i.selection,r=>{var n;let s=$t(i).resolveInner(r.head,1);for(;!(s.from<r.from&&s.to>=r.to||s.to>r.to&&s.from<=r.from||!(!((n=s.parent)===null||n===void 0)&&n.parent));)s=s.parent;return j.range(s.to,s.from)});return e(_r(i,t)),!0},Gv=({state:i,dispatch:e})=>{let t=i.selection,r=null;return t.ranges.length>1?r=j.create([t.main]):t.main.empty||(r=j.create([j.cursor(t.main.head)])),r?(e(_r(i,r)),!0):!1};function Hs(i,e){if(i.state.readOnly)return!1;let t="delete.selection",{state:r}=i,n=r.changeByRange(s=>{let{from:a,to:l}=s;if(a==l){let o=e(a);o<a?(t="delete.backward",o=Ls(i,o,!1)):o>a&&(t="delete.forward",o=Ls(i,o,!0)),a=Math.min(a,o),l=Math.max(l,o)}else a=Ls(i,a,!1),l=Ls(i,l,!0);return a==l?{range:s}:{changes:{from:a,to:l},range:j.cursor(a)}});return n.changes.empty?!1:(i.dispatch(r.update(n,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?oe.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Ls(i,e,t){if(i instanceof oe)for(let r of i.state.facet(oe.atomicRanges).map(n=>n(i)))r.between(e,e,(n,s)=>{n<e&&s>e&&(e=t?s:n)});return e}var kf=(i,e)=>Hs(i,t=>{let{state:r}=i,n=r.doc.lineAt(t),s,a;if(!e&&t>n.from&&t<n.from+200&&!/[^ \t]/.test(s=n.text.slice(0,t-n.from))){if(s[s.length-1]=="	")return t-1;let l=Fr(s,r.tabSize),o=l%Tn(r)||Tn(r);for(let u=0;u<o&&s[s.length-1-u]==" ";u++)t--;a=t}else a=vt(n.text,t-n.from,e,e)+n.from,a==t&&n.number!=(e?r.doc.lines:1)&&(a+=e?1:-1);return a}),Xl=i=>kf(i,!1),wf=i=>kf(i,!0),xf=(i,e)=>Hs(i,t=>{let r=t,{state:n}=i,s=n.doc.lineAt(r),a=n.charCategorizer(r);for(let l=null;;){if(r==(e?s.to:s.from)){r==t&&s.number!=(e?n.doc.lines:1)&&(r+=e?1:-1);break}let o=vt(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,o)-s.from,Math.max(r,o)-s.from),h=a(u);if(l!=null&&h!=l)break;(u!=" "||r!=t)&&(l=h),r=o}return r}),Sf=i=>xf(i,!1),Kv=i=>xf(i,!0),yf=i=>Hs(i,e=>{let t=i.lineBlockAt(e).to;return e<t?t:Math.min(i.state.doc.length,e+1)}),Qv=i=>Hs(i,e=>{let t=i.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)});var qv=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Te.of(["",""])},range:j.cursor(r.from)}));return e(i.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},Zv=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(r=>{if(!r.empty||r.from==0||r.from==i.doc.length)return{range:r};let n=r.from,s=i.doc.lineAt(n),a=n==s.from?n-1:vt(s.text,n-s.from,!1)+s.from,l=n==s.to?n+1:vt(s.text,n-s.from,!0)+s.from;return{changes:{from:a,to:l,insert:i.doc.slice(n,l).append(i.doc.slice(a,n))},range:j.cursor(l)}});return t.changes.empty?!1:(e(i.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function js(i){let e=[],t=-1;for(let r of i.selection.ranges){let n=i.doc.lineAt(r.from),s=i.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=i.doc.lineAt(r.to-1)),t>=n.number){let a=e[e.length-1];a.to=s.to,a.ranges.push(r)}else e.push({from:n.from,to:s.to,ranges:[r]});t=s.number+1}return e}function Pf(i,e,t){if(i.readOnly)return!1;let r=[],n=[];for(let s of js(i)){if(t?s.to==i.doc.length:s.from==0)continue;let a=i.doc.lineAt(t?s.to+1:s.from-1),l=a.length+1;if(t){r.push({from:s.to,to:a.to},{from:s.from,insert:a.text+i.lineBreak});for(let o of s.ranges)n.push(j.range(Math.min(i.doc.length,o.anchor+l),Math.min(i.doc.length,o.head+l)))}else{r.push({from:a.from,to:s.from},{from:s.to,insert:i.lineBreak+a.text});for(let o of s.ranges)n.push(j.range(o.anchor-l,o.head-l))}}return r.length?(e(i.update({changes:r,scrollIntoView:!0,selection:j.create(n,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}var Xv=({state:i,dispatch:e})=>Pf(i,e,!1),Uv=({state:i,dispatch:e})=>Pf(i,e,!0);function Cf(i,e,t){if(i.readOnly)return!1;let r=[];for(let n of js(i))t?r.push({from:n.from,insert:i.doc.slice(n.from,n.to)+i.lineBreak}):r.push({from:n.to,insert:i.lineBreak+i.doc.slice(n.from,n.to)});return e(i.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var Yv=({state:i,dispatch:e})=>Cf(i,e,!1),eg=({state:i,dispatch:e})=>Cf(i,e,!0),tg=i=>{if(i.state.readOnly)return!1;let{state:e}=i,t=e.changes(js(e).map(({from:n,to:s})=>(n>0?n--:s<e.doc.length&&s++,{from:n,to:s}))),r=Qi(e.selection,n=>i.moveVertically(n,!0)).map(t);return i.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function rg(i,e){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=$t(i).resolveInner(e),r=t.childBefore(e),n=t.childAfter(e),s;return r&&n&&r.to<=e&&n.from>=e&&(s=r.type.prop(_e.closedBy))&&s.indexOf(n.name)>-1&&i.doc.lineAt(r.to).from==i.doc.lineAt(n.from).from?{from:r.to,to:n.from}:null}var ig=Af(!1),ng=Af(!0);function Af(i){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(n=>{let{from:s,to:a}=n,l=e.doc.lineAt(s),o=!i&&s==a&&rg(e,s);i&&(s=a=(a<=l.to?l:e.doc.lineAt(a)).to);let u=new pi(e,{simulateBreak:s,simulateDoubleBreak:!!o}),h=Ws(u,s);for(h==null&&(h=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);a<l.to&&/\s/.test(l.text[a-l.from]);)a++;o?{from:s,to:a}=o:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let c=["",Ki(e,h)];return o&&c.push(Ki(e,u.lineIndent(l.from,-1))),{changes:{from:s,to:a,insert:Te.of(c)},range:j.cursor(s+1+c[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function eo(i,e){let t=-1;return i.changeByRange(r=>{let n=[];for(let a=r.from;a<=r.to;){let l=i.doc.lineAt(a);l.number>t&&(r.empty||r.to>l.from)&&(e(l,n,r),t=l.number),a=l.to+1}let s=i.changes(n);return{changes:n,range:j.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}var sg=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=Object.create(null),r=new pi(i,{overrideIndentation:s=>{let a=t[s];return a??-1}}),n=eo(i,(s,a,l)=>{let o=Ws(r,s.from);if(o==null)return;/\S/.test(s.text)||(o=0);let u=/^\s*/.exec(s.text)[0],h=Ki(i,o);(u!=h||l.from<s.from+u.length)&&(t[s.from]=o,a.push({from:s.from,to:s.from+u.length,insert:h}))});return n.changes.empty||e(i.update(n,{userEvent:"indent"})),!0},ag=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(eo(i,(t,r)=>{r.push({from:t.from,insert:i.facet(Mn)})}),{userEvent:"input.indent"})),!0),lg=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(eo(i,(t,r)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let s=Fr(n,i.tabSize),a=0,l=Ki(i,Math.max(0,s-Tn(i)));for(;a<n.length&&a<l.length&&n.charCodeAt(a)==l.charCodeAt(a);)a++;r.push({from:t.from+a,to:t.from+n.length,insert:l.slice(a)})}),{userEvent:"delete.dedent"})),!0);var og=[{key:"Ctrl-b",run:nf,shift:df,preventDefault:!0},{key:"Ctrl-f",run:sf,shift:mf},{key:"Ctrl-p",run:of,shift:gf},{key:"Ctrl-n",run:uf,shift:bf},{key:"Ctrl-a",run:Iv,shift:Nv},{key:"Ctrl-e",run:Dv,shift:Hv},{key:"Ctrl-d",run:wf},{key:"Ctrl-h",run:Xl},{key:"Ctrl-k",run:yf},{key:"Ctrl-Alt-h",run:Sf},{key:"Ctrl-o",run:qv},{key:"Ctrl-t",run:Zv},{key:"Ctrl-v",run:Zl}],ug=[{key:"ArrowLeft",run:nf,shift:df,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:kv,shift:Bv,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Av,shift:Jv,preventDefault:!0},{key:"ArrowRight",run:sf,shift:mf,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:wv,shift:Ov,preventDefault:!0},{mac:"Cmd-ArrowRight",run:_v,shift:Rv,preventDefault:!0},{key:"ArrowUp",run:of,shift:gf,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Vc,shift:Gc},{mac:"Ctrl-ArrowUp",run:Nc,shift:Hc},{key:"ArrowDown",run:uf,shift:bf,preventDefault:!0},{mac:"Cmd-ArrowDown",run:zc,shift:Kc},{mac:"Ctrl-ArrowDown",run:Zl,shift:jc},{key:"PageUp",run:Nc,shift:Hc},{key:"PageDown",run:Zl,shift:jc},{key:"Home",run:Cv,shift:Fv,preventDefault:!0},{key:"Mod-Home",run:Vc,shift:Gc},{key:"End",run:Pv,shift:Lv,preventDefault:!0},{key:"Mod-End",run:zc,shift:Kc},{key:"Enter",run:ig},{key:"Mod-a",run:jv},{key:"Backspace",run:Xl,shift:Xl},{key:"Delete",run:wf},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Sf},{key:"Mod-Delete",mac:"Alt-Delete",run:Kv},{mac:"Mod-Backspace",run:Qv},{mac:"Mod-Delete",run:yf}].concat(og.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),_f=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Sv,shift:Wv},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:yv,shift:Ev},{key:"Alt-ArrowUp",run:Xv},{key:"Shift-Alt-ArrowUp",run:Yv},{key:"Alt-ArrowDown",run:Uv},{key:"Shift-Alt-ArrowDown",run:eg},{key:"Escape",run:Gv},{key:"Mod-Enter",run:ng},{key:"Alt-l",mac:"Ctrl-l",run:Vv},{key:"Mod-i",run:zv,preventDefault:!0},{key:"Mod-[",run:lg},{key:"Mod-]",run:ag},{key:"Mod-Alt-\\",run:sg},{key:"Shift-Mod-k",run:tg},{key:"Shift-Mod-\\",run:Tv},{key:"Mod-/",run:rv},{key:"Alt-A",run:nv}].concat(ug);function Re(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=t[r];typeof n=="string"?i.setAttribute(r,n):n!=null&&(i[r]=n)}e++}for(;e<arguments.length;e++)If(i,arguments[e]);return i}function If(i,e){if(typeof e=="string")i.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)i.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)If(i,e[t]);else throw new RangeError("Unsupported child node: "+e)}var Df=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i,Zr=class{constructor(e,t,r=0,n=e.length,s,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,n),this.bufferStart=r,this.normalize=s?l=>s(Df(l)):Df,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ct(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=ln(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Ct(e);let n=this.normalize(t);for(let s=0,a=r;;s++){let l=n.charCodeAt(s),o=this.match(l,a);if(o)return this.value=o,this;if(s==n.length-1)break;a==r&&s<t.length&&t.charCodeAt(s)==l&&a++}}}match(e,t){let r=null;for(let n=0;n<this.matches.length;n+=2){let s=this.matches[n],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[n+1],to:t+1}:(this.matches[n]++,a=!0)),a||(this.matches.splice(n,2),n-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:t+1}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}};typeof Symbol<"u"&&(Zr.prototype[Symbol.iterator]=function(){return this});var Of={from:-1,to:-1,match:/.*/.exec("")},lo="gm"+(/x/.unicode==null?"":"u"),Gs=class{constructor(e,t,r,n=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Of,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Ks(e,t,r,n,s);this.re=new RegExp(t,lo+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let a=e.lineAt(n);this.curLineStart=a.from,this.matchPos=Qs(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,n=r+t[0].length;if(this.matchPos=Qs(this.text,n+(r==n?1:0)),r==this.curLine.length&&this.nextLine(),(r<n||r>this.value.to)&&(!this.test||this.test(r,n,t)))return this.value={from:r,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}},to=new WeakMap,Qr=class{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let n=to.get(e);if(!n||n.from>=r||n.to<=t){let l=new Qr(t,e.sliceString(t,r));return to.set(e,l),l}if(n.from==t&&n.to==r)return n;let{text:s,from:a}=n;return a>t&&(s=e.sliceString(t,a)+s,a=t),n.to<r&&(s+=e.sliceString(n.to,r)),to.set(e,new Qr(a,s)),new Qr(t,s.slice(t-a,r-a))}},Ks=class{constructor(e,t,r,n,s){this.text=e,this.to=s,this.done=!1,this.value=Of,this.matchPos=Qs(e,n),this.re=new RegExp(t,lo+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=Qr.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,n=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,n,t)))return this.value={from:r,to:n,match:t},this.matchPos=Qs(this.text,n+(r==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Qr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};typeof Symbol<"u"&&(Gs.prototype[Symbol.iterator]=Ks.prototype[Symbol.iterator]=function(){return this});function hg(i){try{return new RegExp(i,lo),!0}catch{return!1}}function Qs(i,e){if(e>=i.length)return e;let t=i.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function ro(i){let e=Re("input",{class:"cm-textfield",name:"line"}),t=Re("form",{class:"cm-gotoLine",onkeydown:n=>{n.keyCode==27?(n.preventDefault(),i.dispatch({effects:qs.of(!1)}),i.focus()):n.keyCode==13&&(n.preventDefault(),r())},onsubmit:n=>{n.preventDefault(),r()}},Re("label",i.state.phrase("Go to line"),": ",e)," ",Re("button",{class:"cm-button",type:"submit"},i.state.phrase("go")));function r(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!n)return;let{state:s}=i,a=s.doc.lineAt(s.selection.main.head),[,l,o,u,h]=n,c=u?+u.slice(1):0,f=o?+o:a.number;if(o&&h){let m=f/100;l&&(m=m*(l=="-"?-1:1)+a.number/s.doc.lines),f=Math.round(s.doc.lines*m)}else o&&l&&(f=f*(l=="-"?-1:1)+a.number);let d=s.doc.line(Math.max(1,Math.min(s.doc.lines,f)));i.dispatch({effects:qs.of(!1),selection:j.cursor(d.from+Math.max(0,Math.min(c,d.length))),scrollIntoView:!0}),i.focus()}return{dom:t}}var qs=we.define(),Mf=Ue.define({create(){return!0},update(i,e){for(let t of e.effects)t.is(qs)&&(i=t.value);return i},provide:i=>fi.from(i,e=>e?ro:null)}),cg=i=>{let e=di(i,ro);if(!e){let t=[qs.of(!0)];i.state.field(Mf,!1)==null&&t.push(we.appendConfig.of([Mf,fg])),i.dispatch({effects:t}),e=di(i,ro)}return e&&e.dom.querySelector("input").focus(),!0},fg=oe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),dg={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Wf=le.define({combine(i){return At(i,dg,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function Ef(i){let e=[bg,gg];return i&&e.push(Wf.of(i)),e}var mg=me.mark({class:"cm-selectionMatch"}),pg=me.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Tf(i,e,t,r){return(t==0||i(e.sliceDoc(t-1,t))!=Ve.Word)&&(r==e.doc.length||i(e.sliceDoc(r,r+1))!=Ve.Word)}function vg(i,e,t,r){return i(e.sliceDoc(t,t+1))==Ve.Word&&i(e.sliceDoc(r-1,r))==Ve.Word}var gg=Ze.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.selectionSet||i.docChanged||i.viewportChanged)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=i.state.facet(Wf),{state:t}=i,r=t.selection;if(r.ranges.length>1)return me.none;let n=r.main,s,a=null;if(n.empty){if(!e.highlightWordAroundCursor)return me.none;let o=t.wordAt(n.head);if(!o)return me.none;a=t.charCategorizer(n.head),s=t.sliceDoc(o.from,o.to)}else{let o=n.to-n.from;if(o<e.minSelectionLength||o>200)return me.none;if(e.wholeWords){if(s=t.sliceDoc(n.from,n.to),a=t.charCategorizer(n.head),!(Tf(a,t,n.from,n.to)&&vg(a,t,n.from,n.to)))return me.none}else if(s=t.sliceDoc(n.from,n.to).trim(),!s)return me.none}let l=[];for(let o of i.visibleRanges){let u=new Zr(t.doc,s,o.from,o.to);for(;!u.next().done;){let{from:h,to:c}=u.value;if((!a||Tf(a,t,h,c))&&(n.empty&&h<=n.from&&c>=n.to?l.push(pg.range(h,c)):(h>=n.to||c<=n.from)&&l.push(mg.range(h,c)),l.length>e.maxMatches))return me.none}}return me.set(l)}},{decorations:i=>i.decorations}),bg=oe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),$g=({state:i,dispatch:e})=>{let{selection:t}=i,r=j.create(t.ranges.map(n=>i.wordAt(n.head)||j.cursor(n.head)),t.mainIndex);return r.eq(t)?!1:(e(i.update({selection:r})),!0)};function kg(i,e){let{main:t,ranges:r}=i.selection,n=i.wordAt(t.head),s=n&&n.from==t.from&&n.to==t.to;for(let a=!1,l=new Zr(i.doc,e,r[r.length-1].to);;)if(l.next(),l.done){if(a)return null;l=new Zr(i.doc,e,0,Math.max(0,r[r.length-1].from-1)),a=!0}else{if(a&&r.some(o=>o.from==l.value.from))continue;if(s){let o=i.wordAt(l.value.from);if(!o||o.from!=l.value.from||o.to!=l.value.to)continue}return l.value}}var wg=({state:i,dispatch:e})=>{let{ranges:t}=i.selection;if(t.some(s=>s.from===s.to))return $g({state:i,dispatch:e});let r=i.sliceDoc(t[0].from,t[0].to);if(i.selection.ranges.some(s=>i.sliceDoc(s.from,s.to)!=r))return!1;let n=kg(i,r);return n?(e(i.update({selection:i.selection.addRange(j.range(n.from,n.to),!1),effects:oe.scrollIntoView(n.to)})),!0):!1},oo=le.define({combine(i){return At(i,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new ao(e)})}});var Zs=class{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||hg(this.search)),this.unquoted=this.literal?this.search:this.search.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\"),this.wholeWord=!!e.wholeWord}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new no(this):new io(this)}getCursor(e,t=0,r){let n=e.doc?e:Ae.create({doc:e});return r==null&&(r=n.doc.length),this.regexp?Zi(this,n,t,r):qi(this,n,t,r)}},Xs=class{constructor(e){this.spec=e}};function qi(i,e,t,r){return new Zr(e.doc,i.unquoted,t,r,i.caseSensitive?void 0:n=>n.toLowerCase(),i.wholeWord?xg(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function xg(i,e){return(t,r,n,s)=>((s>t||s+n.length<r)&&(s=Math.max(0,t-2),n=i.sliceString(s,Math.min(i.length,r+2))),(e(Us(n,t-s))!=Ve.Word||e(Ys(n,t-s))!=Ve.Word)&&(e(Ys(n,r-s))!=Ve.Word||e(Us(n,r-s))!=Ve.Word))}var io=class extends Xs{constructor(e){super(e)}nextMatch(e,t,r){let n=qi(this.spec,e,r,e.doc.length).nextOverlapping();return n.done&&(n=qi(this.spec,e,0,t).nextOverlapping()),n.done?null:n.value}prevMatchInRange(e,t,r){for(let n=r;;){let s=Math.max(t,n-1e4-this.spec.unquoted.length),a=qi(this.spec,e,s,n),l=null;for(;!a.nextOverlapping().done;)l=a.value;if(l)return l;if(s==t)return null;n-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let r=qi(this.spec,e,0,e.doc.length),n=[];for(;!r.next().done;){if(n.length>=t)return null;n.push(r.value)}return n}highlight(e,t,r,n){let s=qi(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)n(s.value.from,s.value.to)}};function Zi(i,e,t,r){return new Gs(e.doc,i.search,{ignoreCase:!i.caseSensitive,test:i.wholeWord?Sg(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function Us(i,e){return i.slice(vt(i,e,!1),e)}function Ys(i,e){return i.slice(e,vt(i,e))}function Sg(i){return(e,t,r)=>!r[0].length||(i(Us(r.input,r.index))!=Ve.Word||i(Ys(r.input,r.index))!=Ve.Word)&&(i(Ys(r.input,r.index+r[0].length))!=Ve.Word||i(Us(r.input,r.index+r[0].length))!=Ve.Word)}var no=class extends Xs{nextMatch(e,t,r){let n=Zi(this.spec,e,r,e.doc.length).next();return n.done&&(n=Zi(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,r){for(let n=1;;n++){let s=Math.max(t,r-n*1e4),a=Zi(this.spec,e,s,r),l=null;for(;!a.next().done;)l=a.value;if(l&&(s==t||l.from>s+10))return l;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,(t,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:t)}matchAll(e,t){let r=Zi(this.spec,e,0,e.doc.length),n=[];for(;!r.next().done;){if(n.length>=t)return null;n.push(r.value)}return n}highlight(e,t,r,n){let s=Zi(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)n(s.value.from,s.value.to)}},En=we.define(),uo=we.define(),qr=Ue.define({create(i){return new Wn(so(i).create(),null)},update(i,e){for(let t of e.effects)t.is(En)?i=new Wn(t.value.create(),i.panel):t.is(uo)&&(i=new Wn(i.query,t.value?ho:null));return i},provide:i=>fi.from(i,e=>e.panel)});var Wn=class{constructor(e,t){this.query=e,this.panel=t}},yg=me.mark({class:"cm-searchMatch"}),Pg=me.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Cg=Ze.fromClass(class{constructor(i){this.view=i,this.decorations=this.highlight(i.state.field(qr))}update(i){let e=i.state.field(qr);(e!=i.startState.field(qr)||i.docChanged||i.selectionSet||i.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:i,panel:e}){if(!e||!i.spec.valid)return me.none;let{view:t}=this,r=new zt;for(let n=0,s=t.visibleRanges,a=s.length;n<a;n++){let{from:l,to:o}=s[n];for(;n<a-1&&o>s[n+1].from-2*250;)o=s[++n].to;i.highlight(t.state,l,o,(u,h)=>{let c=t.state.selection.ranges.some(f=>f.from==u&&f.to==h);r.add(u,h,c?Pg:yg)})}return r.finish()}},{decorations:i=>i.decorations});function Ln(i){return e=>{let t=e.state.field(qr,!1);return t&&t.query.spec.valid?i(e,t):Lf(e)}}var ea=Ln((i,{query:e})=>{let{to:t}=i.state.selection.main,r=e.nextMatch(i.state,t,t);return r?(i.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:co(i,r),userEvent:"select.search"}),!0):!1}),ta=Ln((i,{query:e})=>{let{state:t}=i,{from:r}=t.selection.main,n=e.prevMatch(t,r,r);return n?(i.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:co(i,n),userEvent:"select.search"}),!0):!1}),Ag=Ln((i,{query:e})=>{let t=e.matchAll(i.state,1e3);return!t||!t.length?!1:(i.dispatch({selection:j.create(t.map(r=>j.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),_g=({state:i,dispatch:e})=>{let t=i.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:n}=t.main,s=[],a=0;for(let l=new Zr(i.doc,i.sliceDoc(r,n));!l.next().done;){if(s.length>1e3)return!1;l.value.from==r&&(a=s.length),s.push(j.range(l.value.from,l.value.to))}return e(i.update({selection:j.create(s,a),userEvent:"select.search.matches"})),!0},Bf=Ln((i,{query:e})=>{let{state:t}=i,{from:r,to:n}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let a=[],l,o,u=[];if(s.from==r&&s.to==n&&(o=t.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:o}),s=e.nextMatch(t,s.from,s.to),u.push(oe.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),s){let h=a.length==0||a[0].from>=s.to?0:s.to-s.from-o.length;l={anchor:s.from-h,head:s.to-h},u.push(co(i,s))}return i.dispatch({changes:a,selection:l,scrollIntoView:!!l,effects:u,userEvent:"input.replace"}),!0}),Ig=Ln((i,{query:e})=>{if(i.state.readOnly)return!1;let t=e.matchAll(i.state,1e9).map(n=>{let{from:s,to:a}=n;return{from:s,to:a,insert:e.getReplacement(n)}});if(!t.length)return!1;let r=i.state.phrase("replaced $ matches",t.length)+".";return i.dispatch({changes:t,effects:oe.announce.of(r),userEvent:"input.replace.all"}),!0});function ho(i){return i.state.facet(oo).createPanel(i)}function so(i,e){var t,r,n,s;let a=i.selection.main,l=a.empty||a.to>a.from+100?"":i.sliceDoc(a.from,a.to);if(e&&!l)return e;let o=i.facet(oo);return new Zs({search:((t=e?.literal)!==null&&t!==void 0?t:o.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:o.caseSensitive,literal:(n=e?.literal)!==null&&n!==void 0?n:o.literal,wholeWord:(s=e?.wholeWord)!==null&&s!==void 0?s:o.wholeWord})}var Lf=i=>{let e=i.state.field(qr,!1);if(e&&e.panel){let t=di(i,ho);if(!t)return!1;let r=t.dom.querySelector("[main-field]");if(r&&r!=i.root.activeElement){let n=so(i.state,e.query.spec);n.valid&&i.dispatch({effects:En.of(n)}),r.focus(),r.select()}}else i.dispatch({effects:[uo.of(!0),e?En.of(so(i.state,e.query.spec)):we.appendConfig.of(Mg)]});return!0},Ff=i=>{let e=i.state.field(qr,!1);if(!e||!e.panel)return!1;let t=di(i,ho);return t&&t.dom.contains(i.root.activeElement)&&i.focus(),i.dispatch({effects:uo.of(!1)}),!0},Jf=[{key:"Mod-f",run:Lf,scope:"editor search-panel"},{key:"F3",run:ea,shift:ta,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ea,shift:ta,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ff,scope:"editor search-panel"},{key:"Mod-Shift-l",run:_g},{key:"Alt-g",run:cg},{key:"Mod-d",run:wg,preventDefault:!0}],ao=class{constructor(e){this.view=e;let t=this.query=e.state.field(qr).query.spec;this.commit=this.commit.bind(this),this.searchField=Re("input",{value:t.search,placeholder:qt(e,"Find"),"aria-label":qt(e,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Re("input",{value:t.replace,placeholder:qt(e,"Replace"),"aria-label":qt(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=Re("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=Re("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit}),this.wordField=Re("input",{type:"checkbox",name:"word",checked:t.wholeWord,onchange:this.commit});function r(n,s,a){return Re("button",{class:"cm-button",name:n,onclick:s,type:"button"},a)}this.dom=Re("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,r("next",()=>ea(e),[qt(e,"next")]),r("prev",()=>ta(e),[qt(e,"previous")]),r("select",()=>Ag(e),[qt(e,"all")]),Re("label",null,[this.caseField,qt(e,"match case")]),Re("label",null,[this.reField,qt(e,"regexp")]),Re("label",null,[this.wordField,qt(e,"by word")]),...e.state.readOnly?[]:[Re("br"),this.replaceField,r("replace",()=>Bf(e),[qt(e,"replace")]),r("replaceAll",()=>Ig(e),[qt(e,"replace all")]),Re("button",{name:"close",onclick:()=>Ff(e),"aria-label":qt(e,"close"),type:"button"},["\xD7"])]])}commit(){let e=new Zs({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:En.of(e)}))}keydown(e){Hh(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ta:ea)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Bf(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(En)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(oo).top}};function qt(i,e){return i.state.phrase(e)}var Vs=30,zs=/[\s\.,:;?!]/;function co(i,{from:e,to:t}){let r=i.state.doc.lineAt(e),n=i.state.doc.lineAt(t).to,s=Math.max(r.from,e-Vs),a=Math.min(n,t+Vs),l=i.state.sliceDoc(s,a);if(s!=r.from){for(let o=0;o<Vs;o++)if(!zs.test(l[o+1])&&zs.test(l[o])){l=l.slice(o);break}}if(a!=n){for(let o=l.length-1;o>l.length-Vs;o--)if(!zs.test(l[o-1])&&zs.test(l[o])){l=l.slice(0,o);break}}return oe.announce.of(`${i.state.phrase("current match")}. ${l} ${i.state.phrase("on line")} ${r.number}.`)}var Dg=oe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Mg=[qr,br.lowest(Cg),Dg];var ia=class{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=$t(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),n=t.text.slice(r-t.from,this.pos-t.from),s=n.search(Qf(e,!1));return s<0?null:{from:r+s,to:this.pos,text:n.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}};function Rf(i){let e=Object.keys(i).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Tg(i){let e=Object.create(null),t=Object.create(null);for(let{label:n}of i){e[n[0]]=!0;for(let s=1;s<n.length;s++)t[n[s]]=!0}let r=Rf(e)+Rf(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Bg(i){let e=i.map(n=>typeof n=="string"?{label:n}:n),[t,r]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:Tg(e);return n=>{let s=n.matchBefore(r);return s||n.explicit?{from:s?s.from:n.pos,options:e,validFor:t}:null}}var na=class{constructor(e,t,r){this.completion=e,this.source=t,this.match=r}};function Xr(i){return i.selection.main.head}function Qf(i,e){var t;let{source:r}=i,n=e&&r[0]!="^",s=r[r.length-1]!="$";return!n&&!s?i:new RegExp(`${n?"^":""}(?:${r})${s?"$":""}`,(t=i.flags)!==null&&t!==void 0?t:i.ignoreCase?"i":"")}function Og(i,e,t,r){return Object.assign(Object.assign({},i.changeByRange(n=>{if(n==i.selection.main)return{changes:{from:t,to:r,insert:e},range:j.cursor(t+e.length)};let s=r-t;return!n.empty||s&&i.sliceDoc(n.from-s,n.from)!=i.sliceDoc(t,r)?{range:n}:{changes:{from:n.from-s,to:n.from,insert:e},range:j.cursor(n.from-s+e.length)}})),{userEvent:"input.complete"})}function qf(i,e){let t=e.completion.apply||e.completion.label,r=e.source;typeof t=="string"?i.dispatch(Og(i.state,t,r.from,r.to)):t(i,e.completion,r.from,r.to)}var Nf=new WeakMap;function Wg(i){if(!Array.isArray(i))return i;let e=Nf.get(i);return e||Nf.set(i,e=Bg(i)),e}var mo=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let r=ct(e,t),n=Ct(r);this.chars.push(r);let s=e.slice(t,t+n),a=s.toUpperCase();this.folded.push(ct(a==s?s.toLowerCase():a,0)),t+=n}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:n,precise:s,byWord:a}=this;if(t.length==1){let k=ct(e,0);return k==t[0]?[0,0,Ct(k)]:k==r[0]?[-200,0,Ct(k)]:null}let l=e.indexOf(this.pattern);if(l==0)return[0,0,this.pattern.length];let o=t.length,u=0;if(l<0){for(let k=0,S=Math.min(e.length,200);k<S&&u<o;){let w=ct(e,k);(w==t[u]||w==r[u])&&(n[u++]=k),k+=Ct(w)}if(u<o)return null}let h=0,c=0,f=!1,d=0,m=-1,v=-1,p=/[a-z]/.test(e),g=!0;for(let k=0,S=Math.min(e.length,200),w=0;k<S&&c<o;){let A=ct(e,k);l<0&&(h<o&&A==t[h]&&(s[h++]=k),d<o&&(A==t[d]||A==r[d]?(d==0&&(m=k),v=k+1,d++):d=0));let _,W=A<255?A>=48&&A<=57||A>=97&&A<=122?2:A>=65&&A<=90?1:0:(_=ln(A))!=_.toLowerCase()?1:_!=_.toUpperCase()?2:0;(!k||W==1&&p||w==0&&W!=0)&&(t[c]==A||r[c]==A&&(f=!0)?a[c++]=k:a.length&&(g=!1)),w=W,k+=Ct(A)}return c==o&&a[0]==0&&g?this.result(-100+(f?-200:0),a,e):d==o&&m==0?[-200-e.length,0,v]:l>-1?[-700-e.length,l,l+this.pattern.length]:d==o?[-200+-700-e.length,m,v]:c==o?this.result(-100+(f?-200:0)+-700+(g?0:-1100),a,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,r){let n=[e-r.length],s=1;for(let a of t){let l=a+(this.astral?Ct(ct(r,a)):1);s>1&&n[s-1]==a?n[s-1]=l:(n[s++]=a,n[s++]=l)}return n}},cr=le.define({combine(i){return At(i,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>r=>Eg(e(r),t(r)),addToOptions:(e,t)=>e.concat(t)})}});function Eg(i,e){return i?e?i+" "+e:i:e}function Lg(i){let e=i.addToOptions.slice();return i.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,n){let s=document.createElement("span");s.className="cm-completionLabel";let{label:a}=t,l=0;for(let o=1;o<n.length;){let u=n[o++],h=n[o++];u>l&&s.appendChild(document.createTextNode(a.slice(l,u)));let c=s.appendChild(document.createElement("span"));c.appendChild(document.createTextNode(a.slice(u,h))),c.className="cm-completionMatchedText",l=h}return l<a.length&&s.appendChild(document.createTextNode(a.slice(l))),s},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function Hf(i,e,t){if(i<=t)return{from:0,to:i};if(e<0&&(e=0),e<=i>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let r=Math.floor((i-e)/t);return{from:i-(r+1)*t,to:i-r*t}}var po=class{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this};let r=e.state.field(t),{options:n,selected:s}=r.open,a=e.state.facet(cr);this.optionContent=Lg(a),this.optionClass=a.optionClass,this.range=Hf(n.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",l=>{for(let o=l.target,u;o&&o!=this.dom;o=o.parentNode)if(o.nodeName=="LI"&&(u=/-(\d+)$/.exec(o.id))&&+u[1]<n.length){qf(e,n[+u[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(n,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Hf(t.options.length,t.selected,this.view.state.facet(cr).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=t.options[t.selected],{info:n}=r;if(!n)return;let s=typeof n=="string"?document.createTextNode(n):n(r);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a)}).catch(a=>_t(this.view.state,a,"completion info")):this.addInfoPane(s)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,n=this.range.from;r;r=r.nextSibling,n++)n==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&Jg(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.ownerDocument.defaultView||window,r=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),s=e.getBoundingClientRect();if(s.top>Math.min(t.innerHeight,r.bottom)-10||s.bottom<Math.max(0,r.top)+10)return null;let a=this.view.textDirection==et.RTL,l=a,o=!1,u,h="",c="",f=r.left,d=t.innerWidth-r.right;if(l&&f<Math.min(n.width,d)?l=!1:!l&&d<Math.min(n.width,f)&&(l=!0),n.width<=(l?f:d))h=Math.max(0,Math.min(s.top,t.innerHeight-n.height))-r.top+"px",u=Math.min(400,l?f:d)+"px";else{o=!0,u=Math.min(400,(a?r.right:t.innerWidth-r.left)-30)+"px";let m=t.innerHeight-r.bottom;m>=n.height||m>r.top?h=s.bottom-r.top+"px":c=r.bottom-s.top+"px"}return{top:h,bottom:c,maxWidth:u,class:o?a?"left-narrow":"right-narrow":l?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,r){let n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let s=r.from;s<r.to;s++){let{completion:a,match:l}=e[s],o=n.appendChild(document.createElement("li"));o.id=t+"-"+s,o.setAttribute("role","option");let u=this.optionClass(a);u&&(o.className=u);for(let h of this.optionContent){let c=h(a,this.view.state,l);c&&o.appendChild(c)}}return r.from&&n.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}};function Fg(i){return e=>new po(e,i)}function Jg(i,e){let t=i.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<t.top?i.scrollTop-=t.top-r.top:r.bottom>t.bottom&&(i.scrollTop+=r.bottom-t.bottom)}function jf(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function Rg(i,e){let t=[],r=0;for(let l of i)if(l.hasResult())if(l.result.filter===!1){let o=l.result.getMatch;for(let u of l.result.options){let h=[1e9-r++];if(o)for(let c of o(u))h.push(c);t.push(new na(u,l,h))}}else{let o=new mo(e.sliceDoc(l.from,l.to)),u;for(let h of l.result.options)(u=o.match(h.label))&&(h.boost!=null&&(u[0]+=h.boost),t.push(new na(h,l,u)))}let n=[],s=null,a=e.facet(cr).compareCompletions;for(let l of t.sort((o,u)=>u.match[0]-o.match[0]||a(o.completion,u.completion)))!s||s.label!=l.completion.label||s.detail!=l.completion.detail||s.type!=null&&l.completion.type!=null&&s.type!=l.completion.type||s.apply!=l.completion.apply?n.push(l):jf(l.completion)>jf(s)&&(n[n.length-1]=l),s=l.completion;return n}var bi=class{constructor(e,t,r,n,s){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=n,this.selected=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new bi(this.options,Vf(t,e),this.tooltip,this.timestamp,e)}static build(e,t,r,n,s){let a=Rg(e,t);if(!a.length)return null;let l=t.facet(cr).selectOnOpen?0:-1;if(n&&n.selected!=l&&n.selected!=-1){let o=n.options[n.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==o){l=u;break}}return new bi(a,Vf(r,l),{pos:e.reduce((o,u)=>u.hasResult()?Math.min(o,u.from):o,1e8),create:Fg(hr),above:s.aboveCursor},n?n.timestamp:Date.now(),l)}map(e){return new bi(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}},Xi=class{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new Xi(jg,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(cr),s=(r.override||t.languageDataAt("autocomplete",Xr(t)).map(Wg)).map(l=>(this.active.find(u=>u.source==l)||new Tt(l,this.active.some(u=>u.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,o)=>l==this.active[o])&&(s=this.active);let a=e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Ng(s,this.active)?bi.build(s,t,this.id,this.open,r):this.open&&e.docChanged?this.open.map(e.changes):this.open;!a&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Tt(l.source,0):l));for(let l of e.effects)l.is(Xf)&&(a=a&&a.setSelected(l.value,this.id));return s==this.active&&a==this.open?this:new Xi(s,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Hg}};function Ng(i,e){if(i==e)return!0;for(let t=0,r=0;;){for(;t<i.length&&!i[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let n=t==i.length,s=r==e.length;if(n||s)return n==s;if(i[t++].result!=e[r++].result)return!1}}var Hg={"aria-autocomplete":"list"};function Vf(i,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return e>-1&&(t["aria-activedescendant"]=i+"-"+e),t}var jg=[];function vo(i){return i.isUserEvent("input.type")?"input":i.isUserEvent("delete.backward")?"delete":null}var Tt=class{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=vo(e),n=this;r?n=n.handleUserEvent(e,r,t):e.docChanged?n=n.handleChange(e):e.selection&&n.state!=0&&(n=new Tt(n.source,0));for(let s of e.effects)if(s.is(bo))n=new Tt(n.source,1,s.value?Xr(e.state):-1);else if(s.is(sa))n=new Tt(n.source,0);else if(s.is(Zf))for(let a of s.value)a.source==n.source&&(n=a);return n}handleUserEvent(e,t,r){return t=="delete"||!r.activateOnTyping?this.map(e.changes):new Tt(this.source,1)}handleChange(e){return e.changes.touchesRange(Xr(e.startState))?new Tt(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Tt(this.source,this.state,e.mapPos(this.explicitPos))}},$i=class extends Tt{constructor(e,t,r,n,s){super(e,2,t),this.result=r,this.from=n,this.to=s}hasResult(){return!0}handleUserEvent(e,t,r){var n;let s=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),l=Xr(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>a||t=="delete"&&Xr(e.startState)==this.from)return new Tt(this.source,t=="input"&&r.activateOnTyping?1:0);let o=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return Vg(this.result.validFor,e.state,s,a)?new $i(this.source,o,this.result,s,a):this.result.update&&(u=this.result.update(this.result,s,a,new ia(e.state,l,o>=0)))?new $i(this.source,o,u,u.from,(n=u.to)!==null&&n!==void 0?n:Xr(e.state)):new Tt(this.source,1,o)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Tt(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new $i(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}};function Vg(i,e,t,r){if(!i)return!1;let n=e.sliceDoc(t,r);return typeof i=="function"?i(n,t,r,e):Qf(i,!0).test(n)}var bo=we.define(),sa=we.define(),Zf=we.define({map(i,e){return i.map(t=>t.map(e))}}),Xf=we.define(),hr=Ue.define({create(){return Xi.start()},update(i,e){return i.update(e)},provide:i=>[yn.from(i,e=>e.tooltip),oe.contentAttributes.from(i,e=>e.attrs)]});function ra(i,e="option"){return t=>{let r=t.state.field(hr,!1);if(!r||!r.open||Date.now()-r.open.timestamp<t.state.facet(cr).interactionDelay)return!1;let n=1,s;e=="page"&&(s=rc(t,r.open.tooltip))&&(n=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:a}=r.open.options,l=r.open.selected>-1?r.open.selected+n*(i?1:-1):i?0:a-1;return l<0?l=e=="page"?0:a-1:l>=a&&(l=e=="page"?a-1:0),t.dispatch({effects:Xf.of(l)}),!0}}var zg=i=>{let e=i.state.field(hr,!1);return i.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<i.state.facet(cr).interactionDelay?!1:(qf(i,e.open.options[e.open.selected]),!0)},Gg=i=>i.state.field(hr,!1)?(i.dispatch({effects:bo.of(!0)}),!0):!1,Kg=i=>{let e=i.state.field(hr,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(i.dispatch({effects:sa.of(null)}),!0)},go=class{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}},zf=50,Qg=50,qg=1e3,Zg=Ze.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of i.state.field(hr).active)e.state==1&&this.startQuery(e)}update(i){let e=i.state.field(hr);if(!i.selectionSet&&!i.docChanged&&i.startState.field(hr)==e)return;let t=i.transactions.some(r=>(r.selection||r.docChanged)&&!vo(r));for(let r=0;r<this.running.length;r++){let n=this.running[r];if(t||n.updates.length+i.transactions.length>Qg&&Date.now()-n.time>qg){for(let s of n.context.abortListeners)try{s()}catch(a){_t(this.view.state,a)}n.context.abortListeners=null,this.running.splice(r--,1)}else n.updates.push(...i.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(n=>n.active.source==r.source))?setTimeout(()=>this.startUpdate(),zf):-1,this.composing!=0)for(let r of i.transactions)vo(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:i}=this.view,e=i.field(hr);for(let t of e.active)t.state==1&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(i){let{state:e}=this.view,t=Xr(e),r=new ia(e,t,i.explicitPos==t),n=new go(i,r);this.running.push(n),Promise.resolve(i.source(r)).then(s=>{n.context.aborted||(n.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:sa.of(null)}),_t(this.view.state,s)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),zf))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(cr);for(let r=0;r<this.running.length;r++){let n=this.running[r];if(n.done===void 0)continue;if(this.running.splice(r--,1),n.done){let a=new $i(n.active.source,n.active.explicitPos,n.done,n.done.from,(i=n.done.to)!==null&&i!==void 0?i:Xr(n.updates.length?n.updates[0].startState:this.view.state));for(let l of n.updates)a=a.update(l,t);if(a.hasResult()){e.push(a);continue}}let s=this.view.state.field(hr).active.find(a=>a.source==n.active.source);if(s&&s.state==1)if(n.done==null){let a=new Tt(n.active.source,0);for(let l of n.updates)a=a.update(l,t);a.state!=1&&e.push(a)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:Zf.of(e)})}},{eventHandlers:{blur(){let i=this.view.state.field(hr,!1);i&&i.tooltip&&this.view.state.facet(cr).closeOnBlur&&this.view.dispatch({effects:sa.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:bo.of(!1)}),20),this.composing=0}}}),Xg=oe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var Fn={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},gi=we.define({map(i,e){let t=e.mapPos(i,-1,wt.TrackAfter);return t??void 0}}),$o=we.define({map(i,e){return e.mapPos(i)}}),ko=new class extends dr{};ko.startSide=1;ko.endSide=-1;var Uf=Ue.define({create(){return Ie.empty},update(i,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(r,-1)&&(i=Ie.empty)}i=i.map(e.changes);for(let t of e.effects)t.is(gi)?i=i.update({add:[ko.range(t.value,t.value+1)]}):t.is($o)&&(i=i.update({filter:r=>r!=t.value}));return i}});function Yf(){return[Yg,Uf]}var fo="()[]{}<>";function ed(i){for(let e=0;e<fo.length;e+=2)if(fo.charCodeAt(e)==i)return fo.charAt(e+1);return ln(i<128?i:i+1)}function td(i,e){return i.languageDataAt("closeBrackets",e)[0]||Fn}var Ug=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Yg=oe.inputHandler.of((i,e,t,r)=>{if((Ug?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let n=i.state.selection.main;if(r.length>2||r.length==2&&Ct(ct(r,0))==1||e!=n.from||t!=n.to)return!1;let s=tb(i.state,r);return s?(i.dispatch(s),!0):!1}),eb=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let r=td(i,i.selection.main.head).brackets||Fn.brackets,n=null,s=i.changeByRange(a=>{if(a.empty){let l=rb(i.doc,a.head);for(let o of r)if(o==l&&aa(i.doc,a.head)==ed(ct(o,0)))return{changes:{from:a.head-o.length,to:a.head+o.length},range:j.cursor(a.head-o.length)}}return{range:n=a}});return n||e(i.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},rd=[{key:"Backspace",run:eb}];function tb(i,e){let t=td(i,i.selection.main.head),r=t.brackets||Fn.brackets;for(let n of r){let s=ed(ct(n,0));if(e==n)return s==n?sb(i,n,r.indexOf(n+n+n)>-1,t):ib(i,n,s,t.before||Fn.before);if(e==s&&id(i,i.selection.main.from))return nb(i,n,s)}return null}function id(i,e){let t=!1;return i.field(Uf).between(0,i.doc.length,r=>{r==e&&(t=!0)}),t}function aa(i,e){let t=i.sliceString(e,e+2);return t.slice(0,Ct(ct(t,0)))}function rb(i,e){let t=i.sliceString(e-2,e);return Ct(ct(t,0))==t.length?t:t.slice(1)}function ib(i,e,t,r){let n=null,s=i.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:gi.of(a.to+e.length),range:j.range(a.anchor+e.length,a.head+e.length)};let l=aa(i.doc,a.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:e+t,from:a.head},effects:gi.of(a.head+e.length),range:j.cursor(a.head+e.length)}:{range:n=a}});return n?null:i.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function nb(i,e,t){let r=null,n=i.selection.ranges.map(s=>s.empty&&aa(i.doc,s.head)==t?j.cursor(s.head+t.length):r=s);return r?null:i.update({selection:j.create(n,i.selection.mainIndex),scrollIntoView:!0,effects:i.selection.ranges.map(({from:s})=>$o.of(s))})}function sb(i,e,t,r){let n=r.stringPrefixes||Fn.stringPrefixes,s=null,a=i.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:gi.of(l.to+e.length),range:j.range(l.anchor+e.length,l.head+e.length)};let o=l.head,u=aa(i.doc,o),h;if(u==e){if(Gf(i,o))return{changes:{insert:e+e,from:o},effects:gi.of(o+e.length),range:j.cursor(o+e.length)};if(id(i,o)){let c=t&&i.sliceDoc(o,o+e.length*3)==e+e+e;return{range:j.cursor(o+e.length*(c?3:1)),effects:$o.of(o)}}}else{if(t&&i.sliceDoc(o-2*e.length,o)==e+e&&(h=Kf(i,o-2*e.length,n))>-1&&Gf(i,h))return{changes:{insert:e+e+e+e,from:o},effects:gi.of(o+e.length),range:j.cursor(o+e.length)};if(i.charCategorizer(o)(u)!=Ve.Word&&Kf(i,o,n)>-1&&!ab(i,o,e,n))return{changes:{insert:e+e,from:o},effects:gi.of(o+e.length),range:j.cursor(o+e.length)}}return{range:s=l}});return s?null:i.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function Gf(i,e){let t=$t(i).resolveInner(e+1);return t.parent&&t.from==e}function ab(i,e,t,r){let n=$t(i).resolveInner(e,-1),s=r.reduce((a,l)=>Math.max(a,l.length),0);for(let a=0;a<5;a++){let l=i.sliceDoc(n.from,Math.min(n.to,n.from+t.length+s)),o=l.indexOf(t);if(!o||o>-1&&r.indexOf(l.slice(0,o))>-1){let h=n.firstChild;for(;h&&h.from==n.from&&h.to-h.from>t.length+o;){if(i.sliceDoc(h.to-t.length,h.to)==t)return!1;h=h.firstChild}return!0}let u=n.to==e&&n.parent;if(!u)break;n=u}return!1}function Kf(i,e,t){let r=i.charCategorizer(e);if(r(i.sliceDoc(e-1,e))!=Ve.Word)return e;for(let n of t){let s=e-n.length;if(i.sliceDoc(s,e)==n&&r(i.sliceDoc(s-1,s))!=Ve.Word)return s}return-1}function nd(i={}){return[hr,cr.of(i),Zg,lb,Xg]}var wo=[{key:"Ctrl-Space",run:Gg},{key:"Escape",run:Kg},{key:"ArrowDown",run:ra(!0)},{key:"ArrowUp",run:ra(!1)},{key:"PageDown",run:ra(!0,"page")},{key:"PageUp",run:ra(!1,"page")},{key:"Enter",run:zg}],lb=br.highest(Sn.computeN([cr],i=>i.facet(cr).defaultKeymap?[wo]:[]));var So=class{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}},Er=class{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let n=e,s=r.facet(Ui).markerFilter;s&&(n=s(n));let a=me.set(n.map(l=>l.from==l.to||l.from==l.to-1&&r.doc.lineAt(l.from).to==l.from?me.widget({widget:new yo(l),diagnostic:l}).range(l.from):me.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new Er(a,t,Yi(a))}};function Yi(i,e=null,t=0){let r=null;return i.between(t,1e9,(n,s,{spec:a})=>{if(!(e&&a.diagnostic!=e))return r=new So(n,s,a.diagnostic),!1}),r}function ob(i,e){return!!(i.effects.some(t=>t.is(Po))||i.changes.touchesRange(e.pos))}function ad(i,e){return i.field(Zt,!1)?e:e.concat(we.appendConfig.of([Zt,oe.decorations.compute([Zt],t=>{let{selected:r,panel:n}=t.field(Zt);return!r||!n||r.from==r.to?me.none:me.set([hb.range(r.from,r.to)])}),tc(cb,{hideOn:ob}),gb]))}function ub(i,e){return{effects:ad(i,[Po.of(e)])}}var Po=we.define(),Co=we.define(),ld=we.define(),Zt=Ue.define({create(){return new Er(me.none,null,null)},update(i,e){if(e.docChanged){let t=i.diagnostics.map(e.changes),r=null;if(i.selected){let n=e.changes.mapPos(i.selected.from,1);r=Yi(t,i.selected.diagnostic,n)||Yi(t,null,n)}i=new Er(t,i.panel,r)}for(let t of e.effects)t.is(Po)?i=Er.init(t.value,i.panel,e.state):t.is(Co)?i=new Er(i.diagnostics,t.value?en.open:null,i.selected):t.is(ld)&&(i=new Er(i.diagnostics,i.panel,t.value));return i},provide:i=>[fi.from(i,e=>e.panel),oe.decorations.from(i,e=>e.diagnostics)]});var hb=me.mark({class:"cm-lintRange cm-lintRange-active"});function cb(i,e,t){let{diagnostics:r}=i.state.field(Zt),n=[],s=2e8,a=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(o,u,{spec:h})=>{e>=o&&e<=u&&(o==u||(e>o||t>0)&&(e<u||t<0))&&(n.push(h.diagnostic),s=Math.min(o,s),a=Math.max(u,a))});let l=i.state.facet(Ui).tooltipFilter;return l&&(n=l(n)),n.length?{pos:s,end:a,above:i.state.doc.lineAt(s).to<a,create(){return{dom:fb(i,n)}}}:null}function fb(i,e){return Re("ul",{class:"cm-tooltip-lint"},e.map(t=>hd(i,t,!1)))}var db=i=>{let e=i.state.field(Zt,!1);(!e||!e.panel)&&i.dispatch({effects:ad(i.state,[Co.of(!0)])});let t=di(i,en.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},sd=i=>{let e=i.state.field(Zt,!1);return!e||!e.panel?!1:(i.dispatch({effects:Co.of(!1)}),!0)},mb=i=>{let e=i.state.field(Zt,!1);if(!e)return!1;let t=i.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(i.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},od=[{key:"Mod-Shift-m",run:db},{key:"F8",run:mb}],pb=Ze.fromClass(class{constructor(i){this.view=i,this.timeout=-1,this.set=!0;let{delay:e}=i.state.facet(Ui);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let i=Date.now();if(i<this.lintTime-10)setTimeout(this.run,this.lintTime-i);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Ui);Promise.all(t.map(r=>Promise.resolve(r(this.view)))).then(r=>{let n=r.reduce((s,a)=>s.concat(a));this.view.state.doc==e.doc&&this.view.dispatch(ub(this.view.state,n))},r=>{_t(this.view.state,r)})}}update(i){let e=i.state.facet(Ui);(i.docChanged||e!=i.startState.facet(Ui))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Ui=le.define({combine(i){return Object.assign({sources:i.map(e=>e.source)},At(i.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:pb});function ud(i){let e=[];if(i)e:for(let{name:t}of i){for(let r=0;r<t.length;r++){let n=t[r];if(/[a-zA-Z]/.test(n)&&!e.some(s=>s.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function hd(i,e,t){var r;let n=t?ud(e.actions):[];return Re("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Re("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,a)=>{let l=c=>{c.preventDefault();let f=Yi(i.state.field(Zt).diagnostics,e);f&&s.apply(i,f.from,f.to)},{name:o}=s,u=n[a]?o.indexOf(n[a]):-1,h=u<0?o:[o.slice(0,u),Re("u",o.slice(u,u+1)),o.slice(u+1)];return Re("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${o}${u<0?"":` (access key "${n[a]})"`}.`},h)}),e.source&&Re("div",{class:"cm-diagnosticSource"},e.source))}var yo=class extends Kt{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Re("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}},la=class{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=hd(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},en=class{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)sd(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],a=ud(s.actions);for(let l=0;l<a.length;l++)if(a[l].toUpperCase().charCodeAt(0)==n.keyCode){let o=Yi(this.view.state.field(Zt).diagnostics,s);o&&s.actions[l].apply(e,o.from,o.to)}}else return;n.preventDefault()},r=n=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(n.target)&&this.moveSelection(s)};this.list=Re("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=Re("div",{class:"cm-panel-lint"},this.list,Re("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>sd(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(Zt).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Zt),r=0,n=!1,s=null;for(e.between(0,this.view.state.doc.length,(a,l,{spec:o})=>{let u=-1,h;for(let c=r;c<this.items.length;c++)if(this.items[c].diagnostic==o.diagnostic){u=c;break}u<0?(h=new la(this.view,o.diagnostic),this.items.splice(r,0,h),n=!0):(h=this.items[u],u>r&&(this.items.splice(r,u-r),n=!0)),t&&h.diagnostic==t.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),s=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new la(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{a.top<l.top?this.list.scrollTop-=l.top-a.top:a.bottom>l.bottom&&(this.list.scrollTop+=a.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Zt),r=Yi(t.diagnostics,this.items[e].diagnostic);!r||this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:ld.of(r)})}static open(e){return new en(e)}};function vb(i,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(i)}</svg>')`}function xo(i){return vb(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var gb=oe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:xo("#d11")},".cm-lintRange-warning":{backgroundImage:xo("orange")},".cm-lintRange-info":{backgroundImage:xo("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});var cd=(()=>[ac(),lc(),Zh(),Xc(),Bc(),zh(),qh(),Ae.allowMultipleSelections.of(!0),Pc(),Wc(Ec,{fallback:!0}),Rc(),Yf(),nd(),Uh(),Yh(),Xh(),Ef(),Sn.of([...rd,..._f,...Jf,...tf,...Dc,...wo,...od])])();var bb=document.getElementById("output");function fd(i){bb.value+=i}CompilerInitial={};CompilerInitial.en$Bind$47=new String("Bind");CompilerInitial.exn$Bind$47=Array(CompilerInitial.en$Bind$47);CompilerInitial.en$Match$46=new String("Match");CompilerInitial.exn$Match$46=Array(CompilerInitial.en$Match$46);CompilerInitial.en$Div$45=new String("Div");CompilerInitial.exn$Div$45=Array(CompilerInitial.en$Div$45);CompilerInitial.en$Interrupt=new String("Interrupt");CompilerInitial.exn$Interrupt=Array(CompilerInitial.en$Interrupt);CompilerInitial.en$Overflow$48=new String("Overflow");CompilerInitial.exn$Overflow$48=Array(CompilerInitial.en$Overflow$48);CompilerInitial.en$Subscript$50=new String("Subscript");CompilerInitial.exn$Subscript$50=Array(CompilerInitial.en$Subscript$50);CompilerInitial.en$Size$51=new String("Size");CompilerInitial.exn$Size$51=Array(CompilerInitial.en$Size$51);Con={};Con.some=0;Con.none=1;Con.intinf=0;var dd=SMLtoJs={};SmlPrims={};SmlPrims.option=function(i){return i?[Con.some,i]:[Con.none]};SmlPrims.explode=function(i){var e,t=null;for(e=i.length;e>0;e--)t=[i.charCodeAt(e-1),t];return t};SmlPrims.implode=function(i){var e,t=[];for(e=0;i!=null;i=i[1],e++)t[e]=String.fromCharCode(i[0]);return t.join("")};SmlPrims.charsToCharArray=function(i){var e,t=[];for(e=0;i!=null;i=i[1],e++)t[e]=i[0];return t};SmlPrims.listToArray=function(i){var e,t=[];for(e=0;i!=null;i=i[1],e++)t[e]=i[0];return t};SmlPrims.charArraysConcat=function(i){var e,t=[];for(e=0;i!=null;i=i[1],e++)t=Array.concat(t,i[0]);return t};SmlPrims.concat=function(i){var e,t=[];for(e=0;i!=null;i=i[1],e++)t[e]=i[0];return t.join("")};SmlPrims.length=function i(e){return e==null?0:1+i(e[1])};SmlPrims.arrayMap=function(i){return function(e){var t,r=new Array(e.length);for(t=0;t<e.length;t++)r[t]=i(e[t]);return r}};SmlPrims.charArrayToString=function(i){var e=SmlPrims.arrayMap(String.fromCharCode)(i);return e.join("")};SmlPrims.real_to_bytes=function(i){var e=new ArrayBuffer(8),t=new Float64Array(e,0,1);t[0]=i;var r=new Uint8Array(e,0,8),n=SmlPrims.arrayMap(String.fromCharCode)(r);return n.join("")};SmlPrims.bytes_to_real=function(i){var e=new ArrayBuffer(8),t=new Uint8Array(e,0,8),r;for(r=0;r<8&&r<i.length;r++)t[r]=i.charCodeAt(r);var n=new Float64Array(e,0,1);return n[0]};SmlPrims.wordTableInit=function(i,e){var t,r=new Array(i);for(t=0;t<i;t++)r[t]=e;return r};SmlPrims.chk_ovf_i32=function(i){if(i<-2147483648||i>2147483647)throw CompilerInitial.exn$Overflow$48;return i};SmlPrims.chk_ovf_i31=function(i){if(i<-1073741824||i>1073741823)throw CompilerInitial.exn$Overflow$48;return i};SmlPrims.cut_w32=function(i){return i&4294967295};SmlPrims.cut_w31=function(i){return i&2147483647};SmlPrims.mod_i32=function(i,e,t){if(e==0)throw t;return i>0&&e>0||i<0&&e<0||i%e==0?i%e:i%e+e};SmlPrims.div_i32=function(i,e,t){if(e==0)throw t;if(e==-1&&i==-2147483648)throw CompilerInitial.exn$Overflow$48;return Math.floor(i/e)};SmlPrims.mod_i31=function(i,e,t){if(e==0)throw t;return i>0&&e>0||i<0&&e<0||i%e==0?i%e:i%e+e};SmlPrims.div_i31=function(i,e,t){if(e==0)throw t;if(e==-1&&i==-1073741824)throw CompilerInitial.exn$Overflow$48;return Math.floor(i/e)};SmlPrims.div_w31=function(i,e,t){if(e==0)throw t;return Math.floor(i/e)};SmlPrims.div_w32=function(i,e,t){if(e==0)throw t;return Math.floor(i/e)};SmlPrims.mod_w31=function(i,e,t){if(e==0)throw t;return i%e};SmlPrims.mod_w32=function(i,e,t){if(e==0)throw t;return i%e};SmlPrims.quot=function(i,e){return i<0&&e>=0||i>=0&&e<0?Math.ceil(i/e):Math.floor(i/e)};SmlPrims.w32_to_i32_X=function(i){return i>2147483647?-(4294967295-i)-1:i};SmlPrims.w31_to_i32_X=function(i){return i>1073741823?-(2147483647-i)-1:i};SmlPrims.w31_to_w32_X=function(i){return i>1073741823?i&1073741823|1<<31:i};SmlPrims.i32_to_w32=function(i){return i<0?4294967295- -i+1:i};SmlPrims.i32_to_w31=function(i){return i<0?SmlPrims.cut_w31(4294967295- -i+1):SmlPrims.cut_w31(i)};SmlPrims.sinh=function(i){var e=Math.exp(i);return(e-1/e)/2};SmlPrims.cosh=function(i){var e=Math.exp(i);return(e+1/e)/2};SmlPrims.tanh=function(i){var e=Math.exp(i);return(e-1/e)/(e+1/e)};SmlPrims.trunc=function(i){return i>=0?Math.floor(i):Math.ceil(i)};SmlPrims.getrealtime=function(){var i=-2147483648,e=new Date,t=e.getTime(),r=Math.floor(t/1e3),n=t%1e3*1e3;return[SmlPrims.chk_ovf_i32(r+i),SmlPrims.chk_ovf_i32(n)]};SmlPrims.monthDays=function(i,e){switch(e){case 0:case 2:case 4:case 6:case 7:case 9:case 11:return 31;case 1:return i%4==0&&(i%100!=0||i%400==0)?29:28;default:return 30}};SmlPrims.yearDays=function(i,e,t){var r=t-1,n;for(n=0;n<e;n++)r+=SmlPrims.monthDays(i,n);return r};SmlPrims.localtime=function(i){var e=new Date(i*1e3),t=e.getHours(),r=e.getMinutes(),n=e.getFullYear(),s=e.getDate(),a=e.getDay(),l=e.getMonth(),o=SmlPrims.yearDays(n,l,s),u=e.getSeconds(),h=-1;return[t,h,s,r,l,u,a,o,n]};SmlPrims.gmtime=function(i){var e=new Date(i*1e3),t=e.getUTCHours(),r=e.getUTCMinutes(),n=e.getUTCFullYear(),s=e.getUTCDate(),a=e.getUTCDay(),l=e.getUTCMonth(),o=SmlPrims.yearDays(n,l,s),u=e.getUTCSeconds(),h=-1;return[t,h,s,r,l,u,a,o,n]};SmlPrims.mktime=function(i){var e=i[0],t=i[2],r=i[3],n=i[4],s=i[5],a=i[8],l=new Date(a,n,t,e,r,s,0),o=l.getTime();return Math.floor(o/1e3)};SmlPrims.localoffset=function(){var i=new Date,e=i.getTimezoneOffset();return 60*e};SmlPrims._factories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];SmlPrims._factory=null;SmlPrims.newRequest=function(){if(SmlPrims._factory!=null)return SmlPrims._factory();for(var i=0;i<SmlPrims._factories.length;i++)try{var e=SmlPrims._factories[i],t=e();if(t!=null)return SmlPrims._factory=e,t}catch{continue}SmlPrims._factory=function(){throw new Error("SmlPrims.newRequest not supported by browser")},SmlPrims._factory()};SmlPrims.arraybufferToString=function(i){if(i==null)return null;for(var e=new Uint8Array(i),t=[],r=65535,n=0;n*r<e.length;n++)t.push(String.fromCharCode.apply(null,e.subarray(n*r,(n+1)*r)));return t.join("")};SmlPrims.stringToArrayBuffer=function(i){for(var e=i.length,t=new ArrayBuffer(i.length),r=new Uint8Array(t),n=0;n<r.length;n++)r[n]=i.charCodeAt(n);return t};typeof sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1>"u"&&(sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1={});(function(){sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52=new String("Fail"),sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.posInf$59=1/0,sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.negInf$60=-1/0,sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.ln10$69=Math.log(10),sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.NaN$70=Math.sqrt(-1),sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.localoffset$74=SmlPrims.localoffset(),sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.fail_strftime$75=[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"strftime"],sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.initial_realtime$79=SmlPrims.getrealtime(),sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.initial_rutime$80=[0,0,0,0,0,0];var i=[function(e){return fd(e)}];return sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.printer_set$96=function(e){return i[0]=e,0},sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.printer_get$100=function(e){return i[0]},0})();typeof EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1>"u"&&(EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1={});(function(){return EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.eq_order$252=function(i,e){switch(i){case 0:{switch(e){case 0:return!0;default:return!1}break}case 1:{switch(e){case 1:return!0;default:return!1}break}case 2:{switch(e){case 2:return!0;default:return!1}break}}},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.eq_option$256=function(i,e){var t=e[0],r=e[1];switch(t[0]){case 0:{switch(r[0]){case 0:{var n=t[1],s=r[1];return i([n,s])}default:return!1}break}case 1:{switch(r[0]){case 1:return!0;default:return!1}break}}},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.en$Span$58=new String("Span"),EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Span$58=[EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.en$Span$58],EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.en$Domain$59=new String("Domain"),EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Domain$59=[EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.en$Domain$59],EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.en$Chr$60=new String("Chr"),EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60=[EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.en$Chr$60],EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exnName$61=function(i){return i[0]},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exnMessage$65=function(i){return i[0]},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.s$a$72=function(i){return i[0]},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.s$ik$76=function(i,e){return i[0]=e,0},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.o$83=function(i,e){return function(t){return i(e(t))}},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.before$93=function(i,e){return i},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.ignore$98=function(i){return 0},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.en$Option$104=new String("Option"),EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Option$104=[EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.en$Option$104],EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.getOpt$105=function(i,e){switch(i[0]){case 1:return e;default:return i[1]}},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.isSome$120=function(i){switch(i[0]){case 1:return!1;default:return!0}},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.valOf$128=function(i){switch(i[0]){case 0:return i[1];default:throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Option$104}},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.s$k$139=function(i,e){var t=e[0],r=e[1];return i([t,r])},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.not$146=function(i){return!i},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.s$jl$154=function(i,e){var t=e[0],r=e[1];return!i([t,r])},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161=function(i){return sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.printer_get$100(0)(i)},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.implode$165=function(i){return SmlPrims.implode(i)},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.concat$169=function(i){return SmlPrims.concat(i)},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.s$r$173=function(i,e){return i+e},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.str$180=function(i){return SmlPrims.implode([i,null])},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.size$184=function(i){return i.length},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.ord$188=function(i){return i},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.chr$192=function(i){if(i>=0&&i<256)return i;throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60},EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.explode$211=function(i){var e={};e.$h=function(r,n){e:for(;;){if(r<0)return n;var s=SmlPrims.chk_ovf_i32(r-1),a=[i.charCodeAt(r),n],r=s,n=a;continue e}};var t=e.$h;return t(SmlPrims.chk_ovf_i32(i.length-1),null)},0})();typeof uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1>"u"&&(uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1={});(function(){return uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1.getOpt$53=function(i){return EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.getOpt$105(i[0],i[1])},uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1.isSome$54=function(i){return function(e){return EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.isSome$120(e)}},uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1.valOf$55=function(i){return function(e){return EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.valOf$128(e)}},uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1.filter$56=function(i,e){return i(e)?[0,e]:[1]},uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1.map$67=function(i,e){switch(e[0]){case 1:return[1];default:{var t=e[1];return[0,i(t)]}}},uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1.app$85=function(i,e){switch(e[0]){case 1:return 0;default:{var t=e[1];return i(t)}}},uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1.join$103=function(i){switch(i[0]){case 1:return[1];default:return i[1]}},uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1.mapPartial$113=function(i,e){switch(e[0]){case 1:return[1];default:{var t=e[1];return i(t)}}},uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1.compose$131=function(i,e){return function(t){var r=e(t);switch(r[0]){case 1:return[1];default:{var n=r[1];return[0,i(n)]}}}},uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1.composePartial$147=function(i,e){return function(t){var r=e(t);switch(r[0]){case 1:return[1];default:{var n=r[1];return i(n)}}}},0})();typeof dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1>"u"&&(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1={});(function(){dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.en$Empty$53=new String("Empty"),dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.exn$Empty$53=[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.en$Empty$53],dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.null$54=function(c){return c==null},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$62=function(c){if(c==null)throw dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.exn$Empty$53;return c[0]},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tl$75=function(c){if(c==null)throw dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.exn$Empty$53;return c[1]};var i={};i.$last=function(c){e:for(;;){if(c==null)throw dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.exn$Empty$53;var f=c,d=f[1];if(d==null)return f[0];var m=d,c=m;continue e}},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.last$88=i.$last,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.nth$105=function(c,f){var d={};d.$h=function(v,p){e:for(;;){if(v==null)throw CompilerInitial.exn$Subscript$50;var g=v,k=g[0],S=g[1];if(p==0)return k;var w=S,A=SmlPrims.chk_ovf_i32(p-1),v=w,p=A;continue e}};var m=d.$h;if(f<0)throw CompilerInitial.exn$Subscript$50;return m(c,f)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.drop$139=function(c,f){var d={};d.$h=function(v,p){e:for(;;)switch(p){case 0:return v;default:{if(v==null)throw CompilerInitial.exn$Subscript$50;var g=v,k=g[1],S=k,w=SmlPrims.chk_ovf_i32(p-1),v=S,p=w;continue e}}};var m=d.$h;if(f<0)throw CompilerInitial.exn$Subscript$50;return m(c,f)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.take$174=function(c,f){var d={};d.$h=function(v,p){switch(p){case 0:return null;default:{if(v==null)throw CompilerInitial.exn$Subscript$50;var g=v,k=g[0],S=g[1];return[k,d.$h(S,SmlPrims.chk_ovf_i32(p-1))]}}};var m=d.$h;if(f<0)throw CompilerInitial.exn$Subscript$50;return m(c,f)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.length$209=function(c){var f={};f.$acc=function(m,v){e:for(;;){if(m==null)return v;var p=m,g=p[1],k=g,S=SmlPrims.chk_ovf_i32(v+1),m=k,v=S;continue e}};var d=f.$acc;return d(c,0)};var e={};e.$revAcc=function(c,f){e:for(;;){if(c==null)return f;var d=c,m=d[0],v=d[1],p=v,g=[m,f],c=p,f=g;continue e}};var t=e.$revAcc;dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255=function(c){return t(c,null)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.revAppend$259=function(c,f){return t(c,f)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.s$n$266=function(c,f){var d={};d.$loop=function(v,p){e:for(;;){if(v==null)return p;var g=v,k=g[0],S=g[1],w=S,A=[k,p],v=w,p=A;continue e}};var m=d.$loop;return m(t(c,null),f)};var r={};r.$concat=function(c){if(c==null)return null;var f=c,d=f[0],m=f[1],v=r.$concat(m),p={};p.$loop=function(k,S){e:for(;;){if(k==null)return S;var w=k,A=w[0],_=w[1],W=_,J=[A,S],k=W,S=J;continue e}};var g=p.$loop;return g(t(d,null),v)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.concat$294=r.$concat;var n={};n.$app=function(c,f){e:for(;;){if(f==null)return 0;var d=f,m=d[0],v=d[1];c(m);var p=c,g=v,c=p,f=g;continue e}},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.app$307=n.$app,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$330=function(c,f){var d={};d.$map0=function(p,g){e:for(;;){if(p==null)return g;var k=p,S=k[0],w=k[1],A=w,_=[c(S),g],p=A,g=_;continue e}};var m=d.$map0,v=m(f,null);return t(v,null)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.mapPartial$355=function(c,f){var d={};d.$aux=function(p,g){e:for(;;){if(g==null)return p;var k=g,S=k[0],w=k[1],A=c(S);switch(A[0]){case 0:{var _=A[1],W=[_,p],J=w,p=W,g=J;continue e}default:{var H=p,F=w,p=H,g=F;continue e}}}};var m=d.$aux,v=m(null,f);return t(v,null)};var s={};s.$find=function(c,f){e:for(;;){if(f==null)return[1];var d=f,m=d[0],v=d[1];if(c(m))return[0,m];var p=c,g=v,c=p,f=g;continue e}},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390=s.$find,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.filter$415=function(c,f){var d={};d.$aux=function(p,g){e:for(;;){if(g==null)return p;var k=g,S=k[0],w=k[1];if(c(S)){var A=[S,p],_=w,p=A,g=_;continue e}else{var W=p,J=w,p=W,g=J;continue e}}};var m=d.$aux,v=m(null,f);return t(v,null)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.partition$447=function(c,f){var d={};d.$h=function(v,p,g){e:for(;;){if(v==null)return[t(p,null),t(g,null)];var k=v,S=k[0],w=k[1];if(c(S)){var A=w,_=[S,p],W=g,v=A,p=_,g=W;continue e}else{var J=w,H=p,F=[S,g],v=J,p=H,g=F;continue e}}};var m=d.$h;return m(f,null,null)};var a={};a.$foldr=function(c,f,d){if(d==null)return f;var m=d,v=m[0],p=m[1];return c([v,a.$foldr(c,f,p)])},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.foldr$486=a.$foldr;var l={};l.$foldl=function(c,f,d){e:for(;;){if(d==null)return f;var m=d,v=m[0],p=m[1],g=c,k=c([v,f]),S=p,c=g,f=k,d=S;continue e}},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.foldl$514=l.$foldl;var o={};o.$exists=function(c,f){e:for(;;){if(f==null)return!1;var d=f,m=d[0],v=d[1];if(c(m))return!0;var p=c,g=v,c=p,f=g;continue e}},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.exists$542=o.$exists;var u={};u.$all=function(c,f){e:for(;;){if(f==null)return!0;var d=f,m=d[0],v=d[1];if(c(m)){var p=c,g=v,c=p,f=g;continue e}else return!1}},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.all$567=u.$all,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tabulate$592=function(c,f){var d={};d.$h=function(p,g){e:for(;;)if(p<c){var k=SmlPrims.chk_ovf_i32(p+1),S=[f(p),g],p=k,g=S;continue e}else return g};var m=d.$h;if(c<0)throw CompilerInitial.exn$Size$51;var v=m(0,null);return t(v,null)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.getItem$614=function(c){if(c==null)return[1];var f=c;return[0,[f[0],f[1]]]};var h={};return h.$collate=function(c,f){e:for(;;){var d=f[0];if(d==null)return f[1]==null?2:0;var m=f[1];if(m==null)return 1;var v=d,p=v[0],g=v[1],k=m,S=k[0],w=k[1];switch(c([p,S])){case 2:{var A=c,_=[g,w],c=A,f=_;continue e}case 1:return 1;default:return 0}}},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.collate$627=h.$collate,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.null$670=function(c){return c==null},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674=function(c){if(c==null)throw dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.exn$Empty$53;return c[0]},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tl$675=function(c){if(c==null)throw dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.exn$Empty$53;return c[1]},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.length$676=function(c){var f={};f.$acc=function(m,v){e:for(;;){if(m==null)return v;var p=m,g=p[1],k=g,S=SmlPrims.chk_ovf_i32(v+1),m=k,v=S;continue e}};var d=f.$acc;return d(c,0)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680=function(c){return t(c,null)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.s$n$684=function(c,f){var d={};d.$loop=function(v,p){e:for(;;){if(v==null)return p;var g=v,k=g[0],S=g[1],w=S,A=[k,p],v=w,p=A;continue e}};var m=d.$loop;return m(t(c,null),f)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.app$688=function(c,f){var d={};d.$app=function(v){e:for(;;){if(v==null)return 0;var p=v,g=p[0],k=p[1];c(g);var S=k,v=S;continue e}};var m=d.$app;return m(f)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695=function(c,f){var d={};d.$map0=function(p,g){e:for(;;){if(p==null)return g;var k=p,S=k[0],w=k[1],A=w,_=[c(S),g],p=A,g=_;continue e}};var m=d.$map0,v=m(f,null);return t(v,null)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.foldr$702=function(c,f,d){var m={};m.$foldr=function(p){if(p==null)return f;var g=p,k=g[0],S=g[1];return c([k,m.$foldr(S)])};var v=m.$foldr;return v(d)},dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.foldl$712=function(c,f,d){var m={};m.$foldl=function(p,g){e:for(;;){if(g==null)return p;var k=g,S=k[0],w=k[1],A=c([S,p]),_=w,p=A,g=_;continue e}};var v=m.$foldl;return v(f,d)},0})();typeof Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1>"u"&&(Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1={});(function(){return Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.en$UnequalLengths$52=new String("UnequalLengths"),Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.exn$UnequalLengths$52=[Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.en$UnequalLengths$52],Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.zip$53=function(i,e){var t={};t.$h=function(n,s,a){e:for(;;){if(n==null)return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(a);if(s==null)return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(a);var l=n,o=l[0],u=l[1],h=s,c=h[0],f=h[1],d=u,m=f,v=[[o,c],a],n=d,s=m,a=v;continue e}};var r=t.$h;return r(i,e,null)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.zipEq$94=function(i,e){var t={};t.$h=function(n,s,a){e:for(;;)if(n==null){if(s==null)return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(a);throw Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.exn$UnequalLengths$52}else{if(s==null)throw Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.exn$UnequalLengths$52;var l=n,o=l[0],u=l[1],h=s,c=h[0],f=h[1],d=u,m=f,v=[[o,c],a],n=d,s=m,a=v;continue e}};var r=t.$h;return r(i,e,null)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.unzip$138=function(i){var e={};e.$h=function(r,n,s){e:for(;;){if(r==null)return[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(n),dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(s)];var a=r,l=a[0],o=l[0],u=l[1],h=a[1],c=h,f=[o,n],d=[u,s],r=c,n=f,s=d;continue e}};var t=e.$h;return t(i,null,null)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.map$167=function(i,e){var t=e[0],r=e[1],n={};n.$h=function(a,l,o){e:for(;;){if(a==null)return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(o);if(l==null)return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(o);var u=a,h=u[0],c=u[1],f=l,d=f[0],m=f[1],v=c,p=m,g=[i([h,d]),o],a=v,l=p,o=g;continue e}};var s=n.$h;return s(t,r,null)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.mapEq$211=function(i,e){var t=e[0],r=e[1],n={};n.$h=function(a,l,o){e:for(;;)if(a==null){if(l==null)return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(o);throw Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.exn$UnequalLengths$52}else{if(l==null)throw Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.exn$UnequalLengths$52;var u=a,h=u[0],c=u[1],f=l,d=f[0],m=f[1],v=c,p=m,g=[i([h,d]),o],a=v,l=p,o=g;continue e}};var s=n.$h;return s(t,r,null)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.app$260=function(i,e){var t=e[0],r=e[1],n={};n.$h=function(a,l){e:for(;;){if(a==null)return 0;if(l==null)return 0;var o=a,u=o[0],h=o[1],c=l,f=c[0],d=c[1];i([u,f]);var m=h,v=d,a=m,l=v;continue e}};var s=n.$h;return s(t,r)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.appEq$299=function(i,e){var t=e[0],r=e[1],n={};n.$h=function(a,l){e:for(;;)if(a==null){if(l==null)return 0;throw Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.exn$UnequalLengths$52}else{if(l==null)throw Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.exn$UnequalLengths$52;var o=a,u=o[0],h=o[1],c=l,f=c[0],d=c[1];i([u,f]);var m=h,v=d,a=m,l=v;continue e}};var s=n.$h;return s(t,r)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.all$341=function(i,e){var t=e[0],r=e[1],n={};n.$h=function(a,l){e:for(;;){if(a==null)return!0;if(l==null)return!0;var o=a,u=o[0],h=o[1],c=l,f=c[0],d=c[1];if(i([u,f])){var m=h,v=d,a=m,l=v;continue e}else return!1}};var s=n.$h;return s(t,r)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.allEq$382=function(i,e){var t=e[0],r=e[1],n={};n.$h=function(a,l){e:for(;;){if(a==null)return l==null;if(l==null)return!1;var o=a,u=o[0],h=o[1],c=l,f=c[0],d=c[1];if(i([u,f])){var m=h,v=d,a=m,l=v;continue e}else return!1}};var s=n.$h;return s(t,r)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.exists$426=function(i,e){var t=e[0],r=e[1],n={};n.$h=function(a,l){e:for(;;){if(a==null)return!1;if(l==null)return!1;var o=a,u=o[0],h=o[1],c=l,f=c[0],d=c[1];if(i([u,f]))return!0;var m=h,v=d,a=m,l=v;continue e}};var s=n.$h;return s(t,r)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.foldr$467=function(i,e,t){var r=t[0],n=t[1],s={};s.$h=function(l,o){if(l==null)return e;if(o==null)return e;var u=l,h=u[0],c=u[1],f=o,d=f[0],m=f[1];return i([h,d,s.$h(c,m)])};var a=s.$h;return a(r,n)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.foldrEq$507=function(i,e,t){var r=t[0],n=t[1],s={};s.$h=function(l,o){if(l==null){if(o==null)return e;throw Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.exn$UnequalLengths$52}else{if(o==null)throw Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.exn$UnequalLengths$52;var u=l,h=u[0],c=u[1],f=o,d=f[0],m=f[1];return i([h,d,s.$h(c,m)])}};var a=s.$h;return a(r,n)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.foldl$550=function(i,e,t){var r=t[0],n=t[1],s={};s.$h=function(l,o,u){e:for(;;){if(o==null)return l;if(u==null)return l;var h=o,c=h[0],f=h[1],d=u,m=d[0],v=d[1],p=i([c,m,l]),g=f,k=v,l=p,o=g,u=k;continue e}};var a=s.$h;return a(e,r,n)},Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.foldlEq$597=function(i,e,t){var r=t[0],n=t[1],s={};s.$h=function(l,o,u){e:for(;;)if(o==null){if(u==null)return l;throw Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.exn$UnequalLengths$52}else{if(u==null)throw Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.exn$UnequalLengths$52;var h=o,c=h[0],f=h[1],d=u,m=d[0],v=d[1],p=i([c,m,l]),g=f,k=v,l=p,o=g,u=k;continue e}};var a=s.$h;return a(e,r,n)},0})();typeof EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1>"u"&&(EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1={});(function(){return EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.eq_radix$304=function(i,e){switch(i){case 0:{switch(e){case 0:return!0;default:return!1}break}case 1:{switch(e){case 1:return!0;default:return!1}break}case 2:{switch(e){case 2:return!0;default:return!1}break}case 3:{switch(e){case 3:return!0;default:return!1}break}}},EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.eq_realfmt$308=function(i,e){switch(i[0]){case 0:{switch(e[0]){case 0:{var t=i[1],r=e[1];return EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.eq_option$256(function(o){return o[0]==o[1]},[t,r])}default:return!1}break}case 1:{switch(e[0]){case 1:{var n=i[1],s=e[1];return EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.eq_option$256(function(o){return o[0]==o[1]},[n,s])}default:return!1}break}case 2:{switch(e[0]){case 2:{var a=i[1],l=e[1];return EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.eq_option$256(function(o){return o[0]==o[1]},[a,l])}default:return!1}break}case 3:{switch(e[0]){case 3:return!0;default:return!1}break}}},EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.padLeft$113=function(i,e,t){var r=t.length,n={};n.$f=function(a){switch(a){case 0:return null;default:return[i,n.$f(SmlPrims.chk_ovf_i32(a-1))]}};var s=n.$f;return e<=r?t:SmlPrims.concat([SmlPrims.implode(s(SmlPrims.chk_ovf_i32(e-r))),[t,null]])},EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.padRight$137=function(i,e,t){var r=t.length,n={};n.$f=function(a){switch(a){case 0:return null;default:return[i,n.$f(SmlPrims.chk_ovf_i32(a-1))]}};var s=n.$f;return e<=r?t:SmlPrims.concat([t,[SmlPrims.implode(s(SmlPrims.chk_ovf_i32(e-r))),null]])},EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.scanString$161=function(i,e){var t=e.length,r=i(function(a){if(a>=t)return[1];var l,o;if(a<0||a>=e.length)throw CompilerInitial.exn$Subscript$50;return o=e.charCodeAt(a),l=[o,SmlPrims.chk_ovf_i32(a+1)],[0,l]})(0);switch(r[0]){case 1:return[1];default:{var n=r[1],s=n[0];return[0,s]}}},EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.splitl$204=function(i,e,t){var r={};r.$h=function(s,a){e:for(;;){var l=e(a);switch(l[0]){case 1:{var o,u,h={};h.$rev_rec=function(A){t:for(;;){var _=A[0];if(_==null)return A;var W=_,J=W[0],H=W[1],F=A[1],V=[H,[J,F]],A=V;continue t}};var c=h.$rev_rec;return u=c([s,null])[1],o=SmlPrims.implode(u),[o,a];break}default:{var f=l[1],d=f[0],m=f[1];if(i(d)){var v=[d,s],p=m,s=v,a=p;continue e}else{var g,k,S={};S.$rev_rec=function(A){t:for(;;){var _=A[0];if(_==null)return A;var W=_,J=W[0],H=W[1],F=A[1],V=[H,[J,F]],A=V;continue t}};var w=S.$rev_rec;return k=w([s,null])[1],g=SmlPrims.implode(k),[g,a]}}}}};var n=r.$h;return n(null,t)},EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.takel$234=function(i,e,t){return EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.splitl$204(i,e,t)[0]},EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.dropl$248=function(i,e,t){return EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.splitl$204(i,e,t)[1]},EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.skipWS$274=function(i,e){return EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.splitl$204(function(t){return t==32?!0:9<=t?t<=13:!1},i,e)[1]},0})();typeof Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1>"u"&&(Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1={});(function(){Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.explode$95=function(t){var r={};r.$h=function(s,a){e:for(;;){if(s<0)return a;var l=SmlPrims.chk_ovf_i32(s-1),o=[t.charCodeAt(s),a],s=l,a=o;continue e}};var n=r.$h;return n(SmlPrims.chk_ovf_i32(t.length-1),null)},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.dropl$184=function(t,r){var n=r[0],s=r[1],a=r[2],l,o,u=SmlPrims.chk_ovf_i32(s+a),h={};h.$scan0=function(f,d,m){e:for(;;)if(f<d&&t(m.charCodeAt(f))){var v=SmlPrims.chk_ovf_i32(f+1),p=d,g=m,f=v,d=p,m=g;continue e}else return f};var c=h.$scan0;return o=c(s,u,n),l=SmlPrims.chk_ovf_i32(o-s),[n,SmlPrims.chk_ovf_i32(s+l),SmlPrims.chk_ovf_i32(a-l)]},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.dropr$201=function(t,r){var n=r[0],s=r[1],a=r[2],l=SmlPrims.chk_ovf_i32(s-1),o={};o.$scan=function(h){e:for(;;)if(h>l&&t(n.charCodeAt(h))){var c=SmlPrims.chk_ovf_i32(h-1),h=c;continue e}else return h};var u=o.$scan;return[n,s,SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(u(SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(s+a)-1))-s)+1)]},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.takel$218=function(t,r){var n=r[0],s=r[1],a=r[2],l=n,o=s,u,h,c=SmlPrims.chk_ovf_i32(s+a),f={};f.$scan0=function(m,v,p){e:for(;;)if(m<v&&t(p.charCodeAt(m))){var g=SmlPrims.chk_ovf_i32(m+1),k=v,S=p,m=g,v=k,p=S;continue e}else return m};var d=f.$scan0;return h=d(s,c,n),u=SmlPrims.chk_ovf_i32(h-s),[l,o,u]},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.taker$235=function(t,r){var n=r[0],s=r[1],a=r[2],l=SmlPrims.chk_ovf_i32(s-1),o={};o.$scan=function(c){e:for(;;)if(c>l&&t(n.charCodeAt(c))){var f=SmlPrims.chk_ovf_i32(c-1),c=f;continue e}else return c};var u=o.$scan,h=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(u(SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(s+a)-1))-s)+1);return[n,SmlPrims.chk_ovf_i32(s+h),SmlPrims.chk_ovf_i32(a-h)]},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.splitl$252=function(t,r){var n=r[0],s=r[1],a=r[2],l,o,u=SmlPrims.chk_ovf_i32(s+a),h={};h.$scan0=function(f,d,m){e:for(;;)if(f<d&&t(m.charCodeAt(f))){var v=SmlPrims.chk_ovf_i32(f+1),p=d,g=m,f=v,d=p,m=g;continue e}else return f};var c=h.$scan0;return o=c(s,u,n),l=SmlPrims.chk_ovf_i32(o-s),[[n,s,l],[n,SmlPrims.chk_ovf_i32(s+l),SmlPrims.chk_ovf_i32(a-l)]]},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.splitr$269=function(t,r){var n=r[0],s=r[1],a=r[2],l=SmlPrims.chk_ovf_i32(s-1),o={};o.$scan=function(c){e:for(;;)if(c>l&&t(n.charCodeAt(c))){var f=SmlPrims.chk_ovf_i32(c-1),c=f;continue e}else return c};var u=o.$scan,h=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(u(SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(s+a)-1))-s)+1);return[[n,s,h],[n,SmlPrims.chk_ovf_i32(s+h),SmlPrims.chk_ovf_i32(a-h)]]},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.translate$286=function(t,r){var n=r[0],s=r[1],a=r[2],l=SmlPrims.chk_ovf_i32(s+a),o={};o.$h=function(h,c){e:for(;;){if(h>=l)return c;var f=SmlPrims.chk_ovf_i32(h+1),d=[t(n.charCodeAt(h)),c],h=f,c=d;continue e}};var u=o.$h;return SmlPrims.concat(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680(u(s,null)))},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.tokens$310=function(t,r){var n={};n.$h=function(p,g,k){return function(S){if(k==0)return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680(S);var w,A,_,W=SmlPrims.chk_ovf_i32(g+k),J={};J.$scan0=function(T,O,B){e:for(;;){var E;if(T<O){var L=B.charCodeAt(T);E=!t(L)}else E=!1;if(E){var N=SmlPrims.chk_ovf_i32(T+1),R=O,K=B,T=N,O=R,B=K;continue e}else return T}};var H=J.$scan0;_=H(g,W,p),A=SmlPrims.chk_ovf_i32(_-g),w=[[p,g,A],[p,SmlPrims.chk_ovf_i32(g+A),SmlPrims.chk_ovf_i32(k-A)]];var F=w[0],V=w[1],U,y=V[0],P=V[1],C=V[2],b,x,$,I=SmlPrims.chk_ovf_i32(P+C),D={};D.$scan0=function(T,O,B){e:for(;;)if(T<O&&t(B.charCodeAt(T))){var E=SmlPrims.chk_ovf_i32(T+1),L=O,N=B,T=E,O=L,B=N;continue e}else return T};var M=D.$scan0;return $=M(P,I,y),x=SmlPrims.chk_ovf_i32($-P),b=[y,SmlPrims.chk_ovf_i32(P+x),SmlPrims.chk_ovf_i32(C-x)],U=n.$h(b[0],b[1],b[2]),U([F,S])}};var s=n.$h,a,l=r[0],o=r[1],u=r[2],h,c,f,d=SmlPrims.chk_ovf_i32(o+u),m={};m.$scan0=function(p,g,k){e:for(;;)if(p<g&&t(k.charCodeAt(p))){var S=SmlPrims.chk_ovf_i32(p+1),w=g,A=k,p=S,g=w,k=A;continue e}else return p};var v=m.$scan0;return f=v(o,d,l),c=SmlPrims.chk_ovf_i32(f-o),h=[l,SmlPrims.chk_ovf_i32(o+c),SmlPrims.chk_ovf_i32(u-c)],a=s(h[0],h[1],h[2]),a(null)},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.fields$343=function(t,r){var n={};n.$h=function(a,l,o){return function(u){var h,c,f,d=SmlPrims.chk_ovf_i32(l+o),m={};m.$scan0=function(J,H,F){e:for(;;){var V;if(J<H){var U=F.charCodeAt(J);V=!t(U)}else V=!1;if(V){var y=SmlPrims.chk_ovf_i32(J+1),P=H,C=F,J=y,H=P,F=C;continue e}else return J}};var v=m.$scan0;f=v(l,d,a),c=SmlPrims.chk_ovf_i32(f-l),h=[[a,l,c],[a,SmlPrims.chk_ovf_i32(l+c),SmlPrims.chk_ovf_i32(o-c)]];var p=h[0],g=h[1],k=g[2];if(k==0)return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680([p,u]);var S,w=g[0],A=g[1],_=g[2],W=_==0?g:[w,SmlPrims.chk_ovf_i32(A+1),SmlPrims.chk_ovf_i32(_-1)];return S=n.$h(W[0],W[1],W[2]),S([p,u])}};var s=n.$h;return s(r[0],r[1],r[2])(null)},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.foldl$386=function(t,r,n){var s=n[0],a=n[1],l=n[2],o=SmlPrims.chk_ovf_i32(a+l),u={};u.$h=function(c,f){e:for(;;){if(c>=o)return f;var d=SmlPrims.chk_ovf_i32(c+1),m=t([s.charCodeAt(c),f]),c=d,f=m;continue e}};var h=u.$h;return h(a,r)};var i={};i.$fromMLescape=function(t,r){var n={};n.$skipform=function(D){e:for(;;){var M=t(D);switch(M[0]){case 1:return[1];default:{var T=M[1],O=T[0];switch(O){case 92:{var B=T[1],E=t(B);switch(E[0]){case 1:return[1];default:{var L=E[1];switch(L[0]){case 92:{var N=L[1];return i.$fromMLescape(t,N)}default:return E}}}break}default:{var R=T[1];if(O==32||(9<=O?O<=13:!1)){var K=R,D=K;continue e}else return[1]}}}}}};var s=n.$skipform,a=t(r);switch(a[0]){case 1:return[1];default:{var l=a[1];switch(l[0]){case 97:return[0,[7,l[1]]];case 98:return[0,[8,l[1]]];case 116:return[0,[9,l[1]]];case 110:return[0,[10,l[1]]];case 114:return[0,[13,l[1]]];case 118:return[0,[11,l[1]]];case 102:return[0,[12,l[1]]];case 34:return[0,[34,l[1]]];case 92:return[0,[92,l[1]]];case 32:{var o=l[1];return s(o)}case 10:{var u=l[1];return s(u)}case 9:{var h=l[1];return s(h)}case 94:{var c=l[1],f=t(c);switch(f[0]){case 1:return[1];default:{var d=f[1],m=d[0],v=d[1];if(64<=m&&m<=95){var p,g,k=SmlPrims.chk_ovf_i32(m-64);if(k>=0&&k<256)g=k;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;return p=[g,v],[0,p]}else return[1]}}break}default:try{var S,w=t(r);switch(w[0]){case 1:throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;default:{var A=w[1],_=A[0],W=A[1];if(48<=_&&_<=57){var J=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(0)+_)-48),H=t(W);switch(H[0]){case 1:throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;default:{var F=H[1],V=F[0],U=F[1];if(48<=V&&V<=57){var y=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(J*10)+V)-48),P=t(U);switch(P[0]){case 1:throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;default:{var C=P[1],b=C[0],x=C[1];if(48<=b&&b<=57){var $=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(y*10)+b)-48),I;if($>=0&&$<256)I=$;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;S=[I,x]}else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60}}}else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60}}}else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60}}return[0,S]}catch(D){return function(M){var T=M;if(T[0]==EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.en$Chr$60)return[1];throw M}(D)}}}}},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.fromMLescape$465=i.$fromMLescape,Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.toMLescape$624=function(t){switch(t){case 92:return"\\\\";case 34:return'\\"';default:if(32<=t){if(t<=126)return SmlPrims.implode([t,null]);var r=t,n,s,a=92,l,o,u,h=SmlPrims.div_i32(r,100,CompilerInitial.exn$Div$45),c=SmlPrims.chk_ovf_i32(48+h);if(c>=0&&c<256)u=c;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;var f,d,m,v=SmlPrims.mod_i32(SmlPrims.div_i32(r,10,CompilerInitial.exn$Div$45),10,CompilerInitial.exn$Div$45),p=SmlPrims.chk_ovf_i32(48+v);if(p>=0&&p<256)m=p;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;var g,k,S,w=SmlPrims.mod_i32(r,10,CompilerInitial.exn$Div$45),A=SmlPrims.chk_ovf_i32(48+w);if(A>=0&&A<256)S=A;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;return k=[S,null],g=k,d=[m,g],f=d,o=[u,f],l=o,s=[a,l],n=s,SmlPrims.implode(n)}else switch(t){case 7:return"\\a";case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 11:return"\\v";case 12:return"\\f";default:{var _,W,J=92,H,F,V=94,U,y,P,C=SmlPrims.chk_ovf_i32(t+64);if(C>=0&&C<256)P=C;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;return y=[P,null],U=y,F=[V,U],H=F,W=[J,H],_=W,SmlPrims.implode(_)}}}},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.toCescape$660=function(t){switch(t){case 92:return"\\\\";case 63:return"\\?";case 39:return"\\'";case 34:return'\\"';default:{if(32<=t&&t<=126)return SmlPrims.implode([t,null]);switch(t){case 10:return"\\n";case 13:return"\\r";case 9:return"\\t";case 11:return"\\v";case 8:return"\\b";case 12:return"\\f";case 7:return"\\a";default:{var r=t,n,s,a=92,l,o,u,h=SmlPrims.div_i32(r,64,CompilerInitial.exn$Div$45),c=SmlPrims.chk_ovf_i32(48+h);if(c>=0&&c<256)u=c;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;var f,d,m,v=SmlPrims.mod_i32(SmlPrims.div_i32(r,8,CompilerInitial.exn$Div$45),8,CompilerInitial.exn$Div$45),p=SmlPrims.chk_ovf_i32(48+v);if(p>=0&&p<256)m=p;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;var g,k,S,w=SmlPrims.mod_i32(r,8,CompilerInitial.exn$Div$45),A=SmlPrims.chk_ovf_i32(48+w);if(A>=0&&A<256)S=A;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;return k=[S,null],g=k,d=[m,g],f=d,o=[u,f],l=o,s=[a,l],n=s,SmlPrims.implode(n)}}}}};var e=function(t,r){var n={};n.$fromHex=function(C,b){e:for(;;){var x=t(C);switch(x[0]){case 1:{var $;if(b>=0&&b<256)$=b;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;return[$,C]}default:{var I=x[1],D=I[0],M=I[1];if(48<=D&&D<=57||97<=D&&D<=102||(65<=D?D<=70:!1)){var T=M,O=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(b*16)+(48<=D&&D<=57?SmlPrims.chk_ovf_i32(D-48):SmlPrims.mod_i32(SmlPrims.chk_ovf_i32(D-55),32,CompilerInitial.exn$Div$45))),C=T,b=O;continue e}else{var B;if(b>=0&&b<256)B=b;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;return[B,C]}}}}};var s=n.$fromHex,a=t(r);switch(a[0]){case 1:throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;default:{var l=a[1],o=l[0];switch(o){case 110:return[10,l[1]];case 114:return[13,l[1]];case 116:return[9,l[1]];case 118:return[11,l[1]];case 98:return[8,l[1]];case 102:return[12,l[1]];case 97:return[7,l[1]];case 92:return[92,l[1]];case 63:return[63,l[1]];case 39:return[39,l[1]];case 34:return[34,l[1]];case 120:{var u=l[1],h=t(u);switch(h[0]){case 1:throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;default:{var c=h[1],f=c[0],d=c[1];if(48<=f&&f<=57||97<=f&&f<=102||(65<=f?f<=70:!1))return s(d,48<=f&&f<=57?SmlPrims.chk_ovf_i32(f-48):SmlPrims.mod_i32(SmlPrims.chk_ovf_i32(f-55),32,CompilerInitial.exn$Div$45));throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60}}break}default:{var m=l[1];if(48<=o&&o<=55){var v=SmlPrims.chk_ovf_i32(o-48),p=t(m);switch(p[0]){case 1:{var g;if(v>=0&&v<256)g=v;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;return[g,m]}default:{var k=p[1],S=k[0],w=k[1];if(48<=S&&S<=55){var A=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(v*8)+S)-48),_=t(w);switch(_[0]){case 1:{var W;if(A>=0&&A<256)W=A;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;return[W,w]}default:{var J=_[1],H=J[0],F=J[1];if(48<=H&&H<=55){var V=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(A*8)+H)-48),U;if(V>=0&&V<256)U=V;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;return[U,F]}else{var y;if(A>=0&&A<256)y=A;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;return[y,w]}}}}else{var P;if(v>=0&&v<256)P=v;else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60;return[P,m]}}}}else throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60}}}}};return Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.fromCescape$834=function(t,r){try{return[0,e(t,r)]}catch(n){return function(s){var a=s;if(a[0]==EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.en$Chr$60)return[1];if(a[0]==CompilerInitial.en$Overflow$48)return[1];throw s}(n)}},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.fromCString$846=function(t){var r={};r.$h=function(c,f){e:for(;;){var d;if(f==null)d=[1];else{var m=f;d=[0,[m[0],m[1]]]}switch(d[0]){case 1:return SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680(c));default:{var v=d[1],p=v[0];switch(p){case 92:{var g=v[1],k=e(function(U){return function(y){if(y==null)return[1];var P=y;return[0,[P[0],P[1]]]}}([]),g),S=k[0],w=k[1],A=[S,c],_=w,c=A,f=_;continue e}default:{var W=v[1],J=[p,c],H=W,c=J,f=H;continue e}}}}}};var n=r.$h;try{var s,a=n,l=null,o,u={};u.$h=function(c,f){e:for(;;){if(c<0)return f;var d=SmlPrims.chk_ovf_i32(c-1),m=[t.charCodeAt(c),f],c=d,f=m;continue e}};var h=u.$h;return o=h(SmlPrims.chk_ovf_i32(t.length-1),null),s=a(l,o),[0,s]}catch(c){return function(f){var d=f;if(d[0]==EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.en$Chr$60)return[1];if(d[0]==CompilerInitial.en$Overflow$48)return[1];throw f}(c)}},0})();typeof h8UYb53cympluUQFSuaSASi$3basis$0Char$1>"u"&&(h8UYb53cympluUQFSuaSASi$3basis$0Char$1={});(function(){return h8UYb53cympluUQFSuaSASi$3basis$0Char$1.sub_unsafe$52=function(i,e){return i.charCodeAt(e)},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.size$59=function(i){return i.length},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.ord$63=function(i){return i},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.unsafe_chr$67=function(i){return i},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.chr$71=function(i){if(i>=0&&i<256)return i;throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.not$83=function(i){return!i},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.minChar$91=0,h8UYb53cympluUQFSuaSASi$3basis$0Char$1.maxChar$92=255,h8UYb53cympluUQFSuaSASi$3basis$0Char$1.maxOrd$93=255,h8UYb53cympluUQFSuaSASi$3basis$0Char$1.succ$94=function(i){var e=i;if(e<255)return SmlPrims.chk_ovf_i32(e+1);throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.pred$103=function(i){var e=i;if(e>0)return SmlPrims.chk_ovf_i32(e-1);throw EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.exn$Chr$60},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.contains$112=function(i,e){var t=i.length,r={};r.$loop=function(s){e:for(;;){if(s>=t)return!1;if(i.charCodeAt(s)==e)return!0;var a=SmlPrims.chk_ovf_i32(s+1),s=a;continue e}};var n=r.$loop;return n(0)},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.notContains$132=function(i,e){var t,r=i.length,n={};n.$loop=function(a){e:for(;;){if(a>=r)return!1;if(i.charCodeAt(a)==e)return!0;var l=SmlPrims.chk_ovf_i32(a+1),a=l;continue e}};var s=n.$loop;return t=s(0),!t},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.isLower$139=function(i){return 97<=i?i<=122:!1},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.isUpper$147=function(i){return 65<=i?i<=90:!1},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.isDigit$155=function(i){return 48<=i?i<=57:!1},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.isAlpha$163=function(i){return 97<=i&&i<=122?!0:65<=i?i<=90:!1},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.isHexDigit$171=function(i){return 48<=i&&i<=57||97<=i&&i<=102?!0:65<=i?i<=70:!1},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.isAlphaNum$195=function(i){return 97<=i&&i<=122||(65<=i?i<=90:!1)?!0:48<=i?i<=57:!1},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.isPrint$203=function(i){return i>=32?i<127:!1},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.isSpace$211=function(i){return i==32?!0:9<=i?i<=13:!1},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.isGraph$223=function(i){return i>=32&&i<127?!(i==32||(9<=i?i<=13:!1)):!1},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.isPunct$231=function(i){return i>=32&&i<127&&!(i==32||(9<=i?i<=13:!1))?!(97<=i&&i<=122||(65<=i?i<=90:!1)||(48<=i?i<=57:!1)):!1},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.isAscii$239=function(i){return i<=127},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.isCntrl$243=function(i){return i<32?!0:i>=127},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toLower$251=function(i){return 65<=i&&i<=90?SmlPrims.chk_ovf_i32(i+32):i},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toUpper$263=function(i){return 97<=i&&i<=122?SmlPrims.chk_ovf_i32(i-32):i},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toString$275=function(i){return Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.toMLescape$624(i)},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.scan$279=function(i,e){var t=i(e);switch(t[0]){case 1:return[1];default:{var r=t[1];switch(r[0]){case 92:{var n=r[1],s=Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.fromMLescape$465(i,n);switch(s[0]){case 1:return[1];default:{var a=s[1];return[0,a]}}break}default:return[0,r]}}}},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.fromString$303=function(i){var e=0<i.length?[0,[i.charCodeAt(0),SmlPrims.chk_ovf_i32(1)]]:[1];switch(e[0]){case 1:return[1];default:{var t=e[1],r=t[0];switch(r){case 92:{var n=t[1],s=Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.fromMLescape$465(function(o){return o<i.length?[0,[i.charCodeAt(o),SmlPrims.chk_ovf_i32(o+1)]]:[1]},n);switch(s[0]){case 1:return[1];default:{var a=s[1],l=a[0];return[0,l]}}break}default:return[0,r]}}}},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.fromCString$333=function(i){var e=0<i.length?[0,[i.charCodeAt(0),SmlPrims.chk_ovf_i32(1)]]:[1];switch(e[0]){case 1:return[1];default:{var t=e[1],r=t[0];switch(r){case 92:{var n=t[1],s=Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.fromCescape$834(function(o){return o<i.length?[0,[i.charCodeAt(o),SmlPrims.chk_ovf_i32(o+1)]]:[1]},n);switch(s[0]){case 1:return[1];default:{var a=s[1],l=a[0];return[0,l]}}break}default:return[0,r]}}}},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toCString$363=function(i){return Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.toCescape$660(i)},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.compare$367=function(i,e){return i<e?0:i>e?1:2},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.s$j$382=function(i,e){return i<e},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.s$jk$384=function(i,e){return i<=e},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.s$l$386=function(i,e){return i>e},h8UYb53cympluUQFSuaSASi$3basis$0Char$1.s$lk$388=function(i,e){return i>=e},0})();typeof h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1>"u"&&(h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1={});(function(){return h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.sub_unsafe$52=function(i,e){return i.charCodeAt(e)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.size$59=function(i){return i.length},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.s$r$63=function(i,e){return i+e},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.sub_array_unsafe$70=function(i,e){return i[e]},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.update_array_unsafe$77=function(i,e,t){return i[e]=t,0},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.alloc_array_unsafe$86=function(i){return Array(i)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.length_array$90=function(i){return i.length},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.array_to_string$94=function(i){return SmlPrims.charArrayToString(i)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.maxSize$98=1073741823,h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.sub$99=function(i,e){if(e<0||e>=i.length)throw CompilerInitial.exn$Subscript$50;return i.charCodeAt(e)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.extract$114=function(i,e,t){var r;switch(t[0]){case 1:{r=SmlPrims.chk_ovf_i32(i.length-e);break}default:r=t[1]}var n;if(e<0||r<0||r>1073741823||e>i.length||SmlPrims.chk_ovf_i32(e+r)>i.length)throw CompilerInitial.exn$Subscript$50;n=Array(r);var s={};s.$blit=function(l,o){e:for(;;){if(o>=r)return 0;var u=i.charCodeAt(l);n[o]=u;var h=SmlPrims.chk_ovf_i32(l+1),c=SmlPrims.chk_ovf_i32(o+1),l=h,o=c;continue e}};var a=s.$blit;return a(e,0),SmlPrims.charArrayToString(n)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.substring$167=function(i,e,t){return h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.extract$114(i,e,[0,t])},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.concat$176=function(i){return SmlPrims.concat(i)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.concatWith$180=function(i,e){if(e==null)return"";var t,r=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tl$675,n,s=null,a={};a.$foldr=function(o){if(o==null)return s;var u=o,h=u[0],c=u[1];return[i,[h,a.$foldr(c)]]};var l=a.$foldr;return n=l(e),t=r(n),SmlPrims.concat(t)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.implode$203=function(i){return SmlPrims.implode(i)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.explode$207=function(i){var e={};e.$h=function(r,n){e:for(;;){if(r<0)return n;var s=SmlPrims.chk_ovf_i32(r-1),a=[i.charCodeAt(r),n],r=s,n=a;continue e}};var t=e.$h;return t(SmlPrims.chk_ovf_i32(i.length-1),null)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.str$211=function(i){return SmlPrims.implode([i,null])},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.translate$215=function(i,e){return Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.translate$286(i,[e,0,e.length])},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.tokens$222=function(i,e){return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(t){var r=t[0],n=t[1],s=t[2];return h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.extract$114(r,n,[0,s])},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.tokens$310(i,[e,0,e.length]))},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.fields$229=function(i,e){return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(t){var r=t[0],n=t[1],s=t[2];return h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.extract$114(r,n,[0,s])},Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.fields$343(i,[e,0,e.length]))},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.map$236=function(i,e){var t=e.length;if(t<0||t>1073741823)throw CompilerInitial.exn$Size$51;var r=Array(t),n={};n.$loop=function(a){e:for(;;)if(a<t){r[a]=i(e.charCodeAt(a));var l=SmlPrims.chk_ovf_i32(a+1),a=l;continue e}else return 0};var s=n.$loop;return s(0),SmlPrims.charArrayToString(r)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.isSuffix$240=function(i,e){var t=i.length,r=e.length,n=SmlPrims.chk_ovf_i32(r-t),s={};s.$h=function(l){e:for(;;){if(l==t)return!0;if(i.charCodeAt(l)==e.charCodeAt(SmlPrims.chk_ovf_i32(l+n))){var o=SmlPrims.chk_ovf_i32(l+1),l=o;continue e}else return!1}};var a=s.$h;return t<=r?a(0):!1},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.isSubstring$266=function(i,e){switch(i){case"":return!0;default:{var t=i.length,r=e.length,n=SmlPrims.chk_ovf_i32(t-1),s=SmlPrims.chk_ovf_i32(r-t),a={};a.$issub=function(o){e:for(;;)if(o<=s){var u;if(i.charCodeAt(n)==e.charCodeAt(SmlPrims.chk_ovf_i32(n+o))){var h={};h.$h=function(d){t:for(;;){if(d>=n)return!0;if(i.charCodeAt(d)==e.charCodeAt(SmlPrims.chk_ovf_i32(d+o))){var m=SmlPrims.chk_ovf_i32(d+1),d=m;continue t}else return!1}};var c=h.$h;u=c(0)}else u=!1;if(u)return!0;var f=SmlPrims.chk_ovf_i32(o+1),o=f;continue e}else return!1};var l=a.$issub;return l(0)}}},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.isPrefix$319=function(i,e){var t=i.length,r=e.length,n=t<r?t:r,s={};s.$h=function(l){e:for(;;){if(l==n)return!0;if(i.charCodeAt(l)==e.charCodeAt(l)){var o=SmlPrims.chk_ovf_i32(l+1),l=o;continue e}else return!1}};var a=s.$h;return t<=r?a(0):!1},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.compare$349=function(i,e){return i<e?0:i>e?1:2},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.collate$364=function(i,e){var t=e[0],r=e[1],n=t.length,s=r.length,a=n<s?n:s,l={};l.$h=function(u){e:for(;;){if(u==a)return n<s?0:n>s?1:2;switch(i([t.charCodeAt(u),r.charCodeAt(u)])){case 0:return 0;case 1:return 1;default:{var h=SmlPrims.chk_ovf_i32(u+1),u=h;continue e}}}};var o=l.$h;return o(0)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.fromString$403=function(i){var e={};e.$h=function(r,n){e:for(;;){var s=r<i.length?[0,[i.charCodeAt(r),SmlPrims.chk_ovf_i32(r+1)]]:[1];switch(s[0]){case 1:return[0,SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$680(n))];default:{var a=s[1],l=a[0];switch(l){case 92:{var o=a[1],u=Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.fromMLescape$465(function(k){return function(S){var w=k[0];return S<w.length?[0,[w.charCodeAt(S),SmlPrims.chk_ovf_i32(S+1)]]:[1]}}([i]),o);switch(u[0]){case 1:return[1];default:{var h=u[1],c=h[0],f=h[1],d=f,m=[c,n],r=d,n=m;continue e}}break}default:{var v=a[1],p=v,g=[l,n],r=p,n=g;continue e}}}}}};var t=e.$h;return t(0,null)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.toString$444=function(i){return Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.translate$286(function(e){return Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.toMLescape$624(e)},[i,0,i.length])},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.fromCString$448=function(i){return Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.fromCString$846(i)},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.toCString$452=function(i){return Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.translate$286(function(e){return Gwnsb55qc32wrmA9JtVSNc$3basis$0StrBase$1.toCescape$660(e)},[i,0,i.length])},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.s$j$456=function(i,e){return i<e},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.s$jk$458=function(i,e){return i<=e},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.s$l$460=function(i,e){return i>e},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.s$lk$462=function(i,e){return i>=e},h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.substring$464=function(i,e,t){return h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.extract$114(i,e,[0,t])},0})();typeof TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1>"u"&&(TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1={});(function(){var i={};i.$addOne=function(y){if(y==null)return[1,null];var P=y,C=P[0],b=P[1],x=SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i31(-1073741824+C)+1);return x<0?[SmlPrims.chk_ovf_i31(x- -1073741824),b]:[x,i.$addOne(b)]};var e=i.$addOne,t={};t.$add=function(y,P){if(y==null)return P;if(P==null)return y;var C=y,b=C[0],x=C[1],$=P,I=$[0],D=$[1];return t.$addd(SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i31(-1073741824+b)+I),x,D)},t.$addd=function(y,P,C){return y<0?[SmlPrims.chk_ovf_i31(y- -1073741824),t.$add(P,C)]:[y,t.$addc(P,C)]},t.$addc=function(y,P){if(P==null)return e(y);if(y==null)return e(P);var C=y,b=C[0],x=C[1],$=P,I=$[0],D=$[1];return t.$addd(SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i31(-1073741824+b)+I)+1),x,D)};var r=t.$add,n=t.$addd,s=t.$addc,a={};a.$subtOne=function(y){if(y==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,""];var P=y;switch(P[0]){case 0:{var C=P[1];return[1073741823,a.$subtOne(C)]}case 1:{if(P[1]==null)return null;var b=y,x=b[0],$=b[1];return[SmlPrims.chk_ovf_i31(x-1),$];break}default:{var I=y,D=I[0],M=I[1];return[SmlPrims.chk_ovf_i31(D-1),M]}}};var l=a.$subtOne,o=new String("Negative"),u=[o],h={};h.$subt=function(y,P){if(P==null)return y;if(y==null)throw u;var C=y,b=C[0],x=C[1],$=P,I=$[0],D=$[1];return h.$subd(SmlPrims.chk_ovf_i31(b-I),x,D)},h.$subb=function(y,P){if(y==null)throw u;if(P==null){var C=y,b=C[0],x=C[1];return h.$subd(SmlPrims.chk_ovf_i31(b-1),x,null)}else{var $=y,I=$[0],D=$[1],M=P,T=M[0],O=M[1];return h.$subd(SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i31(I-T)-1),D,O)}},h.$subd=function(y,P,C){if(y>=0){var b=h.$subt(P,C);switch(y){case 0:return b==null?null:[y,b];default:return[y,b]}}else{var x=SmlPrims.chk_ovf_i31(y- -1073741824),$=h.$subb(P,C);switch(x){case 0:return $==null?null:[x,$];default:return[x,$]}}};var c=h.$subt,f=h.$subb,d=h.$subd,m=function(y,P){switch(P){case 0:return null;case 1:return y;default:{var C={};C.$muldc=function(x,$){if(x==null)switch($){case 0:return null;default:return[$,null]}else{var I=x,D=I[0],M=I[1],T,O,B=SmlPrims.i32_to_w32(D)&2147483647,E,L,N,R=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));N=R>=31?B<=1073741823?0:2147483647:B&-1073741824?(B|2147483648)>>R&2147483647:B>>R,L=SmlPrims.w31_to_i32_X(N),E=SmlPrims.chk_ovf_i31(L);var K,Z,Q,z=B,G,X,Y=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));X=Y>=31?0:1<<(Y&31)&2147483647,G=X-1&2147483647,Q=z&G,Z=SmlPrims.w31_to_i32_X(Q),K=SmlPrims.chk_ovf_i31(Z),O=[E,K];var te=O[0],ae=O[1],re,se=SmlPrims.i32_to_w32(P)&2147483647,ue,q,ne,he=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));ne=he>=31?se<=1073741823?0:2147483647:se&-1073741824?(se|2147483648)>>he&2147483647:se>>he,q=SmlPrims.w31_to_i32_X(ne),ue=SmlPrims.chk_ovf_i31(q);var $e,ve,be,Se=se,ge,pe,de=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));pe=de>=31?0:1<<(de&31)&2147483647,ge=pe-1&2147483647,be=Se&ge,ve=SmlPrims.w31_to_i32_X(be),$e=SmlPrims.chk_ovf_i31(ve),re=[ue,$e];var xe=re[0],ye=re[1],Pe=SmlPrims.chk_ovf_i31(te*xe),Ce=SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i31(te-ae)*SmlPrims.chk_ovf_i31(xe-ye)),Be=SmlPrims.chk_ovf_i31(ae*ye),Le,We=SmlPrims.i32_to_w32(Be)&2147483647,Ne,Xe,Fe,Ee=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));Fe=Ee>=31?We<=1073741823?0:2147483647:We&-1073741824?(We|2147483648)>>Ee&2147483647:We>>Ee,Xe=SmlPrims.w31_to_i32_X(Fe),Ne=SmlPrims.chk_ovf_i31(Xe);var De,Qe,tt,Je=We,at,He,ze=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));He=ze>=31?0:1<<(ze&31)&2147483647,at=He-1&2147483647,tt=Je&at,Qe=SmlPrims.w31_to_i32_X(tt),De=SmlPrims.chk_ovf_i31(Qe),Le=[Ne,De];var ot=Le[0],lt=Le[1],kt,jt=SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i31(-1073741824+Pe)+Be)-Ce)+ot),Bt=SmlPrims.i32_to_w32(jt)&2147483647,Rt,Ot,Wt,yt=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));Wt=yt>=31?Bt<=1073741823?0:2147483647:Bt&-1073741824?(Bt|2147483648)>>yt&2147483647:Bt>>yt,Ot=SmlPrims.w31_to_i32_X(Wt),Rt=SmlPrims.chk_ovf_i31(Ot);var Et,Nt,Ht,Xt=Bt,Ut,Yt,er=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));Yt=er>=31?0:1<<(er&31)&2147483647,Ut=Yt-1&2147483647,Ht=Xt&Ut,Nt=SmlPrims.w31_to_i32_X(Ht),Et=SmlPrims.chk_ovf_i31(Nt),kt=[Rt,Et];var Ur=kt[0],Ir=kt[1],Yr,ki=SmlPrims.chk_ovf_i31(Pe+Ur),ei,wi,ti,ri=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));ti=ri>=31?0:1<<(ri&31)&2147483647,wi=SmlPrims.w31_to_i32_X(ti),ei=SmlPrims.chk_ovf_i31(wi),Yr=SmlPrims.chk_ovf_i31(ki+ei);var xi,fe,ke,Me,ut=SmlPrims.i32_to_w32(Ir)&2147483647,ht=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));Me=ht>=31?0:ut<<(ht&31)&2147483647,ke=SmlPrims.w31_to_i32_X(Me),fe=SmlPrims.chk_ovf_i31(ke),xi=SmlPrims.chk_ovf_i31(fe+lt),T=[Yr,xi];var tr=T[0],oa=T[1],tn=SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i31(oa+-1073741824)+$);return tn>=0?[tn,C.$muldc(M,SmlPrims.chk_ovf_i31(tr+1))]:[SmlPrims.chk_ovf_i31(tn- -1073741824),C.$muldc(M,tr)]}};var b=C.$muldc;return b(y,0)}}},v={};v.$mult=function(y,P){if(P==null)return null;var C=P,b=C[1];if(b==null){var x=C[0];return m(y,x)}else switch(C[0]){case 0:{var $=v.$mult(y,b);switch(0){case 0:return $==null?null:[0,$];default:return[0,$]}break}default:{var I={};I.$muln=function(M){if(M==null)return null;var T=M,O=T[0],B=T[1],E=r,L=m(P,O),N,R=I.$muln(B);switch(0){case 0:{N=R==null?null:[0,R];break}default:N=[0,R]}return E(L,N)};var D=I.$muln;return D(y)}}};var p=v.$mult,g=function(y,P){var C=y[0],b=y[1],x,$=SmlPrims.i32_to_w32(b)&2147483647,I,D,M,T=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));M=T>=31?$<=1073741823?0:2147483647:$&-1073741824?($|2147483648)>>T&2147483647:$>>T,D=SmlPrims.w31_to_i32_X(M),I=SmlPrims.chk_ovf_i31(D);var O,B,E,L=$,N,R,K=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));R=K>=31?0:1<<(K&31)&2147483647,N=R-1&2147483647,E=L&N,B=SmlPrims.w31_to_i32_X(E),O=SmlPrims.chk_ovf_i31(B),x=[I,O];var Z=x[0],Q=x[1],z,G=SmlPrims.i32_to_w32(P)&2147483647,X,Y,te,ae=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));te=ae>=31?G<=1073741823?0:2147483647:G&-1073741824?(G|2147483648)>>ae&2147483647:G>>ae,Y=SmlPrims.w31_to_i32_X(te),X=SmlPrims.chk_ovf_i31(Y);var re,se,ue,q=G,ne,he,$e=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));he=$e>=31?0:1<<($e&31)&2147483647,ne=he-1&2147483647,ue=q&ne,se=SmlPrims.w31_to_i32_X(ue),re=SmlPrims.chk_ovf_i31(se),z=[X,re];var ve=z[0],be=z[1],Se={};Se.$adj=function(Yt,er){e:for(;;)if(er<0){var Ur=SmlPrims.chk_ovf_i31(Yt-1),Ir=SmlPrims.chk_ovf_i31(er+P),Yt=Ur,er=Ir;continue e}else return[Yt,er]};var ge=Se.$adj,pe;if(ve==0)throw CompilerInitial.exn$Div$45;pe=SmlPrims.chk_ovf_i31(SmlPrims.quot(C,ve));var de;if(ve==0)throw CompilerInitial.exn$Div$45;de=C%ve;var xe,ye=ge,Pe=pe,Ce,Be,Le,We,Ne,Xe=SmlPrims.i32_to_w32(de)&2147483647,Fe=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));Ne=Fe>=31?0:Xe<<(Fe&31)&2147483647,We=SmlPrims.w31_to_i32_X(Ne),Le=SmlPrims.chk_ovf_i31(We),Be=SmlPrims.chk_ovf_i31(Le+Z),Ce=SmlPrims.chk_ovf_i31(Be-SmlPrims.chk_ovf_i31(pe*be)),xe=ye(Pe,Ce);var Ee=xe[0],De=xe[1],Qe;if(ve==0)throw CompilerInitial.exn$Div$45;Qe=SmlPrims.chk_ovf_i31(SmlPrims.quot(De,ve));var tt;if(ve==0)throw CompilerInitial.exn$Div$45;tt=De%ve;var Je,at=ge,He=Qe,ze,ot,lt,kt,jt,Bt=SmlPrims.i32_to_w32(tt)&2147483647,Rt=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));jt=Rt>=31?0:Bt<<(Rt&31)&2147483647,kt=SmlPrims.w31_to_i32_X(jt),lt=SmlPrims.chk_ovf_i31(kt),ot=SmlPrims.chk_ovf_i31(lt+Q),ze=SmlPrims.chk_ovf_i31(ot-SmlPrims.chk_ovf_i31(Qe*be)),Je=at(He,ze);var Ot=Je[0],Wt=Je[1],yt,Et,Nt,Ht,Xt=SmlPrims.i32_to_w32(Ee)&2147483647,Ut=SmlPrims.i32_to_w32(SmlPrims.chk_ovf_i31(SmlPrims.quot(30,2)));return Ht=Ut>=31?0:Xt<<(Ut&31)&2147483647,Nt=SmlPrims.w31_to_i32_X(Ht),Et=SmlPrims.chk_ovf_i31(Nt),yt=SmlPrims.chk_ovf_i31(Et+Ot),[yt,Wt]},k=function(y,P){switch(P){case 1:return[y,0];default:{var C=P==1073741823?1:SmlPrims.div_i31(-1073741824,SmlPrims.chk_ovf_i31(-SmlPrims.chk_ovf_i31(P+1)),CompilerInitial.exn$Div$45),b=SmlPrims.chk_ovf_i31(P*C),x=m(y,C),$={};$.$dmi=function(O){if(O==null)return[null,0];var B=O,E=B[0],L=B[1],N=$.$dmi(L),R=N[0],K=N[1],Z=g([K,E],b),Q=Z[0],z;switch(Q){case 0:{z=R==null?null:[Q,R];break}default:z=[Q,R]}return[z,Z[1]]};var I=$.$dmi,D=I(x),M=D[0],T=D[1];if(C==0)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"divmodd"];return[M,SmlPrims.div_i31(T,C,CompilerInitial.exn$Div$45)]}}},S={};S.$divmod=function(y,P){if(P==null)throw CompilerInitial.exn$Div$45;if(y==null)return[null,null];var C=P,b=C[0];switch(b){case 0:{var x=y,$=x[0],I=x[1],D=C[1],M=S.$divmod(I,D),T=M[0],O=M[1],B=T,E;switch($){case 0:{E=O==null?null:[$,O];break}default:E=[$,O]}return[B,E]}default:if(C[1]==null){var L=k(y,b),N=L[0],R=L[1];return[N,R==0?null:[R,null]]}else{var K,Z={};Z.$acc=function(ge,pe){e:for(;;){if(ge==null)return pe;var de=ge,xe=de[1],ye=xe,Pe=SmlPrims.chk_ovf_i32(pe+1),ge=ye,pe=Pe;continue e}};var Q=Z.$acc;K=Q(P,0);var z,G,X=SmlPrims.chk_ovf_i32(K-1),Y={};Y.$h=function(ge,pe){e:for(;;){if(ge==null)throw CompilerInitial.exn$Subscript$50;var de=ge,xe=de[0],ye=de[1];if(pe==0)return xe;var Pe=ye,Ce=SmlPrims.chk_ovf_i32(pe-1),ge=Pe,pe=Ce;continue e}};var te=Y.$h;if(X<0)throw CompilerInitial.exn$Subscript$50;G=te(P,X),z=G==1073741823?1:SmlPrims.div_i31(-1073741824,SmlPrims.chk_ovf_i31(-SmlPrims.chk_ovf_i31(G+1)),CompilerInitial.exn$Div$45);var ae=m(y,z),re=m(P,z),se,ue=SmlPrims.chk_ovf_i32(K-1),q={};q.$h=function(ge,pe){e:for(;;){if(ge==null)throw CompilerInitial.exn$Subscript$50;var de=ge,xe=de[0],ye=de[1];if(pe==0)return xe;var Pe=ye,Ce=SmlPrims.chk_ovf_i32(pe-1),ge=Pe,pe=Ce;continue e}};var ne=q.$h;if(ue<0)throw CompilerInitial.exn$Subscript$50;se=ne(re,ue);var he={};he.$divl=function(ge){if(ge==null)return[null,null];var pe=ge,de=pe[0],xe=pe[1],ye=he.$divl(xe),Pe=ye[0],Ce=ye[1],Be;switch(de){case 0:{Be=Ce==null?null:[de,Ce];break}default:Be=[de,Ce]}var Le={};Le.$msds=function(He,ze){e:for(;;){if(He==null)return[0,0];var ot=He,lt=ot[1];if(lt==null)switch(ze){case 1:return[0,ot[0]];default:{var kt=He,jt=kt[1],Bt=jt,Rt=SmlPrims.chk_ovf_i32(ze-1),He=Bt,ze=Rt;continue e}}else{var Ot=lt;if(Ot[1]==null)switch(ze){case 1:return[Ot[0],ot[0]];default:{var Wt=He,yt=Wt[1],Et=yt,Nt=SmlPrims.chk_ovf_i32(ze-1),He=Et,ze=Nt;continue e}}else{var Ht=He,Xt=Ht[1],Ut=Xt,Yt=SmlPrims.chk_ovf_i32(ze-1),He=Ut,ze=Yt;continue e}}}};var We=Le.$msds,Ne=We(Be,K),Xe=Ne[0],Fe=Ne[1],Ee=Xe==se?1073741823:g([Xe,Fe],se)[0],De={};De.$try=function(He,ze){try{return[He,c(Be,ze)]}catch(ot){return function(lt){var kt=lt;if(kt[0]==o)return De.$try(SmlPrims.chk_ovf_i31(He-1),c(ze,re));throw lt}(ot)}};var Qe=De.$try,tt=Qe(Ee,m(re,Ee)),Je=tt[0],at;switch(Je){case 0:{at=Pe==null?null:[Je,Pe];break}default:at=[Je,Pe]}return[at,tt[1]]};var $e=he.$divl,ve=$e(ae),be=ve[0],Se=ve[1];return[be,k(Se,z)[0]]}}};var w=S.$divmod,A={};A.$cmp=function(y,P){if(y==null)return P==null?2:0;if(P==null)return 1;var C=y,b=C[0],x=C[1],$=P,I=$[0],D=$[1],M=A.$cmp(x,D);switch(M){case 2:return b==I?2:b<I?0:1;default:return M}};var _=A.$cmp,W={};W.$natInfToI32=function(y){if(y==null)return 0;var P=y,C=P[1];if(C==null)return P[0];var b=C;if(b[1]==null){var x=P[0];return SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(-SmlPrims.chk_ovf_i32(-1073741824*b[0]))+x)}else{var $=P[0];return SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(-SmlPrims.chk_ovf_i32(-1073741824*W.$natInfToI32(C)))+$)}};var J=W.$natInfToI32,H=function(y){var P=y[1],C=P[0];if(C==null)return 0;if(P[1])try{return SmlPrims.chk_ovf_i32(-J(C))}catch(b){return function(x){var $,I,D=e,M,T=SmlPrims.chk_ovf_i32(-SmlPrims.chk_ovf_i32(-2147483648+1));switch(T){case 0:{M=null;break}default:{var O={};O.$bn=function(N){switch(N){case 0:return null;default:{var R=N>>>30;return[SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i32(N&1073741823)),O.$bn(R)]}}};var B=O.$bn;M=T<=1073741823?[SmlPrims.chk_ovf_i31(T),null]:B(SmlPrims.i32_to_w32(T))}}I=D(M);var E={};E.$eq_list=function(N,R){e:for(;;){if(N==null)return R==null;if(R==null)return!1;var K=N,Z=R;if(K[0]==Z[0]){var Q=K[1],z=Z[1],N=Q,R=z;continue e}else return!1}};var L=E.$eq_list;if($=L(C,I),$)return-2147483648;throw CompilerInitial.exn$Overflow$48}(b)}else return J(C)},F=function(y){switch(y){case 0:return[0,[null,!1]];default:if(y<0)if(y==-2147483648){var P,C,b=e,x,$=SmlPrims.chk_ovf_i32(-SmlPrims.chk_ovf_i32(-2147483648+1));switch($){case 0:{x=null;break}default:{var I={};I.$bn=function(Z){switch(Z){case 0:return null;default:{var Q=Z>>>30;return[SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i32(Z&1073741823)),I.$bn(Q)]}}};var D=I.$bn;x=$<=1073741823?[SmlPrims.chk_ovf_i31($),null]:D(SmlPrims.i32_to_w32($))}}return C=b(x),P=[C,!0],[0,P]}else{var M,T,O=SmlPrims.chk_ovf_i32(-y);switch(O){case 0:{T=null;break}default:{var B={};B.$bn=function(Z){switch(Z){case 0:return null;default:{var Q=Z>>>30;return[SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i32(Z&1073741823)),B.$bn(Q)]}}};var E=B.$bn;T=O<=1073741823?[SmlPrims.chk_ovf_i31(O),null]:E(SmlPrims.i32_to_w32(O))}}return M=[T,!0],[0,M]}else{var L,N;switch(y){case 0:{N=null;break}default:{var R={};R.$bn=function(Z){switch(Z){case 0:return null;default:{var Q=Z>>>30;return[SmlPrims.chk_ovf_i31(SmlPrims.chk_ovf_i32(Z&1073741823)),R.$bn(Q)]}}};var K=R.$bn;N=y<=1073741823?[SmlPrims.chk_ovf_i31(y),null]:K(SmlPrims.i32_to_w32(y))}}return L=[N,!1],[0,L]}}};TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.toInt31$1029=function(y){return SmlPrims.chk_ovf_i31(H(y))},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.toInt32$1033=function(y){return H(y)},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.toInt$1037=function(y){return H(y)},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.fromInt$1041=function(y){return F(y)},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.fromInt32$1045=function(y){return F(y)},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.fromInt31$1049=function(y){return F(y)};var V=function(y,P){var C=y[1],b=C[0];if(b==null)return P;var x=P[1],$=x[0];if($==null)return y;if(C[1])if(x[1]){var I=y[1],D=I[1],M=I[0],T=P[1],O=T[0];return[0,[r(M,O),D]]}else{var B;if(b==null)B=[$,!1];else if($==null)B=[b,!0];else try{B=[c($,b),!1]}catch(Q){B=function(z){var G=z;if(G[0]==o)return[c(b,$),!0];throw z}(Q)}return[0,B]}else if(x[1]){var E;if($==null)E=[b,!1];else if(b==null)E=[$,!0];else try{E=[c(b,$),!1]}catch(Q){E=function(z){var G=z;if(G[0]==o)return[c($,b),!0];throw z}(Q)}return[0,E]}else{var L=y[1],N=L[1],R=L[0],K=P[1],Z=K[0];return[0,[r(R,Z),N]]}};TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.fromWord32$1154=function(y){if(y<=2147483647){var P=SmlPrims.chk_ovf_i32(y);return F(P)}else{var C,b=SmlPrims.chk_ovf_i32(SmlPrims.div_w32(y,3,CompilerInitial.exn$Div$45));C=F(b);var x,$=SmlPrims.chk_ovf_i32(SmlPrims.mod_w32(y,3,CompilerInitial.exn$Div$45));return x=F($),V(V(V(C,C),C),x)}},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.fromWord32X$1165=function(y){var P=SmlPrims.w32_to_i32_X(y);return F(P)},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.fromWord31X$1169=function(y){var P=SmlPrims.w31_to_w32_X(y),C=SmlPrims.w32_to_i32_X(P);return F(C)},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.fromWordX$1173=function(y){var P=y,C=SmlPrims.w32_to_i32_X(P);return F(C)},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.toWord32$1177=function(y){return SmlPrims.i32_to_w32(H(y))},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.fromWord$1181=function(y){var P=y;if(P<=2147483647){var C=SmlPrims.chk_ovf_i32(P);return F(C)}else{var b,x=SmlPrims.chk_ovf_i32(SmlPrims.div_w32(P,3,CompilerInitial.exn$Div$45));b=F(x);var $,I=SmlPrims.chk_ovf_i32(SmlPrims.mod_w32(P,3,CompilerInitial.exn$Div$45));return $=F(I),V(V(V(b,b),b),$)}},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.toWord$1185=function(y){return SmlPrims.i32_to_w32(H(y))},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.fromWord8$1189=function(y){var P=y;if(P<=2147483647){var C=SmlPrims.chk_ovf_i32(P);return F(C)}else{var b,x=SmlPrims.chk_ovf_i32(SmlPrims.div_w32(P,3,CompilerInitial.exn$Div$45));b=F(x);var $,I=SmlPrims.chk_ovf_i32(SmlPrims.mod_w32(P,3,CompilerInitial.exn$Div$45));return $=F(I),V(V(V(b,b),b),$)}},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.fromWord8X$1193=function(y){if(y<128){var P=y;if(P<=2147483647){var C=SmlPrims.chk_ovf_i32(P);return F(C)}else{var b,x=SmlPrims.chk_ovf_i32(SmlPrims.div_w32(P,3,CompilerInitial.exn$Div$45));b=F(x);var $,I=SmlPrims.chk_ovf_i32(SmlPrims.mod_w32(P,3,CompilerInitial.exn$Div$45));return $=F(I),V(V(V(b,b),b),$)}}else{var D,M=255&((255&(255-y&4294967295))+1&4294967295),T=M;if(T<=2147483647){var O=SmlPrims.chk_ovf_i32(T);D=F(O)}else{var B,E=SmlPrims.chk_ovf_i32(SmlPrims.div_w32(T,3,CompilerInitial.exn$Div$45));B=F(E);var L,N=SmlPrims.chk_ovf_i32(SmlPrims.mod_w32(T,3,CompilerInitial.exn$Div$45));L=F(N),D=V(V(V(B,B),B),L)}var R=D[1],K=R[0];return K==null?D:R[1]?[0,[K,!1]]:[0,[K,!0]]}},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.toWord8$1201=function(y){return 255&SmlPrims.i32_to_w32(H(y))},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.fromWord31$1205=function(y){var P=y;if(P<=2147483647){var C=SmlPrims.chk_ovf_i32(P);return F(C)}else{var b,x=SmlPrims.chk_ovf_i32(SmlPrims.div_w32(P,3,CompilerInitial.exn$Div$45));b=F(x);var $,I=SmlPrims.chk_ovf_i32(SmlPrims.mod_w32(P,3,CompilerInitial.exn$Div$45));return $=F(I),V(V(V(b,b),b),$)}},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.toWord31$1209=function(y){return SmlPrims.i32_to_w32(H(y))&2147483647},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$p$1213=function(y){var P=y[1],C=P[0];return C==null?y:P[1]?[0,[C,!1]]:[0,[C,!0]]},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$t$1214=function(y,P){var C=P[1],b=C[0];if(b==null)return[0,[null,!1]];var x=y[1],$=x[0];if($==null)return[0,[null,!1]];if(x[1])if(C[1]){var I=y[1],D=I[0],M=P[1],T=M[0];return[0,[p(D,T),!1]]}else return[0,[p($,b),!0]];else{if(C[1])return[0,[p($,b),!0]];var O=y[1],B=O[0],E=P[1],L=E[0];return[0,[p(B,L),!1]]}},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$f$1257=function(y){return V(y[0],y[1])},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$g$1258=function(y,P){var C=P[1],b=C[0];if(b==null)return y;var x=y[1],$=x[0];if($==null){var I=C[1];return[0,[b,!I]]}else if(x[1])if(C[1]){var D;if($==null)D=[b,!1];else if(b==null)D=[$,!0];else try{D=[c(b,$),!1]}catch(z){D=function(G){var X=G;if(X[0]==o)return[c($,b),!0];throw G}(z)}return[0,D]}else{var M=y[1],T=M[1],O=M[0],B=P[1],E=B[0];return[0,[r(O,E),T]]}else if(C[1]){var L=y[1],N=L[1],R=L[0],K=P[1],Z=K[0];return[0,[r(R,Z),N]]}else{var Q;if(b==null)Q=[$,!1];else if($==null)Q=[b,!0];else try{Q=[c($,b),!1]}catch(z){Q=function(G){var X=G;if(X[0]==o)return[c(b,$),!0];throw G}(z)}return[0,Q]}};var U=function(y,P){var C=y[1];if(C[1]){var b=P[1];if(b[1]){var x=C[0],$=b[0],I=w(x,$),D=I[0],M=I[1];return[[0,[D,!1]],M==null?[0,[null,!1]]:[0,[M,!0]]]}else{var T=C[0],O=b[0],B=w(l(T),O),E=B[0],L=B[1];return[[0,[e(E),!0]],[0,[l(c(O,L)),!1]]]}}else{var N=P[1];if(N[1]){var R=C[0];if(R==null)return[[0,[null,!1]],[0,[null,!1]]];var K=N[0],Z=w(l(R),K),Q=Z[0],z=Z[1],G=[0,[e(Q),!0]],X,Y=l(c(K,z));return X=Y==null?[0,[null,!1]]:[0,[Y,!0]],[G,X]}else{var te=C[0],ae=N[0],re=w(te,ae);return[[0,[re[0],!1]],[0,[re[1],!1]]]}}};return TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.div$1394=function(y){return U(y[0],y[1])[0]},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.mod$1402=function(y){return U(y[0],y[1])[1]},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.abs$1410=function(y){var P=y[1];return P[1]?[0,[P[0],!1]]:y},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$j$1454=function(y,P){var C,b=y[1];if(b[1]){var x=P[1];if(x[1]){var $=b[0],I=x[0];C=_(I,$)}else C=0}else{var D=P[1];if(D[1])C=1;else{var M=b[0],T=D[0];C=_(M,T)}}switch(C){case 0:return!0;default:return!1}},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$l$1462=function(y,P){var C,b=y[1];if(b[1]){var x=P[1];if(x[1]){var $=b[0],I=x[0];C=_(I,$)}else C=0}else{var D=P[1];if(D[1])C=1;else{var M=b[0],T=D[0];C=_(M,T)}}switch(C){case 1:return!0;default:return!1}},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$jk$1470=function(y,P){var C,b=y[1];if(b[1]){var x=P[1];if(x[1]){var $=b[0],I=x[0];C=_(I,$)}else C=0}else{var D=P[1];if(D[1])C=1;else{var M=b[0],T=D[0];C=_(M,T)}}switch(C){case 1:return!1;default:return!0}},TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.s$lk$1478=function(y,P){var C,b=y[1];if(b[1]){var x=P[1];if(x[1]){var $=b[0],I=x[0];C=_(I,$)}else C=0}else{var D=P[1];if(D[1])C=1;else{var M=b[0],T=D[0];C=_(M,T)}}switch(C){case 0:return!1;default:return!0}},0})();typeof abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1>"u"&&(abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1={});(function(){abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.quot$55=function(e,t){if(t==0)throw CompilerInitial.exn$Div$45;return SmlPrims.chk_ovf_i32(SmlPrims.quot(e,t))},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.rem$66=function(e,t){if(t==0)throw CompilerInitial.exn$Div$45;return e%t},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toLarge$85=function(e){return TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.fromInt32$1045(e)},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.fromLarge$89=function(e){return TtcHr52auHS5gydZjBhWJe$3basis$0IntInfRep$1.toInt32$1033(e)},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toInt$93=function(e){return e},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.fromInt$97=function(e){return e},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.precision$101=[0,32],abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.maxInt$102=[0,2147483647],abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.minInt$103=[0,-2147483648],abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.s$p$104=function(e){return SmlPrims.chk_ovf_i32(-e)},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.s$t$106=function(e,t){return SmlPrims.chk_ovf_i32(e*t)},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.div$108=function(e,t){return SmlPrims.div_i32(e,t,CompilerInitial.exn$Div$45)},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.mod$110=function(e,t){return SmlPrims.mod_i32(e,t,CompilerInitial.exn$Div$45)},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.s$f$112=function(e,t){return SmlPrims.chk_ovf_i32(e+t)},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.s$g$114=function(e,t){return SmlPrims.chk_ovf_i32(e-t)},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.compare$116=function(e,t){return e<t?0:e>t?1:2},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.abs$131=function(e){return SmlPrims.chk_ovf_i32(Math.abs(e))},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.min$133=function(e,t){return e<t?e:t},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.max$144=function(e,t){return e<t?t:e},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.sign$155=function(e){return e>0?1:e<0?-1:0},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.sameSign$167=function(e,t){return(e>0?1:e<0?-1:0)==(t>0?1:t<0?-1:0)};var i=function(e,t){var r,n=[0,t],s=[n,abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.minInt$103];if(r=EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.eq_option$256(function(y){return y[0]==y[1]},s),r)switch(e){case 2:return"~10000000000000000000000000000000";case 8:return"~20000000000";case 10:return"~2147483648";case 16:return"~80000000";default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"conv"]}else{var a={};a.$h=function(y,P){e:for(;;)switch(y){case 0:return P;default:{var C=SmlPrims.div_i32(y,e,CompilerInitial.exn$Div$45),b,x,$,I=SmlPrims.mod_i32(y,e,CompilerInitial.exn$Div$45);if(I<10){var D=SmlPrims.chk_ovf_i32(I+48);$=h8UYb53cympluUQFSuaSASi$3basis$0Char$1.chr$71(D)}else{var M=SmlPrims.chk_ovf_i32(I+55);$=h8UYb53cympluUQFSuaSASi$3basis$0Char$1.chr$71(M)}x=[$,P],b=x;var T=C,O=b,y=T,P=O;continue e}}};var l=a.$h,o;if(t<0){var u,h=126,c,f=SmlPrims.chk_ovf_i32(-t),d=l,m=SmlPrims.div_i32(f,e,CompilerInitial.exn$Div$45),v,p,g,k=SmlPrims.mod_i32(f,e,CompilerInitial.exn$Div$45);if(k<10){var S=SmlPrims.chk_ovf_i32(k+48);g=h8UYb53cympluUQFSuaSASi$3basis$0Char$1.chr$71(S)}else{var w=SmlPrims.chk_ovf_i32(k+55);g=h8UYb53cympluUQFSuaSASi$3basis$0Char$1.chr$71(w)}p=[g,null],v=p,c=d(m,v),u=[h,c],o=u}else{var A=l,_=SmlPrims.div_i32(t,e,CompilerInitial.exn$Div$45),W,J,H,F=SmlPrims.mod_i32(t,e,CompilerInitial.exn$Div$45);if(F<10){var V=SmlPrims.chk_ovf_i32(F+48);H=h8UYb53cympluUQFSuaSASi$3basis$0Char$1.chr$71(V)}else{var U=SmlPrims.chk_ovf_i32(F+55);H=h8UYb53cympluUQFSuaSASi$3basis$0Char$1.chr$71(U)}J=[H,null],W=J,o=A(_,W)}return SmlPrims.implode(o)}};return abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.scan$255=function(e,t,r){var n;switch(e){case 3:{n=[function(m){return 48<=m?m<=49:!1},2];break}case 0:{n=[function(m){return 48<=m?m<=55:!1},8];break}case 2:{n=[function(m){return 48<=m?m<=57:!1},10];break}default:n=[function(m){return 48<=m&&m<=57||97<=m&&m<=102?!0:65<=m?m<=70:!1},16]}var s=n[0],a=n[1],l=function(m,v){switch(v[0]){case 1:return[1];default:{var p=v[1],g=p[0],k=p[1],S={};S.$digr=function(_,W,J){e:for(;;){var H=t(J);switch(H[0]){case 1:return[0,[_,J]];default:{var F=H[1],V=F[0],U=F[1];if(s(V)){var y=W([a,_,48<=V&&V<=57?SmlPrims.chk_ovf_i32(V-48):SmlPrims.mod_i32(SmlPrims.chk_ovf_i32(V-55),32,CompilerInitial.exn$Div$45)]),P=W,C=U,_=y,W=P,J=C;continue e}else return[0,[_,J]]}}}};var w=S.$digr,A=m==1?function(_){var W=_[0],J=_[1],H=_[2];return SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(W*J)+H)}:function(_){var W=_[0],J=_[1],H=_[2];return SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(W*J)-H)};return s(g)?w(SmlPrims.chk_ovf_i32(m*(48<=g&&g<=57?SmlPrims.chk_ovf_i32(g-48):SmlPrims.mod_i32(SmlPrims.chk_ovf_i32(g-55),32,CompilerInitial.exn$Div$45))),A,k):[1]}}},o=function(m,v){switch(v[0]){case 1:return[1];default:{var p=v[1];switch(p[0]){case 48:{var g=p[1],k,S,w=1;if(S=EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.eq_radix$304(e,w),k=!S,k){var A=t(g),_=l(m,A);switch(_[0]){case 1:return[0,[0,g]];default:return _}}else{var W=t(g);switch(W[0]){case 1:return[0,[0,g]];default:{var J=W[1];switch(J[0]){case 120:{var H=J[1],F=t(H),V=l(m,F);switch(V[0]){case 1:return[0,[0,g]];default:return V}break}case 88:{var U=J[1],y=t(U),P=l(m,y);switch(P[0]){case 1:return[0,[0,g]];default:return P}break}default:{var C=l(m,W);switch(C[0]){case 1:return[0,[0,g]];default:return C}}}}}}break}default:return l(m,v)}}}},u=t(EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.splitl$204(function(m){return m==32?!0:9<=m?m<=13:!1},t,r)[1]);switch(u[0]){case 1:return[1];default:{var h=u[1];switch(h[0]){case 126:{var c=h[1];return o(-1,t(c))}case 45:{var f=h[1];return o(-1,t(f))}case 43:{var d=h[1];return o(1,t(d))}default:return o(1,u)}}}},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.fmt$444=function(e){switch(e){case 3:return function(t){return i(2,t)};case 0:return function(t){return i(8,t)};case 2:return function(t){return i(10,t)};default:return function(t){return i(16,t)}}},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456=function(e){return i(10,e)},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.fromString$460=function(e){var t=EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.scanString$161,r,n=2;return r=function(s){return function(a){return abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.scan$255(n,s,a)}},t(r,e)},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.s$l$464=function(e,t){return e>t},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.s$lk$466=function(e,t){return e>=t},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.s$j$468=function(e,t){return e<t},abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.s$jk$470=function(e,t){return e<=t},0})();typeof y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1>"u"&&(y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1={});(function(){return y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.floor$57=function(i){return SmlPrims.chk_ovf_i32(Math.floor(i))},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.ceil$61=function(i){return SmlPrims.chk_ovf_i32(Math.ceil(i))},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.trunc$65=function(i){return SmlPrims.chk_ovf_i32(SmlPrims.trunc(i))},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.rem$76=function(i,e){return i%e},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.toString$158=function(i){var e,t=i.toPrecision(12),r=t.length,n={};n.$loop=function(l){e:for(;;){if(l==r)return t+".0";if(t.charCodeAt(l)==46||t.charCodeAt(l)==69)return t;var o=SmlPrims.chk_ovf_i32(l+1),l=o;continue e}};var s=n.$loop;e=s(0);var a=h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.translate$215(function(l){switch(l){case 101:return"E";case 45:return"~";case 43:return"";default:return h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toString$275(l)}},e);switch(a){case"Infinity":return"inf";case"~Infinity":return"~inf";case"NaN":return"nan";default:return a}},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.isNan$162=function(i){return isNaN(i)},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.posInf$166=sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.posInf$59,y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.negInf$167=sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.negInf$60,y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.fromInt$168=function(i){return i},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.fmt$169=function(i){switch(i[0]){case 0:{var e=i[1];switch(e[0]){case 1:return function(l){var o=l.toExponential(6),u=h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.translate$215(function(h){switch(h){case 101:return"E";case 45:return"~";case 43:return"";default:return h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toString$275(h)}},o);switch(u){case"Infinity":return"inf";case"~Infinity":return"~inf";case"NaN":return"nan";default:return u}};default:{var t=e[1];if(t<0||t>20)throw CompilerInitial.exn$Size$51;return function(l){var o=l.toExponential(t),u=h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.translate$215(function(h){switch(h){case 101:return"E";case 45:return"~";case 43:return"";default:return h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toString$275(h)}},o);switch(u){case"Infinity":return"inf";case"~Infinity":return"~inf";case"NaN":return"nan";default:return u}}}}break}case 2:{var r=i[1];switch(r[0]){case 1:return function(l){var o=l.toFixed(6),u=h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.translate$215(function(h){switch(h){case 101:return"E";case 45:return"~";case 43:return"";default:return h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toString$275(h)}},o);switch(u){case"Infinity":return"inf";case"~Infinity":return"~inf";case"NaN":return"nan";default:return u}};default:{var n=r[1];if(n<0||n>20)throw CompilerInitial.exn$Size$51;return function(l){var o=l.toFixed(n),u=h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.translate$215(function(h){switch(h){case 101:return"E";case 45:return"~";case 43:return"";default:return h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toString$275(h)}},o);switch(u){case"Infinity":return"inf";case"~Infinity":return"~inf";case"NaN":return"nan";default:return u}}}}break}case 1:{var s=i[1];switch(s[0]){case 1:return function(l){var o,u=l.toPrecision(12),h=u.length,c={};c.$loop=function(m){e:for(;;){if(m==h)return u+".0";if(u.charCodeAt(m)==46||u.charCodeAt(m)==69)return u;var v=SmlPrims.chk_ovf_i32(m+1),m=v;continue e}};var f=c.$loop;o=f(0);var d=h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.translate$215(function(m){switch(m){case 101:return"E";case 45:return"~";case 43:return"";default:return h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toString$275(m)}},o);switch(d){case"Infinity":return"inf";case"~Infinity":return"~inf";case"NaN":return"nan";default:return d}};default:{var a=s[1];if(a<1||a>20)throw CompilerInitial.exn$Size$51;return function(l){var o,u=l.toPrecision(a),h=u.length,c={};c.$loop=function(m){e:for(;;){if(m==h)return u+".0";if(u.charCodeAt(m)==46||u.charCodeAt(m)==69)return u;var v=SmlPrims.chk_ovf_i32(m+1),m=v;continue e}};var f=c.$loop;o=f(0);var d=h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.translate$215(function(m){switch(m){case 101:return"E";case 45:return"~";case 43:return"";default:return h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toString$275(m)}},o);switch(d){case"Infinity":return"inf";case"~Infinity":return"~inf";case"NaN":return"nan";default:return d}}}}break}default:return function(l){var o,u=l.toPrecision(20),h=u.length,c={};c.$loop=function(m){e:for(;;){if(m==h)return u+".0";if(u.charCodeAt(m)==46||u.charCodeAt(m)==69)return u;var v=SmlPrims.chk_ovf_i32(m+1),m=v;continue e}};var f=c.$loop;o=f(0);var d=h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.translate$215(function(m){switch(m){case 101:return"E";case 45:return"~";case 43:return"";default:return h8UYb53cympluUQFSuaSASi$3basis$0Char$1.toString$275(m)}},o);switch(d){case"Infinity":return"inf";case"~Infinity":return"~inf";case"NaN":return"nan";default:return d}}}},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.scan$224=function(i,e){var t={};t.$pow10=function(P){switch(P){case 0:return 1;default:if(SmlPrims.mod_i32(P,2,CompilerInitial.exn$Div$45)==0){var C=t.$pow10(SmlPrims.div_i32(P,2,CompilerInitial.exn$Div$45));return C*C}else return 10*t.$pow10(SmlPrims.chk_ovf_i32(P-1))}};var r=t.$pow10,n=function(P,C,b,x){var $={};$.$digs=function(B,E){e:for(;;){var L=i(E);switch(L[0]){case 1:return[[0,b(B)],E];default:{var N=L[1],R=N[0],K=N[1];if(48<=R&&R<=57){var Z=C([B,SmlPrims.chk_ovf_i32(R-48)]),Q=K,B=Z,E=Q;continue e}else return[[0,b(B)],E]}}}};var I=$.$digs,D=i(x);switch(D[0]){case 1:return[[1],x];default:{var M=D[1],T=M[0],O=M[1];return 48<=T&&T<=57?I(P(SmlPrims.chk_ovf_i32(T-48)),O):[[1],x]}}},s=EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.splitl$204(function(P){return P==32?!0:9<=P?P<=13:!1},i,e)[1],a,l=i(s);switch(l[0]){case 0:{var o=l[1];switch(o[0]){case 43:{a=[!0,o[1]];break}case 45:{a=[!1,o[1]];break}case 126:{a=[!1,o[1]];break}default:a=[!0,s]}break}default:a=[!0,s]}var u=a[0],h=a[1],c=n(function(P){return P},function(P){return 10*P[0]+P[1]},function(P){return P},h),f=c[0],d=c[1],m,v=i(d);switch(v[0]){case 1:{m=[!1,d];break}default:{var p=v[1],g=p[0],k=p[1];m=g==46?[!0,k]:[!1,d]}}var S=m[0],w=m[1],A=n(function(P){return[1,P]},function(P){var C=P[0],b=C[0],x=C[1],$=P[1];return[SmlPrims.chk_ovf_i32(b+1),10*x+$]},function(P){var C=P[0];return P[1]/r(C)},w),_=A[0],W=A[1],J=function(P,C){var b,x=i(C);switch(x[0]){case 1:{b=[!1,C];break}default:{var $=x[1],I=$[0],D=$[1];b=I==101||I==69?[!0,D]:[!1,C]}}var M=b[0],T=b[1],O,B=i(T);switch(B[0]){case 0:{var E=B[1];switch(E[0]){case 43:{O=[!0,E[1]];break}case 45:{O=[!1,E[1]];break}case 126:{O=[!1,E[1]];break}default:O=[!0,T]}break}default:O=[!0,T]}var L=O[0],N=O[1],R=n(function(X){return X},function(X){var Y=X[0],te=X[1];return SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(10*Y)+te)},function(X){return X},N),K=R[0],Z=R[1];switch(K[0]){case 1:return[0,[u?P:-P,C]];default:if(M){var Q=K[1];if(L){var z=P*r(Q);return[0,[u?z:-z,Z]]}else{var G=P/r(Q);return[0,[u?G:-G,Z]]}}else return[1]}};switch(f[0]){case 1:{if(S)switch(_[0]){case 0:{var H=_[1];return J(H,W)}default:return[1]}else return[1];break}default:if(S)switch(_[0]){case 1:{var F=f[1];return[0,[u?F:-F,d]]}default:{var V=f[1],U=_[1];return J(V+U,W)}}else switch(_[0]){case 0:return[1];default:{var y=f[1];return J(y,d)}}}},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.fromString$502=function(i){return EnFzYQm6gMCyrmnEKObeWe$3basis$0StringCvt$1.scanString$161(function(e){return function(t){return y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.scan$224(e,t)}},i)},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$p$506=function(i){return-i},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$f$508=function(i,e){return i+e},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$g$510=function(i,e){return i-e},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$t$512=function(i,e){return i*e},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$h$514=function(i,e){return i/e},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$l$515=function(i,e){return i>e},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$lk$517=function(i,e){return i>=e},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$j$519=function(i,e){return i<e},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$jk$521=function(i,e){return i<=e},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.abs$523=function(i){return Math.abs(i)},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.sign$525=function(i){return i>0?1:i<0?-1:0},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.compare$537=function(i,e){var t=i,r=e;return t<r?0:t>r?1:2},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$kk$552=function(i,e){var t=i,r=e;switch(t<r?0:t>r?1:2){case 2:return!0;default:return!1}},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$ak$563=function(i,e){var t=i,r=e;switch(t<r?0:t>r?1:2){case 2:return!1;default:return!0}},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.isFinite$574=function(i){if(isNaN(i))return!1;var e;switch(i<sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.posInf$59?0:i>sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.posInf$59?1:2){case 2:{e=!1;break}default:e=!0}if(e)switch(i<sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.negInf$60?0:i>sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.negInf$60?1:2){case 2:return!1;default:return!0}else return!1},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.sameSign$586=function(i,e){return(i>0?1:i<0?-1:0)==(e>0?1:e<0?-1:0)},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.min$593=function(i,e){return i<e?i:e},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.max$604=function(i,e){return i<e?e:i},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$615=function(i){var e=i+.5,t=SmlPrims.chk_ovf_i32(Math.floor(e)),r,n=t;switch(n<e?0:n>e?1:2){case 2:{r=!0;break}default:r=!1}if(r){var s=SmlPrims.chk_ovf_i32(Math.floor(i));return SmlPrims.mod_i32(s,2,CompilerInitial.exn$Div$45)==0?s:t}else return t},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.toDefault$634=function(i){return i},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.fromDefault$638=function(i){return i},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.real$642=function(i){return i},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.floor$646=function(i){return SmlPrims.chk_ovf_i32(Math.floor(i))},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.ceil$650=function(i){return SmlPrims.chk_ovf_i32(Math.ceil(i))},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.trunc$654=function(i){return SmlPrims.chk_ovf_i32(SmlPrims.trunc(i))},y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.round$658=function(i){var e=i+.5,t=SmlPrims.chk_ovf_i32(Math.floor(e)),r,n=t;switch(n<e?0:n>e?1:2){case 2:{r=!0;break}default:r=!1}if(r){var s=SmlPrims.chk_ovf_i32(Math.floor(i));return SmlPrims.mod_i32(s,2,CompilerInitial.exn$Div$45)==0?s:t}else return t},0})();typeof z11cymP27JOrM6FBeJkkje$3js$0Js$1>"u"&&(z11cymP27JOrM6FBeJkkje$3js$0Js$1={});(function(){z11cymP27JOrM6FBeJkkje$3js$0Js$1.eq_eventType$824=function(e,t){switch(e){case 0:{switch(t){case 0:return!0;default:return!1}break}case 1:{switch(t){case 1:return!0;default:return!1}break}case 2:{switch(t){case 2:return!0;default:return!1}break}case 3:{switch(t){case 3:return!0;default:return!1}break}case 4:{switch(t){case 4:return!0;default:return!1}break}case 5:{switch(t){case 5:return!0;default:return!1}break}}},z11cymP27JOrM6FBeJkkje$3js$0Js$1.fromDoc$78=function(e){return e},z11cymP27JOrM6FBeJkkje$3js$0Js$1.nsFromString$82=function(e){return e},z11cymP27JOrM6FBeJkkje$3js$0Js$1.document$86=function(){return document}(),z11cymP27JOrM6FBeJkkje$3js$0Js$1.window$89=function(){return this}(),z11cymP27JOrM6FBeJkkje$3js$0Js$1.openWindow$92=function(e,t,r){return function(n,s,a){return window.open(n,s,a)}(e,t,r)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.windowDocument$107=function(e){return function(t){return t.document}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.closeWindow$114=function(e){return function(t){t.close()}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.documentWrite$121=function(e,t){return function(r,n){return r.write(n)}(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.getElementById$132=function(e,t){return function(r,n){return SmlPrims.option(r.getElementById(n))}(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.parent$143=function(e){return function(t){return SmlPrims.option(t.parentNode)}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.firstChild$150=function(e){return function(t){return SmlPrims.option(t.firstChild)}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.lastChild$157=function(e){return function(t){return SmlPrims.option(t.lastChild)}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.nextSibling$164=function(e){return function(t){return SmlPrims.option(t.nextSibling)}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.previousSibling$171=function(e){return function(t){return SmlPrims.option(t.previousSibling)}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.innerHTML$178=function(e,t){return function(r,n){r.innerHTML=n}(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.installEventHandler$195=function(e,t,r){var n;switch(t){case 4:{n="e.onclick = f;";break}case 5:{n="e.onchange = f;";break}case 3:{n="e.onkeypress = f;";break}case 2:{n="e.onkeyup = f;";break}case 0:{n="e.onmouseover = f;";break}default:n="e.onmouseout = f;"}return new Function("e,f",n)(e,r)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.getEventHandler$224=function(e,t){return[1]};var i=function(){return!!document.all}();return z11cymP27JOrM6FBeJkkje$3js$0Js$1.onMouseMove$274=i?function(e){return function(t){return function(r,n){return r.onmousemove=function(s){n([event.clientX+r.body.scrollLeft,event.clientY+r.body.scrollTop])}}(e,function(r){var n=r[0],s=r[1];return t([n<0?0:n,s<0?0:s])})}}:function(e){return function(t){return function(r,n){return r.onmousemove=function(s){n([s.pageX,s.pageY])}}(e,function(r){var n=r[0],s=r[1];return t([n<0?0:n,s<0?0:s])})}},z11cymP27JOrM6FBeJkkje$3js$0Js$1.xElem$279=function(e){return function(t){for(var r=0;t;)r+=t.offsetLeft-t.scrollLeft+t.clientLeft,t=t.offsetParent;return r}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.yElem$286=function(e){return function(t){for(var r=0;t;)r+=t.offsetTop-t.scrollTop+t.clientTop,t=t.offsetParent;return r}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.onMouseMoveElem$338=i?function(e){return function(t){var r=e,n,s=function(l){for(var o=0;l;)o+=l.offsetLeft-l.scrollLeft+l.clientLeft,l=l.offsetParent;return o}(e),a=function(l){for(var o=0;l;)o+=l.offsetTop-l.scrollTop+l.clientTop,l=l.offsetParent;return o}(e);return n=function(l){var o=l[0],u=l[1],h=t,c,f,d=SmlPrims.chk_ovf_i32(o-s);f=d<0?0:d;var m,v=SmlPrims.chk_ovf_i32(u-a);return m=v<0?0:v,c=[f,m],h(c)},function(l,o){return l.ownerDocument.onmousemove=function(u){o([event.clientX+l.ownerDocument.body.scrollLeft,event.clientY+l.ownerDocument.body.scrollTop])}}(r,n)}}:function(e){return function(t){var r=e,n,s=function(l){for(var o=0;l;)o+=l.offsetLeft-l.scrollLeft+l.clientLeft,l=l.offsetParent;return o}(e),a=function(l){for(var o=0;l;)o+=l.offsetTop-l.scrollTop+l.clientTop,l=l.offsetParent;return o}(e);return n=function(l){var o=l[0],u=l[1],h=t,c,f,d=SmlPrims.chk_ovf_i32(o-s);f=d<0?0:d;var m,v=SmlPrims.chk_ovf_i32(u-a);return m=v<0?0:v,c=[f,m],h(c)},function(l,o){return l.ownerDocument.onmousemove=function(u){o([u.pageX,u.pageY])}}(r,n)}},z11cymP27JOrM6FBeJkkje$3js$0Js$1.setInterval$343=function(e,t){return function(r,n){return setInterval(n,r)}(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.clearInterval$356=function(e){return function(t){return clearInterval(t)}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.setTimeout$364=function(e,t){return function(r,n){return setTimeout(n,r)}(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.clearTimeout$377=function(e){return function(t){return clearTimeout(t)}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.value$385=function(e){return function(t){return t.value}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.documentElement$392=function(e){return function(t){return t.documentElement}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.setCookie$399=function(e,t){return function(r,n){r.cookie=n}(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.getCookie$406=function(e){return function(t){return t.cookie}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.setAttribute$421=function(e,t,r){return function(n,s,a){return n.setAttribute(s,a)}(e,t,r)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.setAttributeNS$436=function(e,t,r,n){return function(s,a,l,o){return a.setAttributeNS(s,l,o)}(e,t,r,n)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.removeAttribute$455=function(e,t){return function(r,n){return r.removeAttribute(n)}(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.createElement$466=function(e){return document.createElement(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.createElementNS$470=function(e,t){return document.createElementNS(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.createFragment$477=function(e){return document.createDocumentFragment()},z11cymP27JOrM6FBeJkkje$3js$0Js$1.createTextNode$480=function(e){return document.createTextNode(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.appendChild$484=function(e,t){return function(r,n){return r.appendChild(n)}(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.removeChild$495=function(e,t){return function(r,n){return r.removeChild(n)}(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.replaceChild$506=function(e,t,r){return function(n,s,a){return n.replaceChild(s,a)}(e,t,r)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.setStyle$521=function(e,t){var r=t[0],n=t[1];return function(s,a,l){s[a]=l}(function(s,a){return s[a]}(e,"style"),r,n)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.taga$556=function(e,t,r){var n=document.createElement(e),s={};s.$app=function(l){e:for(;;){if(l==null)return 0;var o=l,u=o[0],h=o[1];(function(d,m,v){return d.setAttribute(m,v)})(n,u[0],u[1]);var c=h,l=c;continue e}};var a=s.$app;return a(t),function(l,o){return l.appendChild(o)}(n,r),n},z11cymP27JOrM6FBeJkkje$3js$0Js$1.nstaga$557=function(e,t,r,n){var s=document.createElementNS(e,t),a={};a.$app=function(o){e:for(;;){if(o==null)return 0;var u=o,h=u[0],c=u[1];(function(m,v,p){return m.setAttribute(v,p)})(s,h[0],h[1]);var f=c,o=f;continue e}};var l=a.$app;return l(r),function(o,u){return o.appendChild(u)}(s,n),s},z11cymP27JOrM6FBeJkkje$3js$0Js$1.tag$561=function(e){var t=null;return function(r){var n=document.createElement(e),s={};s.$app=function(l){e:for(;;){if(l==null)return 0;var o=l,u=o[0],h=o[1];(function(d,m,v){return d.setAttribute(m,v)})(n,u[0],u[1]);var c=h,l=c;continue e}};var a=s.$app;return a(t),function(l,o){return l.appendChild(o)}(n,r),n}},z11cymP27JOrM6FBeJkkje$3js$0Js$1.nstag$565=function(e,t){var r=null;return function(n){var s=document.createElementNS(e,t),a={};a.$app=function(o){e:for(;;){if(o==null)return 0;var u=o,h=u[0],c=u[1];(function(m,v,p){return m.setAttribute(v,p)})(s,h[0],h[1]);var f=c,o=f;continue e}};var l=a.$app;return l(r),function(o,u){return o.appendChild(u)}(s,n),s}},z11cymP27JOrM6FBeJkkje$3js$0Js$1.taga0$591=function(e,t){var r=document.createElement(e),n={};n.$app=function(a){e:for(;;){if(a==null)return 0;var l=a,o=l[0],u=l[1];(function(f,d,m){return f.setAttribute(d,m)})(r,o[0],o[1]);var h=u,a=h;continue e}};var s=n.$app;return s(t),r},z11cymP27JOrM6FBeJkkje$3js$0Js$1.nstaga0$592=function(e,t,r){var n=document.createElementNS(e,t),s={};s.$app=function(l){e:for(;;){if(l==null)return 0;var o=l,u=o[0],h=o[1];(function(d,m,v){return d.setAttribute(m,v)})(n,u[0],u[1]);var c=h,l=c;continue e}};var a=s.$app;return a(r),n},z11cymP27JOrM6FBeJkkje$3js$0Js$1.tag0$596=function(e){var t=null,r=document.createElement(e),n={};n.$app=function(a){e:for(;;){if(a==null)return 0;var l=a,o=l[0],u=l[1];(function(f,d,m){return f.setAttribute(d,m)})(r,o[0],o[1]);var h=u,a=h;continue e}};var s=n.$app;return s(t),r},z11cymP27JOrM6FBeJkkje$3js$0Js$1.nstag0$600=function(e,t){var r=null,n=document.createElementNS(e,t),s={};s.$app=function(l){e:for(;;){if(l==null)return 0;var o=l,u=o[0],h=o[1];(function(d,m,v){return d.setAttribute(m,v)})(n,u[0],u[1]);var c=h,l=c;continue e}};var a=s.$app;return a(r),n},z11cymP27JOrM6FBeJkkje$3js$0Js$1.s$d$607=function(e){return document.createTextNode(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.s$c$611=function(e,t){var r=document.createDocumentFragment();return function(n,s){return n.appendChild(s)}(r,e),function(n,s){return n.appendChild(s)}(r,t),r},z11cymP27JOrM6FBeJkkje$3js$0Js$1.toForeignPtr$623=function(e){return e},z11cymP27JOrM6FBeJkkje$3js$0Js$1.fromForeignPtr$627=function(e){return e},z11cymP27JOrM6FBeJkkje$3js$0Js$1.new$631=function(e){return SmlPrims.newRequest()},z11cymP27JOrM6FBeJkkje$3js$0Js$1.openn$634=function(e,t){return function(r,n,s,a){return r.open(n,s,a)}(e,t[1],t[2],t[0])},z11cymP27JOrM6FBeJkkje$3js$0Js$1.send$652=function(e,t){switch(t[0]){case 0:return function(r,n){return r.send(n)}(e,t[1]);default:return function(r){return r.send(null)}(e)}},z11cymP27JOrM6FBeJkkje$3js$0Js$1.sendBinary$678=function(e,t){return function(r,n){return r.send(SmlPrims.stringToArrayBuffer(n))}(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.setRequestHeader$689=function(e,t){return function(r,n,s){return r.setRequestHeader(n,s)}(e,t[0],t[1])},z11cymP27JOrM6FBeJkkje$3js$0Js$1.setResponseType$704=function(e,t){return function(r,n){r.responseType=n}(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.state$715=function(e){return function(t){return t.readyState}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.status$722=function(e){return function(t){return SmlPrims.option(t.status)}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.onStateChange$729=function(e,t){return function(r,n){r.onreadystatechange=n}(e,t)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.response$740=function(e){return function(t){return SmlPrims.option(t.responseText)}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.responseArrBuf$747=function(e){return function(t){return SmlPrims.option(SmlPrims.arraybufferToString(t.response))}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.abort$754=function(e){return function(t){return t.abort()}(e)},z11cymP27JOrM6FBeJkkje$3js$0Js$1.random$761=function(e){return function(){return Math.random()}()},z11cymP27JOrM6FBeJkkje$3js$0Js$1.loadScript$767=function(e,t){var r=function(s){return document.getElementsByTagName(s)[0]}("head"),n=document.createElement("script");return function(s,a,l){s[a]=l}(n,"type","text/javascript"),function(s,a,l){s[a]=l}(n,"src",e),function(s,a,l){s[a]=l}(n,"onreadystatechange",t),function(s,a,l){s[a]=l}(n,"onload",t),function(s,a){return s.appendChild(a)}(r,n)},0})();typeof JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1>"u"&&(JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1={});(function(){var i={};i.$eq_bucket=function(n,s,a){e:for(;;){var l=a[0],o=a[1];if(l==null)return o==null;if(o==null)return!1;var u=l,h=o;if(u[0]==h[0])if(n([u[1],h[1]]))if(s([u[2],h[2]])){var c=n,f=s,d=[u[3],h[3]],n=c,s=f,a=d;continue e}else return!1;else return!1;else return!1}},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.eq_bucket$594=i.$eq_bucket;var e,t={};t.$f=function(n){try{var s=SmlPrims.chk_ovf_i32(n+n);return s<123456789?t.$f(s):n}catch(a){return function(l){var o=l;if(o[0]==CompilerInitial.en$Overflow$48)return n;throw l}(a)}};var r=t.$f;return e=r(65536),JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.alloc$96=function(n){var s;if(n>=e)s=e;else{var a={};a.$f=function(u){e:for(;;){if(u>=n)return u;var h=SmlPrims.chk_ovf_i32(u+u),u=h;continue e}};var l=a.$f;s=l(32)}var o=null;if(!(0<=s&&s<=123456789))throw CompilerInitial.exn$Size$51;return SmlPrims.wordTableInit(s,o)},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.growTable$100=function(n,s){var a,l=null;if(!(0<=s&&s<=123456789))throw CompilerInitial.exn$Size$51;a=SmlPrims.wordTableInit(s,l);var o={};o.$copy=function(d){e:for(;;){if(d==null)return 0;var m=d,v=m[0],p=m[1],g=m[2],k=m[3],S=SmlPrims.w32_to_i32_X(v&(SmlPrims.i32_to_w32(s)-1&4294967295)),w,A,_=v,W=p,J=g,H,F=a.length;if(!(0<=S&&S<F))throw CompilerInitial.exn$Subscript$50;H=a[S],A=[_,W,J,H],w=A;var V=a.length;if(!(0<=S&&S<V))throw CompilerInitial.exn$Subscript$50;a[S]=w;var U=k,d=U;continue e}};var u=o.$copy,h=n.length,c={};c.$lr=function(d){e:for(;;)if(d<h){u(n[d]);var m=SmlPrims.chk_ovf_i32(d+1),d=m;continue e}else return 0};var f=c.$lr;return f(0),a},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.growTableIfNeeded$130=function(n,s){var a=n[0],l=a.length;return s>=l?(n[0]=JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.growTable$100(a,SmlPrims.chk_ovf_i32(l+l)),!0):!1},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.clear$145=function(n){var s=n.length,a={};a.$lr=function(o){e:for(;;)if(o<s){var u=n,h=o,c;n[o],c=null,u[h]=c;var f=SmlPrims.chk_ovf_i32(o+1),o=f;continue e}else return 0};var l=a.$lr;return l(0)},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.listItems$151=function(n,s){var a={};a.$f=function(o,u,h){switch(h){case 0:return u;default:switch(o){case-1:return u;default:{var c={};c.$g=function(p,g,k){e:for(;;){if(p==null)return a.$f(SmlPrims.chk_ovf_i32(o-1),g,k);var S=p,w=S[2],A=S[3],_=A,W=[w,g],J=SmlPrims.chk_ovf_i32(k-1),p=_,g=W,k=J;continue e}};var f=c.$g,d=f,m,v=n.length;if(!(0<=o&&o<v))throw CompilerInitial.exn$Subscript$50;return m=n[o],d(m,u,h)}}}};var l=a.$f;return l(SmlPrims.chk_ovf_i32(n.length-1),null,s[0])},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.listItemsi$202=function(n,s){var a={};a.$f=function(o,u,h){switch(h){case 0:return u;default:switch(o){case-1:return u;default:{var c={};c.$g=function(p,g,k){e:for(;;){if(p==null)return a.$f(SmlPrims.chk_ovf_i32(o-1),g,k);var S=p,w=S[1],A=S[2],_=S[3],W=_,J=[[w,A],g],H=SmlPrims.chk_ovf_i32(k-1),p=W,g=J,k=H;continue e}};var f=c.$g,d=f,m,v=n.length;if(!(0<=o&&o<v))throw CompilerInitial.exn$Subscript$50;return m=n[o],d(m,u,h)}}}};var l=a.$f;return l(SmlPrims.chk_ovf_i32(n.length-1),null,s[0])},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.appi$253=function(n,s){var a={};a.$appF=function(c){e:for(;;){if(c==null)return 0;var f=c,d=f[1],m=f[2],v=f[3];n([d,m]);var p=v,c=p;continue e}};var l=a.$appF,o=s.length,u={};u.$lr=function(c){e:for(;;)if(c<o){l(s[c]);var f=SmlPrims.chk_ovf_i32(c+1),c=f;continue e}else return 0};var h=u.$lr;return h(0)},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.app$277=function(n,s){var a={};a.$appF=function(c){e:for(;;){if(c==null)return 0;var f=c,d=f[2],m=f[3];n(d);var v=m,c=v;continue e}};var l=a.$appF,o=s.length,u={};u.$lr=function(c){e:for(;;)if(c<o){l(s[c]);var f=SmlPrims.chk_ovf_i32(c+1),c=f;continue e}else return 0};var h=u.$lr;return h(0)},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.mapi$301=function(n,s){var a={};a.$mapF=function(f){if(f==null)return null;var d=f,m=d[0],v=d[1],p=d[2],g=d[3];return[m,v,n([v,p]),a.$mapF(g)]};var l=a.$mapF,o=s.length,u;if(!(0<=o&&o<=123456789))throw CompilerInitial.exn$Size$51;u=Array(o);var h={};h.$init=function(f,d){e:for(;;){if(d>=o)return 0;var m=f,v=d,p,g=l,k,S=s.length;if(!(0<=d&&d<S))throw CompilerInitial.exn$Subscript$50;k=s[d],p=g(k),m[v]=p;var w=f,A=SmlPrims.chk_ovf_i32(d+1),f=w,d=A;continue e}};var c=h.$init;return c(u,0),u},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.map$329=function(n,s){var a={};a.$mapF=function(f){if(f==null)return null;var d=f,m=d[0],v=d[1],p=d[2],g=d[3];return[m,v,n(p),a.$mapF(g)]};var l=a.$mapF,o=s.length,u;if(!(0<=o&&o<=123456789))throw CompilerInitial.exn$Size$51;u=Array(o);var h={};h.$init=function(f,d){e:for(;;){if(d>=o)return 0;var m=f,v=d,p,g=l,k,S=s.length;if(!(0<=d&&d<S))throw CompilerInitial.exn$Subscript$50;k=s[d],p=g(k),m[v]=p;var w=f,A=SmlPrims.chk_ovf_i32(d+1),f=w,d=A;continue e}};var c=h.$init;return c(u,0),u},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.foldi$357=function(n,s,a){var l={};l.$foldF=function(f,d){e:for(;;){if(f==null)return d;var m=f,v=m[1],p=m[2],g=m[3],k=g,S=n([v,p,d]),f=k,d=S;continue e}};var o=l.$foldF,u=a.length,h={};h.$lr=function(f,d){e:for(;;)if(f<u){var m=SmlPrims.chk_ovf_i32(f+1),v=o(a[f],d),f=m,d=v;continue e}else return d};var c=h.$lr;return c(0,s)},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.fold$389=function(n,s,a){var l={};l.$foldF=function(f,d){e:for(;;){if(f==null)return d;var m=f,v=m[2],p=m[3],g=p,k=n([v,d]),f=g,d=k;continue e}};var o=l.$foldF,u=a.length,h={};h.$lr=function(f,d){e:for(;;)if(f<u){var m=SmlPrims.chk_ovf_i32(f+1),v=o(a[f],d),f=m,d=v;continue e}else return d};var c=h.$lr;return c(0,s)},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.modify$421=function(n,s){var a={};a.$modifyF=function(c){if(c==null)return null;var f=c,d=f[0],m=f[1],v=f[2],p=f[3];return[d,m,n(v),a.$modifyF(p)]};var l=a.$modifyF,o=s.length,u={};u.$lr=function(c){e:for(;;)if(c<o){s[c]=l(s[c]);var f=SmlPrims.chk_ovf_i32(c+1),c=f;continue e}else return 0};var h=u.$lr;return h(0)},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.modifyi$445=function(n,s){var a={};a.$modifyF=function(c){if(c==null)return null;var f=c,d=f[0],m=f[1],v=f[2],p=f[3];return[d,m,n([m,v]),a.$modifyF(p)]};var l=a.$modifyF,o=s.length,u={};u.$lr=function(c){e:for(;;)if(c<o){s[c]=l(s[c]);var f=SmlPrims.chk_ovf_i32(c+1),c=f;continue e}else return 0};var h=u.$lr;return h(0)},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.filteri$469=function(n,s){var a=[0],l={};l.$filterP=function(f){e:for(;;){if(f==null)return null;var d=f,m=d[0],v=d[1],p=d[2],g=d[3];if(n([v,p]))return a[0]=SmlPrims.chk_ovf_i32(a[0]+1),[m,v,p,l.$filterP(g)];var k=g,f=k;continue e}};var o=l.$filterP,u=s.length,h={};h.$lr=function(f){e:for(;;)if(f<u){s[f]=o(s[f]);var d=SmlPrims.chk_ovf_i32(f+1),f=d;continue e}else return 0};var c=h.$lr;return c(0),a[0]},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.filter$502=function(n,s){var a=[0],l={};l.$filterP=function(f){e:for(;;){if(f==null)return null;var d=f,m=d[0],v=d[1],p=d[2],g=d[3];if(n(p))return a[0]=SmlPrims.chk_ovf_i32(a[0]+1),[m,v,p,l.$filterP(g)];var k=g,f=k;continue e}};var o=l.$filterP,u=s.length,h={};h.$lr=function(f){e:for(;;)if(f<u){s[f]=o(s[f]);var d=SmlPrims.chk_ovf_i32(f+1),f=d;continue e}else return 0};var c=h.$lr;return c(0),a[0]},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.copy$535=function(n){var s=n.length,a;if(!(0<=s&&s<=123456789))throw CompilerInitial.exn$Size$51;a=Array(s);var l={};l.$init=function(u,h){e:for(;;){if(h>=s)return 0;var c=u,f=h,d,m=n.length;if(!(0<=h&&h<m))throw CompilerInitial.exn$Subscript$50;d=n[h],c[f]=d;var v=u,p=SmlPrims.chk_ovf_i32(h+1),u=v,h=p;continue e}};var o=l.$init;return o(a,0),a},JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.bucketSizes$542=function(n){var s={};s.$len=function(c,f){e:for(;;){if(c==null)return f;var d=c,m=d[3],v=m,p=SmlPrims.chk_ovf_i32(f+1),c=v,f=p;continue e}};var a=s.$len,l=null,o=n.length,u={};u.$rl=function(c,f){e:for(;;)if(c>=0){var d=SmlPrims.chk_ovf_i32(c-1),m,v=n[c];m=[a(v,0),f];var p=d,g=m,c=p,f=g;continue e}else return f};var h=u.$rl;return h(SmlPrims.chk_ovf_i32(o-1),l)},0})();typeof xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2>"u"&&(xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2={});(function(){return xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.index$107=function(i,e){return SmlPrims.w32_to_i32_X(i&(SmlPrims.i32_to_w32(e)-1&4294967295))},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.mkTable$114=function(i,e){var t,r=[JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.alloc$96(i)];return t=[[0],e,r],[0,t]},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.clear$124=function(i){var e=i[1],t=e[2],r=e[0];return JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.clear$145(t[0]),r[0]=0,0},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137=function(i,e){var t=i[1],r=t[2],n=t[0],s=e[0],a=e[1],l=r[0],o=l.length,u,h=s.length,c={};c.$lr=function(A,_){e:for(;;)if(A<h){var W=SmlPrims.chk_ovf_i32(A+1),J=(SmlPrims.i32_to_w32(s.charCodeAt(A))^_)*16777619&4294967295,A=W,_=J;continue e}else return _};var f=c.$lr;u=f(0,2166136261);var d=SmlPrims.w32_to_i32_X(u&(SmlPrims.i32_to_w32(o)-1&4294967295)),m={};m.$look=function(A){if(A==null){var _,W,J=u,H=s,F=a,V,U=l.length;if(!(0<=d&&d<U))throw CompilerInitial.exn$Subscript$50;V=l[d],W=[J,H,F,V],_=W;var y=l.length;if(!(0<=d&&d<y))throw CompilerInitial.exn$Subscript$50;l[d]=_,n[0]=SmlPrims.chk_ovf_i32(n[0]+1);var P=n[0],C=r[0],b=C.length;return P>=b&&(r[0]=JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.growTable$100(C,SmlPrims.chk_ovf_i32(b+b))),null}else{var x=A,$=x[0],I=x[1],D=x[2],M=x[3];if(u==$&&s==I)return[u,s,a,M];var T=m.$look(M);return T==null?null:[$,I,D,T]}};var v=m.$look,p,g=v,k,S=l.length;if(!(0<=d&&d<S))throw CompilerInitial.exn$Subscript$50;if(k=l[d],p=g(k),p==null)return 0;var w=l.length;if(!(0<=d&&d<w))throw CompilerInitial.exn$Subscript$50;return l[d]=p,0},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.inDomain$203=function(i,e){var t=i[1],r=t[2],n=r[0],s,a=e.length,l={};l.$lr=function(v,p){e:for(;;)if(v<a){var g=SmlPrims.chk_ovf_i32(v+1),k=(SmlPrims.i32_to_w32(e.charCodeAt(v))^p)*16777619&4294967295,v=g,p=k;continue e}else return p};var o=l.$lr;s=o(0,2166136261);var u=SmlPrims.w32_to_i32_X(s&(SmlPrims.i32_to_w32(n.length)-1&4294967295)),h={};h.$look=function(v){e:for(;;){if(v==null)return!1;var p=v,g=p[0],k=p[1],S=p[3];if(s==g&&e==k)return!0;var w=S,v=w;continue e}};var c=h.$look,f=c,d,m=n.length;if(!(0<=u&&u<m))throw CompilerInitial.exn$Subscript$50;return d=n[u],f(d)},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.lookup$246=function(i,e){var t=i[1],r=t[2],n=t[1],s=r[0],a,l=e.length,o={};o.$lr=function(p,g){e:for(;;)if(p<l){var k=SmlPrims.chk_ovf_i32(p+1),S=(SmlPrims.i32_to_w32(e.charCodeAt(p))^g)*16777619&4294967295,p=k,g=S;continue e}else return g};var u=o.$lr;a=u(0,2166136261);var h=SmlPrims.w32_to_i32_X(a&(SmlPrims.i32_to_w32(s.length)-1&4294967295)),c={};c.$look=function(p){e:for(;;){if(p==null)throw n;var g=p,k=g[0],S=g[1],w=g[2],A=g[3];if(a==k&&e==S)return w;var _=A,p=_;continue e}};var f=c.$look,d=f,m,v=s.length;if(!(0<=h&&h<v))throw CompilerInitial.exn$Subscript$50;return m=s[h],d(m)},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.find$291=function(i,e){var t=i[1],r=t[2],n=r[0],s=n.length,a,l=e.length,o={};o.$lr=function(p,g){e:for(;;)if(p<l){var k=SmlPrims.chk_ovf_i32(p+1),S=(SmlPrims.i32_to_w32(e.charCodeAt(p))^g)*16777619&4294967295,p=k,g=S;continue e}else return g};var u=o.$lr;a=u(0,2166136261);var h=SmlPrims.w32_to_i32_X(a&(SmlPrims.i32_to_w32(s)-1&4294967295)),c={};c.$look=function(p){e:for(;;){if(p==null)return[1];var g=p,k=g[0],S=g[1],w=g[2],A=g[3];if(a==k&&e==S)return[0,w];var _=A,p=_;continue e}};var f=c.$look,d=f,m,v=n.length;if(!(0<=h&&h<v))throw CompilerInitial.exn$Subscript$50;return m=n[h],d(m)},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.remove$335=function(i,e){var t=i[1],r=t[1],n=t[2],s=t[0],a=n[0],l=a.length,o,u=e.length,h={};h.$lr=function(_,W){e:for(;;)if(_<u){var J=SmlPrims.chk_ovf_i32(_+1),H=(SmlPrims.i32_to_w32(e.charCodeAt(_))^W)*16777619&4294967295,_=J,W=H;continue e}else return W};var c=h.$lr;o=c(0,2166136261);var f=SmlPrims.w32_to_i32_X(o&(SmlPrims.i32_to_w32(l)-1&4294967295)),d={};d.$look=function(_){if(_==null)throw r;var W=_,J=W[0],H=W[1],F=W[2],V=W[3];if(o==J&&e==H)return[F,V];var U=d.$look(V);return[U[0],[J,H,F,U[1]]]};var m=d.$look,v,p=m,g,k=a.length;if(!(0<=f&&f<k))throw CompilerInitial.exn$Subscript$50;g=a[f],v=p(g);var S=v[0],w=v[1],A=a.length;if(!(0<=f&&f<A))throw CompilerInitial.exn$Subscript$50;return a[f]=w,s[0]=SmlPrims.chk_ovf_i32(s[0]-1),S},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.numItems$399=function(i){return i[1][0][0]},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.listItems$408=function(i){var e=i[1],t=e[2],r=e[0],n=t[0];return JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.listItems$151(n,r)},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.listItemsi$419=function(i){var e=i[1],t=e[2],r=e[0],n=t[0];return JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.listItemsi$202(n,r)},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.appi$430=function(i,e){var t=e[1],r=t[2];return JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.appi$253(i,r[0])},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.app$445=function(i,e){var t=e[1],r=t[2];return JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.app$277(i,r[0])},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.mapi$460=function(i,e){var t=e[1],r=t[2],n=t[0],s=t[1],a,l=[JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.mapi$301(i,r[0])];return a=[[n[0]],s,l],[0,a]},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.map$482=function(i,e){var t=e[1],r=t[2],n=t[0],s=t[1],a,l=[JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.map$329(i,r[0])];return a=[[n[0]],s,l],[0,a]},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.foldi$504=function(i,e,t){var r=t[1],n=r[2];return JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.foldi$357(i,e,n[0])},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.fold$524=function(i,e,t){var r=t[1],n=r[2];return JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.fold$389(i,e,n[0])},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.modifyi$544=function(i,e){var t=e[1],r=t[2];return JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.modifyi$445(i,r[0])},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.modify$559=function(i,e){var t=e[1],r=t[2];return JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.modify$421(i,r[0])},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.filteri$574=function(i,e){var t=e[1],r=t[2];return t[0][0]=JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.filteri$469(i,r[0]),0},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.filter$591=function(i,e){var t=e[1],r=t[2];return t[0][0]=JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.filter$502(i,r[0]),0},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.copy$608=function(i){var e=i[1],t=e[2],r=e[0],n=e[1],s,a,l,o=t[0],u=o.length,h;if(!(0<=u&&u<=123456789))throw CompilerInitial.exn$Size$51;h=Array(u);var c={};c.$init=function(d,m){e:for(;;){if(m>=u)return 0;var v=d,p=m,g,k=o.length;if(!(0<=m&&m<k))throw CompilerInitial.exn$Subscript$50;g=o[m],v[p]=g;var S=d,w=SmlPrims.chk_ovf_i32(m+1),d=S,m=w;continue e}};var f=c.$init;return f(h,0),l=h,a=[l],s=[[r[0]],n,a],[0,s]},xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.bucketSizes$624=function(i){var e=i[1],t=e[2];return JWAmPAyTLMKnwF4fd7hGpg$3smlox$0hash$3table$3rep$1.bucketSizes$542(t[0])},0})();typeof lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1>"u"&&(lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1={});(function(){lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.eq_result$519=function(s,a,l){var o=l[0],u=l[1];switch(o[0]){case 0:{switch(u[0]){case 0:{var h=o[1],c=u[1];return s([h,c])}default:return!1}break}case 1:{switch(u[0]){case 1:{var f=o[1],d=u[1];return a([f,d])}default:return!1}break}}},lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.eq_source_location$529=function(s,a){switch(s[0]){case 0:{switch(a[0]){case 0:return!0;default:return!1}break}case 1:{switch(a[0]){case 1:{var l=s[1],o=a[1],u,h=l[0],c=o[0];if(u=h[0]==c[0]?h[1]==c[1]:!1,u){var f=l[1],d=o[1];return f[0]==d[0]?f[1]==d[1]:!1}else return!1;break}default:return!1}break}case 2:{switch(a[0]){case 2:{var m=s[1],v=a[1];return m[0]==v[0]?m[1]==v[1]:!1}default:return!1}break}}},lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.fmap$62=function(s,a){switch(a[0]){case 0:{var l=a[1];return s(l)}default:{var o=a[1];return[1,o]}}};var i=function(s,a){var l=s[1],o=s[0],u=a[1],h=a[0],c,f,d,m,v=o[0],p=o[1],g=h[0],k=h[1];switch(m=v<g?0:v>g?1:p<k?0:p>k?1:2,m){case 0:{d=[1,[h,o]];break}case 2:{d=[2,o];break}default:d=[1,[o,h]]}switch(d[0]){case 2:{f=d[1];break}case 1:{f=d[1][0];break}default:f=h}var S,w,A,_=l[0],W=l[1],J=u[0],H=u[1];switch(A=_<J?0:_>J?1:W<H?0:W>H?1:2,A){case 0:{w=[1,[u,l]];break}case 2:{w=[2,l];break}default:w=[1,[l,u]]}switch(w[0]){case 2:{S=w[1];break}case 1:{S=w[1][1];break}default:S=l}return c=[f,S],[1,c]};lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244=function(s){if(s==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Can't merge empty locations"];var a=s,l=a[0],o=a[1],u={};u.$foldl=function(c,f){e:for(;;){if(f==null)return c;var d=f,m=d[0],v=d[1],p;switch(m[0]){case 2:{var g=m[1];switch(c[0]){case 2:{var k=c[1],S,w=g[0],A=g[1],_=k[0],W=k[1];switch(S=w<_?0:w>_?1:A<W?0:A>W?1:2,S){case 0:{p=[1,[k,g]];break}case 2:{p=[2,g];break}default:p=[1,[g,k]]}break}case 1:{var J=c[1],H=[g,g];p=i(J,H);break}default:p=[0]}break}case 1:{var F=m[1];switch(c[0]){case 2:{var V=c[1],U=[V,V];p=i(F,U);break}case 1:{var y=c[1];p=i(F,y);break}default:p=[0]}break}default:p=[0]}var P=p,C=v,c=P,f=C;continue e}};var h=u.$foldl;return h(l,o)};var e={};e.$split$=function(s,a){return function(l){switch(a){case 0:return[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(l),s];default:{if(s==null)throw CompilerInitial.exn$Subscript$50;var o=s,u=o[0],h=o[1];return e.$split$(h,SmlPrims.chk_ovf_i32(a-1))([u,l])}}}};var t=e.$split$,r={};r.$interleave$=function(s,a){return function(l){if(s==null){if(a==null)return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(l);throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Interleaving lists of unequal lengths"]}else{if(a==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Interleaving lists of unequal lengths"];var o=s,u=o[0],h=o[1],c=a,f=c[0],d=c[1];return r.$interleave$(h,d)([f,[u,l]])}}};var n=r.$interleave$;return lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.print_errors$484=function(s,a){var l=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(u){var h=u[0],c=u[1],f=h+`
`,d;switch(c[0]){case 2:{var m=c[1],v=m[0],p=m[1],g="Line: "+abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(v)+" Offset: "+abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(p)+`

`,k=h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.fields$229(function(fe){return fe==10},s),S;try{var w,A=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(v-2)-1);w=0<A?A:0;var _={};_.$h=function(fe,ke){e:for(;;)switch(ke){case 0:return fe;default:{if(fe==null)throw CompilerInitial.exn$Subscript$50;var Me=fe,ut=Me[1],ht=ut,tr=SmlPrims.chk_ovf_i32(ke-1),fe=ht,ke=tr;continue e}}};var W=_.$h;if(w<0)throw CompilerInitial.exn$Subscript$50;S=W(k,w)}catch(fe){S=function(ke){var Me=ke;if(Me[0]==CompilerInitial.en$Subscript$50)return k;throw ke}(fe)}var J;try{var H=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(4)+1),F={};F.$h=function(fe,ke){switch(ke){case 0:return null;default:{if(fe==null)throw CompilerInitial.exn$Subscript$50;var Me=fe,ut=Me[0],ht=Me[1];return[ut,F.$h(ht,SmlPrims.chk_ovf_i32(ke-1))]}}};var V=F.$h;if(H<0)throw CompilerInitial.exn$Subscript$50;J=V(S,H)}catch(fe){J=function(ke){var Me=ke;if(Me[0]==CompilerInitial.en$Subscript$50)return S;throw ke}(fe)}var U=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(fe){return SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tabulate$592(2,function(ke){return 32}))+fe+`
`},J),y;try{var P=SmlPrims.chk_ovf_i32(3),C={};C.$h=function(fe,ke){switch(ke){case 0:return null;default:{if(fe==null)throw CompilerInitial.exn$Subscript$50;var Me=fe,ut=Me[0],ht=Me[1];return[ut,C.$h(ht,SmlPrims.chk_ovf_i32(ke-1))]}}};var b=C.$h;if(P<0)throw CompilerInitial.exn$Subscript$50;y=b(U,P)}catch(fe){y=function(ke){var Me=ke;if(Me[0]==CompilerInitial.en$Subscript$50)return U;throw ke}(fe)}var x;try{var $=SmlPrims.chk_ovf_i32(3),I={};I.$h=function(fe,ke){e:for(;;)switch(ke){case 0:return fe;default:{if(fe==null)throw CompilerInitial.exn$Subscript$50;var Me=fe,ut=Me[1],ht=ut,tr=SmlPrims.chk_ovf_i32(ke-1),fe=ht,ke=tr;continue e}}};var D=I.$h;if($<0)throw CompilerInitial.exn$Subscript$50;x=D(U,$)}catch(fe){x=function(ke){var Me=ke;if(Me[0]==CompilerInitial.en$Subscript$50)return null;throw ke}(fe)}var M,T,O=g,B,E,L=SmlPrims.concat(y),N,R,K,Z,Q=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(p+2)-1);Z=SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tabulate$592(Q,function(fe){return 32})),K=Z+"^",R=[K,[SmlPrims.concat(x),null]],N=R,E=[L,N],B=E,T=[O,B],M=T,d=SmlPrims.concat(M);break}case 1:{var z=c[1],G=z[1],X=z[0],Y=G[0],te=G[1],ae=X[0],re=X[1],se="Start: "+abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(Y)+","+abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(te)+" End: "+abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(ae)+","+abSkfeMyxlIKxrMz4NXGul$3basis$0Int32$1.toString$456(re)+`

`,ue=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(ae-Y)+1),q=h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.fields$229(function(fe){return fe==10},s),ne,he=SmlPrims.chk_ovf_i32(Y-2);ne=0<he?he:0;var $e,ve,be=SmlPrims.chk_ovf_i32(ne+2);ve=be<Y?be:Y,$e=SmlPrims.chk_ovf_i32(ve-ne);var Se,ge={};ge.$h=function(fe,ke){e:for(;;)switch(ke){case 0:return fe;default:{if(fe==null)throw CompilerInitial.exn$Subscript$50;var Me=fe,ut=Me[1],ht=ut,tr=SmlPrims.chk_ovf_i32(ke-1),fe=ht,ke=tr;continue e}}};var pe=ge.$h;if(ne<0)throw CompilerInitial.exn$Subscript$50;Se=pe(q,ne);var de=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(fe){return SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tabulate$592(2,function(ke){return 32}))+fe+`
`},Se),xe=t(de,$e)(null),ye=xe[0],Pe=xe[1],Ce=t(Pe,ue)(null),Be=Ce[0],Le=Ce[1],We;try{var Ne={};Ne.$h=function(fe,ke){switch(ke){case 0:return null;default:{if(fe==null)throw CompilerInitial.exn$Subscript$50;var Me=fe,ut=Me[0],ht=Me[1];return[ut,Ne.$h(ht,SmlPrims.chk_ovf_i32(ke-1))]}}};var Xe=Ne.$h;We=Xe(Le,2)}catch(fe){We=function(ke){var Me=ke;if(Me[0]==CompilerInitial.en$Subscript$50)return Le;throw ke}(fe)}var Fe,Ee=G[0],De=G[1],Qe=X[0],tt=X[1];if(Be==null)Fe=null;else{var Je=Be,at=Je[1];if(at==null){var He,ze,ot,lt=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(De+2)-1);ot=SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tabulate$592(lt,function(fe){return 32}));var kt,jt=SmlPrims.chk_ovf_i32(tt-De);kt=SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tabulate$592(jt,function(fe){return 126})),ze=ot+kt,He=[ze,null],Fe=He}else{var Bt=Je[0];dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.last$88(at);var Rt,Ot=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(Qe-Ee)-1),Wt={};Wt.$h=function(fe,ke){switch(ke){case 0:return null;default:{if(fe==null)throw CompilerInitial.exn$Subscript$50;var Me=fe,ut=Me[0],ht=Me[1];return[ut,Wt.$h(ht,SmlPrims.chk_ovf_i32(ke-1))]}}};var yt=Wt.$h;if(Ot<0)throw CompilerInitial.exn$Subscript$50;Rt=yt(at,Ot);var Et,Nt,Ht,Xt,Ut,Yt=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(De+2)-1);Ut=SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tabulate$592(Yt,function(fe){return 32}));var er,Ur=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(Bt.length-De)+1);er=SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tabulate$592(Ur,function(fe){return 126})),Xt=Ut+er,Ht=Xt+`
`,Nt=[Ht,null],Et=Nt;var Ir,Yr,ki,ei,wi=SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tabulate$592(2,function(fe){return 32})),ti,ri=SmlPrims.chk_ovf_i32(tt-1);ti=SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tabulate$592(ri,function(fe){return 126})),ei=wi+ti,ki=ei+`
`,Yr=[ki,null],Ir=Yr;var xi=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(fe){var ke,Me=SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tabulate$592(2,function(tr){return 32})),ut,ht=fe.length;return ut=SmlPrims.implode(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.tabulate$592(ht,function(tr){return 126})),ke=Me+ut,ke+`
`},Rt);Fe=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.s$n$684(Et,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.s$n$684(xi,Ir))}}d=se+SmlPrims.concat(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.s$n$684(ye,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.s$n$684(n(Be,Fe)(null),We)));break}default:d="Unknown"}return f+d},a),o=h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.concatWith$180(`
`,l)+`
`;return EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161(o)},0})();typeof h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1>"u"&&(h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1={});(function(){h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66=new String("RuntimeError"),h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$ReturnExn$67=new String("ReturnExn");var i=[0];h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.getId$69=function(r){return[i[0],(i[0]=i[0]+1&4294967295,0)][0]};var e={};e.$findMethod=function(r,n){e:for(;;){var s=r[1],a=s[1],l=s[2],o=xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.find$291(a,n);switch(o[0]){case 0:{var u=o[1];return[0,u]}default:switch(l[0]){case 0:{var h=l[1],c=h,f=n,r=c,n=f;continue e}default:return[1]}}}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.findMethod$77=e.$findMethod,h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.eq$108=function(r,n){switch(r[0]){case 2:{switch(n[0]){case 2:return[6,!0];default:return[6,!1]}break}case 6:{switch(n[0]){case 6:return[6,r[1]==n[1]];default:return[6,!1]}break}case 1:{switch(n[0]){case 1:{var s=r[1],a=n[1];return[6,y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$kk$552(s,a)]}default:return[6,!1]}break}case 0:{switch(n[0]){case 0:return[6,r[1]==n[1]];default:return[6,!1]}break}case 4:{switch(n[0]){case 4:return[6,r[1][2]==n[1][2]];default:return[6,!1]}break}case 5:{switch(n[0]){case 5:return[6,r[1][1]==n[1][1]];default:return[6,!1]}break}default:switch(n[0]){case 3:return[6,r[1][2]==n[1][2]];default:return[6,!1]}}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.neq$184=function(r,n){var s=h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.eq$108(r,n);switch(s[0]){case 6:{var a=s[1];return[6,!a]}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Equality check produced a non-boolean value"]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.minus$198=function(r,n){switch(r[0]){case 1:{switch(n[0]){case 1:return[1,r[1]-n[1]];default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to - must be numbers"]}break}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to - must be numbers"]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.plus$216=function(r,n){switch(r[0]){case 1:{switch(n[0]){case 1:return[1,r[1]+n[1]];default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to + must both be numbers or strings"]}break}case 0:{switch(n[0]){case 0:return[0,r[1]+n[1]];default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to + must both be numbers or strings"]}break}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to + must both be numbers or strings"]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.times$244=function(r,n){switch(r[0]){case 1:{switch(n[0]){case 1:return[1,r[1]*n[1]];default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to * must be numbers"]}break}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to * must be numbers"]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.divides$262=function(r,n){switch(r[0]){case 1:{switch(n[0]){case 1:return[1,r[1]/n[1]];default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to / must be numbers"]}break}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to / must be numbers"]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.greater$280=function(r,n){switch(r[0]){case 1:{switch(n[0]){case 1:return[6,r[1]>n[1]];default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to > must be numbers"]}break}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to > must be numbers"]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.greaterEq$298=function(r,n){switch(r[0]){case 1:{switch(n[0]){case 1:return[6,r[1]>=n[1]];default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to >= must be numbers"]}break}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to >= must be numbers"]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.less$316=function(r,n){switch(r[0]){case 1:{switch(n[0]){case 1:return[6,r[1]<n[1]];default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to < must be numbers"]}break}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to < must be numbers"]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.lessEq$334=function(r,n){switch(r[0]){case 1:{switch(n[0]){case 1:return[6,r[1]<=n[1]];default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to <= must be numbers"]}break}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operands to <= must be numbers"]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.negate$352=function(r){switch(r[0]){case 1:return[1,-r[1]];default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Operand to unary - must be a number"]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.isTruthy$363=function(r){switch(r[0]){case 6:return!!r[1];case 2:return!1;default:return!0}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.logicalNot$377=function(r){var n,s;switch(r[0]){case 6:{s=!!r[1];break}case 2:{s=!1;break}default:s=!0}return n=!s,[6,n]};var t={};return t.$call=function(r,n){switch(r[0]){case 4:{var s=r[1],a=s[1];return a(n)}case 5:{var l=r[1],o=l[0],u=[3,[o,xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.mkTable$114(256,[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Undefined property"]),[i[0],(i[0]=i[0]+1&4294967295,0)][0]]],h=h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.findMethod$77(o,"init");switch(h[0]){case 1:{if(n==null)return u;throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Calling default constructor with arguments"]}default:{var c=h[1];try{return t.$call(c(u),n),u}catch(f){return function(d){var m=d;if(m[0]==h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$ReturnExn$67)return u;throw d}(f)}}}break}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"can only call functions."]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.call$381=t.$call,h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.get$418=function(r,n){switch(r[0]){case 3:{var s=r[1],a=s[0],l=s[1],o=xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.find$291(l,n);switch(o[0]){case 0:return o[1];default:{var u=h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.findMethod$77(a,n);switch(u[0]){case 0:{var h=u[1];return h(r)}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"No property."]}}}break}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Only instances have properties"]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.set$449=function(r,n,s){switch(r[0]){case 3:{var a=r[1],l=a[1];return xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(l,[n,s])}default:throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$RuntimeError$66,"Only instances have fields"]}},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.toString$469=function(r){switch(r[0]){case 2:return"nil";case 6:return r[1]?"true":"false";case 1:{var n=r[1],s=y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.toString$158(n),a=s.length;if(a<0||a>1073741823)throw CompilerInitial.exn$Size$51;var l=Array(a),o={};o.$loop=function(h){e:for(;;)if(h<a){var c=l,f=h,d,m=s.charCodeAt(h);switch(m){case 126:{d=45;break}default:d=m}c[f]=d;var v=SmlPrims.chk_ovf_i32(h+1),h=v;continue e}else return 0};var u=o.$loop;return u(0),SmlPrims.charArrayToString(l);break}case 0:return r[1];case 4:return"<"+r[1][0]+">";case 5:return r[1][0][1][0];default:return r[1][0][1][0]+" instance"}},0})();typeof h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1>"u"&&(h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1={});(function(){h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.en$UnknownVariable$54=new String("UnknownVariable"),h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.make$58=function(l){var o=xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.mkTable$114(256,[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unknown variable."]),u={};u.$app=function(c){e:for(;;){if(c==null)return 0;var f=c,d=f[0],m=f[1];xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(o,d);var v=m,c=v;continue e}};var h=u.$app;return h(l),[o,null]},h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.makeNested$65=function(l){return[xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.mkTable$114(256,[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unknown variable."]),l]},h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.declare$69=function(l,o){return xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(l),o)},h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.remove$76=function(l,o){return xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.remove$335(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(l),o),0};var i={};i.$get=function(l,o){e:for(;;){if(l==null)throw[h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.en$UnknownVariable$54,o];var u=l,h=u[0],c=u[1],f=xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.find$291(h,o);switch(f[0]){case 0:return f[1];default:{var d=c,m=o,l=d,o=m;continue e}}}},h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.get$83=i.$get;var e={};e.$getEnclosing=function(l,o){e:for(;;){if(l==null)return[1];var u=l,h=u[0],c=u[1];if(xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.inDomain$203(h,o))return[0,h];var f=c,d=o,l=f,o=d;continue e}};var t=e.$getEnclosing;h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.assign$134=function(l,o){var u=o[0],h=o[1],c=t(l,u);switch(c[0]){case 1:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unknown variable."];default:{var f=c[1];return xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(f,[u,h])}}},h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.isGlobal$150=function(l){if(l==null)return!1;var o=l;return o[1]==null};var r={};r.$getJumps$=function(l,o,u){e:for(;;){if(l==null)throw[h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.en$UnknownVariable$54,o];var h=l,c=h[0],f=h[1];switch(xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.find$291(c,o)[0]){case 0:return u;default:{var d=f,m=o,v=SmlPrims.chk_ovf_i32(u+1),l=d,o=m,u=v;continue e}}}};var n=r.$getJumps$;h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.getJumps$196=function(l,o){return n(l,o,0)};var s={};s.$getFrom=function(l,o,u){e:for(;;){if(l==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unreachable"];switch(u){case 0:{var h=l,c=h[0];return xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.lookup$246(c,o)}default:{var f=l,d=f[1],m=d,v=o,p=SmlPrims.chk_ovf_i32(u-1),l=m,o=v,u=p;continue e}}}},h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.getFrom$203=s.$getFrom;var a={};return a.$assignTo=function(l,o,u){e:for(;;){if(l==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unreachable"];switch(u){case 0:return xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(l),o);default:{var h=l,c=h[1],f=c,d=o,m=SmlPrims.chk_ovf_i32(u-1),l=f,o=d,u=m;continue e}}}},h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.assignTo$236=a.$assignTo,0})();typeof c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1>"u"&&(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1={});(function(){c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96=function(t,r){switch(t[0]){case 20:{switch(r[0]){case 20:return!0;default:return!1}break}case 9:{switch(r[0]){case 9:return!0;default:return!1}break}case 21:{switch(r[0]){case 21:return!0;default:return!1}break}case 10:{switch(r[0]){case 10:return!0;default:return!1}break}case 34:{switch(r[0]){case 34:return!0;default:return!1}break}case 33:{switch(r[0]){case 33:return!0;default:return!1}break}case 17:{switch(r[0]){case 17:return!0;default:return!1}break}case 13:{switch(r[0]){case 13:return!0;default:return!1}break}case 8:{switch(r[0]){case 8:return!0;default:return!1}break}case 7:{switch(r[0]){case 7:return!0;default:return!1}break}case 6:{switch(r[0]){case 6:return!0;default:return!1}break}case 37:{switch(r[0]){case 37:return!0;default:return!1}break}case 36:{switch(r[0]){case 36:return!0;default:return!1}break}case 30:{switch(r[0]){case 30:return!0;default:return!1}break}case 29:{switch(r[0]){case 29:return!0;default:return!1}break}case 25:{switch(r[0]){case 25:return!0;default:return!1}break}case 24:{switch(r[0]){case 24:return!0;default:return!1}break}case 19:{switch(r[0]){case 19:return!0;default:return!1}break}case 18:{switch(r[0]){case 18:return!0;default:return!1}break}case 23:{var n=t[1];switch(r[0]){case 23:return n==r[1];default:return!1}break}case 5:{var s=t[1];switch(r[0]){case 5:return s==r[1];default:return!1}break}case 15:{var a=t[1];switch(r[0]){case 15:{var l=r[1];return y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.s$kk$552(a,l)}default:return!1}break}case 38:{switch(r[0]){case 38:return!0;default:return!1}break}case 35:{switch(r[0]){case 35:return!0;default:return!1}break}case 32:{switch(r[0]){case 32:return!0;default:return!1}break}case 28:{switch(r[0]){case 28:return!0;default:return!1}break}case 26:{switch(r[0]){case 26:return!0;default:return!1}break}case 27:{switch(r[0]){case 27:return!0;default:return!1}break}case 22:{switch(r[0]){case 22:return!0;default:return!1}break}case 16:{switch(r[0]){case 16:return!0;default:return!1}break}case 14:{switch(r[0]){case 14:return!0;default:return!1}break}case 12:{switch(r[0]){case 12:return!0;default:return!1}break}case 11:{switch(r[0]){case 11:return!0;default:return!1}break}case 4:{switch(r[0]){case 4:return!0;default:return!1}break}case 3:{switch(r[0]){case 3:return!0;default:return!1}break}case 2:{switch(r[0]){case 2:return!0;default:return!1}break}case 1:{switch(r[0]){case 1:return!0;default:return!1}break}case 0:{switch(r[0]){case 0:return!0;default:return!1}break}default:switch(r[0]){case 31:return!0;default:return!1}}},c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenToString$355=function(t){switch(t[0]){case 20:return"LeftParen";case 9:return"RightParen";case 21:return"LeftBrace";case 10:return"RightBrace";case 34:return"Comma";case 33:return"Dot";case 17:return"Minus";case 13:return"Plus";case 8:return"Semicolon";case 7:return"Slash";case 6:return"Star";case 37:return"Bang";case 36:return"BangEqual";case 30:return"Equal";case 29:return"EqualEqual";case 25:return"Greater";case 24:return"GreaterEqual";case 19:return"Less";case 18:return"LessEqual";case 23:return'Identifier "'+t[1]+'"';case 5:return'String "'+t[1]+'"';case 15:{var r=t[1];return"Number "+y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.toString$158(r)}case 38:return"And";case 35:return"Class";case 32:return"Else";case 28:return"False";case 26:return"Fun";case 27:return"For";case 22:return"If";case 16:return"Nil";case 14:return"Or";case 12:return"Print";case 11:return"Return";case 4:return"Super";case 3:return"This";case 2:return"True";case 1:return"Var";case 0:return"While";default:return"Eof"}},c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.make$446=function(t){var r=null,n=1,s=1,a,l={};l.$h=function(u,h){e:for(;;){if(u<0)return h;var c=SmlPrims.chk_ovf_i32(u-1),f=[t.charCodeAt(u),h],u=c,h=f;continue e}};var o=l.$h;return a=o(SmlPrims.chk_ovf_i32(t.length-1),null),[r,n,s,a,null]};var i=[["and",[38]],[["class",[35]],[["else",[32]],[["false",[28]],[["for",[27]],[["fun",[26]],[["if",[22]],[["nil",[16]],[["or",[14]],[["print",[12]],[["return",[11]],[["super",[4]],[["this",[3]],[["true",[2]],[["var",[1]],[["while",[0]],null]]]]]]]]]]]]]]]],e={};return e.$scanTokens=function(t,r,n,s,a){e:for(;;){if(s==null)return t==null?[0,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255([[[2,[r,n]],[31]],a])]:[1,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(t)];var l,o=[r,n];if(s==null)l=[[["Empty source.",[2,[r,n]]],t],r,n,null,a];else{var u=s,h=u[0];switch(h){case 40:{var c=u[1],f=[20],d=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],m=[[d,f],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),c,m];break}case 41:{var v=u[1],p=[9],g=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],k=[[g,p],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),v,k];break}case 123:{var S=u[1],w=[21],A=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],_=[[A,w],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),S,_];break}case 125:{var W=u[1],J=[10],H=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],F=[[H,J],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),W,F];break}case 44:{var V=u[1],U=[34],y=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],P=[[y,U],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),V,P];break}case 46:{var C=u[1],b=[33],x=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],$=[[x,b],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),C,$];break}case 45:{var I=u[1],D=[17],M=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],T=[[M,D],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),I,T];break}case 43:{var O=u[1],B=[13],E=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],L=[[E,B],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),O,L];break}case 59:{var N=u[1],R=[8],K=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],Z=[[K,R],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),N,Z];break}case 42:{var Q=u[1],z=[6],G=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],X=[[G,z],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),Q,X];break}case 47:{var Y=u[1];if(Y==null){var te=s,ae=te[1],re=[7],se=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],ue=[[se,re],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),ae,ue]}else{var q=Y;switch(q[0]){case 47:{var ne=q[1],he=t,$e=r,ve=0,be,Se={};Se.$dropWhile=function(Ge){t:for(;;){if(Ge==null)return null;var Oe=Ge,pt=Oe[0],je=Oe[1];if(pt!=10){var Lt=je,Ge=Lt;continue t}else return[pt,je]}};var ge=Se.$dropWhile;be=ge(ne),l=[he,$e,ve,be,a];break}default:{var pe=s,de=pe[1],xe=[7],ye=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],Pe=[[ye,xe],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),de,Pe]}}}break}case 33:{var Ce=u[1];if(Ce==null){var Be=s,Le=Be[1],We=[37],Ne=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],Xe=[[Ne,We],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),Le,Xe]}else{var Fe=Ce;switch(Fe[0]){case 61:{var Ee=Fe[1],De=[36],Qe=[1,[[r,SmlPrims.chk_ovf_i32(n+2)],o]],tt=[[Qe,De],a];l=[t,r,SmlPrims.chk_ovf_i32(n+2),Ee,tt];break}default:{var Je=s,at=Je[1],He=[37],ze=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],ot=[[ze,He],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),at,ot]}}}break}case 61:{var lt=u[1];if(lt==null){var kt=s,jt=kt[1],Bt=[30],Rt=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],Ot=[[Rt,Bt],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),jt,Ot]}else{var Wt=lt;switch(Wt[0]){case 61:{var yt=Wt[1],Et=[29],Nt=[1,[[r,SmlPrims.chk_ovf_i32(n+2)],o]],Ht=[[Nt,Et],a];l=[t,r,SmlPrims.chk_ovf_i32(n+2),yt,Ht];break}default:{var Xt=s,Ut=Xt[1],Yt=[30],er=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],Ur=[[er,Yt],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),Ut,Ur]}}}break}case 60:{var Ir=u[1];if(Ir==null){var Yr=s,ki=Yr[1],ei=[19],wi=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],ti=[[wi,ei],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),ki,ti]}else{var ri=Ir;switch(ri[0]){case 61:{var xi=ri[1],fe=[18],ke=[1,[[r,SmlPrims.chk_ovf_i32(n+2)],o]],Me=[[ke,fe],a];l=[t,r,SmlPrims.chk_ovf_i32(n+2),xi,Me];break}default:{var ut=s,ht=ut[1],tr=[19],oa=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],tn=[[oa,tr],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),ht,tn]}}}break}case 62:{var Ao=u[1];if(Ao==null){var md=s,pd=md[1],vd=[25],gd=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],bd=[[gd,vd],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),pd,bd]}else{var _o=Ao;switch(_o[0]){case 61:{var $d=_o[1],kd=[24],wd=[1,[[r,SmlPrims.chk_ovf_i32(n+2)],o]],xd=[[wd,kd],a];l=[t,r,SmlPrims.chk_ovf_i32(n+2),$d,xd];break}default:{var Sd=s,yd=Sd[1],Pd=[25],Cd=[1,[[r,SmlPrims.chk_ovf_i32(n+1)],o]],Ad=[[Cd,Pd],a];l=[t,r,SmlPrims.chk_ovf_i32(n+1),yd,Ad]}}}break}case 32:{var _d=u[1];l=[t,r,SmlPrims.chk_ovf_i32(n+1),_d,a];break}case 13:{var Id=u[1];l=[t,r,SmlPrims.chk_ovf_i32(n+1),Id,a];break}case 9:{var Dd=u[1];l=[t,r,SmlPrims.chk_ovf_i32(n+1),Dd,a];break}case 10:{var Md=u[1];l=[t,SmlPrims.chk_ovf_i32(r+1),1,Md,a];break}case 34:{var Td=u[1],ua,Io={};Io.$splitWhile$=function(Ge,Oe){t:for(;;){if(Ge==null)return[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(Oe),null];var pt=Ge,je=pt[0],Lt=pt[1];if(je!=34){var Dr=Lt,ni=[je,Oe],Ge=Dr,Oe=ni;continue t}else return[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(Oe),[je,Lt]]}};var Bd=Io.$splitWhile$,Od=null;ua=Bd(Td,Od);var Do=ua[0],Mo=ua[1];if(Mo==null)l=[[["Unterminated string.",[2,[r,n]]],t],r,n,null,a];else{var Wd=Mo,Ed=Wd[1],To=SmlPrims.implode(Do),Ld=h7fbaDWer1eD5BCDBpvTxeg$3basis$0String$1.fields$229(function(Ge){return function(Oe){return Oe==10}}([]),To),ha,Fd=r,Bo,Jd=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.filter$415(function(Ge){return function(Oe){return Oe==10}}([]),Do),Oo={};Oo.$acc=function(Ge,Oe){t:for(;;){if(Ge==null)return Oe;var pt=Ge,je=pt[1],Lt=je,Dr=SmlPrims.chk_ovf_i32(Oe+1),Ge=Lt,Oe=Dr;continue t}};var Rd=Oo.$acc;Bo=Rd(Jd,0),ha=SmlPrims.chk_ovf_i32(Fd+Bo);var Wo=SmlPrims.chk_ovf_i32(SmlPrims.chk_ovf_i32(2+n)+dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.last$88(Ld).length);l=[t,ha,Wo,Ed,[[[1,[[ha,Wo],o]],[5,To]],a]]}break}default:{var Nd=u[1];if(h>=97&&h<=122||h>=65&&h<=90||h==95){var ca,Eo={};Eo.$splitWhile$=function(Ge,Oe){t:for(;;){if(Ge==null)return[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(Oe),null];var pt=Ge,je=pt[0],Lt=pt[1];if(je>=48&&je<=57||je>=97&&je<=122||je>=65&&je<=90||je==95){var Dr=Lt,ni=[je,Oe],Ge=Dr,Oe=ni;continue t}else return[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(Oe),[je,Lt]]}};var Hd=Eo.$splitWhile$,jd=null;ca=Hd(s,jd);var Vd=ca[0],zd=ca[1],fa=SmlPrims.implode(Vd),Lo,Gd=EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.getOpt$105,da,Fo=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.find$390(function(Ge){return function(Oe){var pt=Ge[0];return Oe[0]==pt}}([fa]),i);switch(Fo[0]){case 1:{da=[1];break}default:{var Kd=Fo[1],Qd=Kd[1];da=[0,Qd]}}Lo=Gd(da,[23,fa]);var Jo=SmlPrims.chk_ovf_i32(n+fa.length);l=[t,r,Jo,zd,[[[1,[[r,Jo],o]],Lo],a]]}else if(h>=48&&h<=57){var ma,Ro={};Ro.$splitWhile$=function(Ge,Oe){t:for(;;){if(Ge==null)return[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(Oe),null];var pt=Ge,je=pt[0],Lt=pt[1];if(je>=48&&je<=57){var Dr=Lt,ni=[je,Oe],Ge=Dr,Oe=ni;continue t}else return[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(Oe),[je,Lt]]}};var qd=Ro.$splitWhile$,Zd=null;ma=qd(s,Zd);var Xd=ma[0],Si=ma[1],ii;if(Si==null)ii=[null,Si];else{var No=Si;switch(No[0]){case 46:{var Ho=No[1];if(Ho==null)ii=[null,Si];else{var jo=Ho,pa=jo[0],Ud=jo[1];if(!(pa>=48&&pa<=57))ii=[null,Si];else{var va,Yd=[pa,Ud],Vo={};Vo.$splitWhile$=function(Ge,Oe){t:for(;;){if(Ge==null)return[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(Oe),null];var pt=Ge,je=pt[0],Lt=pt[1];if(je>=48&&je<=57){var Dr=Lt,ni=[je,Oe],Ge=Dr,Oe=ni;continue t}else return[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(Oe),[je,Lt]]}};var em=Vo.$splitWhile$,tm=null;va=em(Yd,tm),ii=[[46,va[0]],va[1]]}}break}default:ii=[null,Si]}}var rm=ii[0],im=ii[1],ga=SmlPrims.implode(Xd)+SmlPrims.implode(rm),nm=[15,EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.valOf$128(y1CWDAIcrGTm72MVeo9tyi$3basis$0Real$1.fromString$502(ga))],sm=SmlPrims.chk_ovf_i32(n+ga.length),am=[1,[[r,sm],o]],lm=[[am,nm],a];l=[t,r,SmlPrims.chk_ovf_i32(n+ga.length),im,lm]}else l=[[["Unexpected character: "+SmlPrims.implode([h,null])+".",[2,[r,n]]],t],r,n,Nd,a]}}}var om=l[0],um=l[1],hm=l[2],cm=l[3],fm=l[4],t=om,r=um,n=hm,s=cm,a=fm;continue e}},c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.scanTokens$965=e.$scanTokens,0})();typeof h4kjw4eCTBK2huqlQTXkBbe$3smlox$0parser$1>"u"&&(h4kjw4eCTBK2huqlQTXkBbe$3smlox$0parser$1={});(function(){h4kjw4eCTBK2huqlQTXkBbe$3smlox$0parser$1.eq_binary_operator$1639=function(b,x){switch(b){case 0:{switch(x){case 0:return!0;default:return!1}break}case 1:{switch(x){case 1:return!0;default:return!1}break}case 2:{switch(x){case 2:return!0;default:return!1}break}case 3:{switch(x){case 3:return!0;default:return!1}break}case 4:{switch(x){case 4:return!0;default:return!1}break}case 5:{switch(x){case 5:return!0;default:return!1}break}case 6:{switch(x){case 6:return!0;default:return!1}break}case 7:{switch(x){case 7:return!0;default:return!1}break}case 8:{switch(x){case 8:return!0;default:return!1}break}case 9:{switch(x){case 9:return!0;default:return!1}break}case 10:{switch(x){case 10:return!0;default:return!1}break}}},h4kjw4eCTBK2huqlQTXkBbe$3smlox$0parser$1.eq_logical_operator$1643=function(b,x){switch(b){case 0:{switch(x){case 0:return!0;default:return!1}break}case 1:{switch(x){case 1:return!0;default:return!1}break}}},h4kjw4eCTBK2huqlQTXkBbe$3smlox$0parser$1.eq_unary_operator$1647=function(b,x){switch(b){case 0:{switch(x){case 0:return!0;default:return!1}break}case 1:{switch(x){case 1:return!0;default:return!1}break}}},h4kjw4eCTBK2huqlQTXkBbe$3smlox$0parser$1.eq_function_type$1651=function(b,x){switch(b){case 0:{switch(x){case 0:return!0;default:return!1}break}case 1:{switch(x){case 1:return!0;default:return!1}break}}};var i=new String("UnexpectedToken"),e={};e.$finishCall$=function(b,x){return function($){var I,D,M={};M.$acc=function(de,xe){e:for(;;){if(de==null)return xe;var ye=de,Pe=ye[1],Ce=Pe,Be=SmlPrims.chk_ovf_i32(xe+1),de=Ce,xe=Be;continue e}};var T=M.$acc;if(D=T($,0),I=D>=255,I)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Can't have more than 255 arguments."];var O=b[0];if(x==null){var B=e.$parseExpression(x),E=B[0],L=B[1];if(L==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ')' after arguments."];var N=L,R=N[0];switch(R[1][0]){case 9:{var K=R[0],Z=N[1],Q,z=[9,[b,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255([E,$])]];return Q=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([O,[K,null]]),z],[Q,Z];break}case 34:{var G=N[1];return e.$finishCall$(b,G)([E,$])}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ')' after arguments."]}}else{var X=x,Y=X[0];switch(Y[1][0]){case 9:{var te=Y[0],ae=X[1],re,se=[9,[b,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255($)]];return re=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([O,[te,null]]),se],[re,ae];break}default:{var ue=e.$parseExpression(x),q=ue[0],ne=ue[1];if(ne==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ')' after arguments."];var he=ne,$e=he[0];switch($e[1][0]){case 9:{var ve=$e[0],be=he[1],Se,ge=[9,[b,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255([q,$])]];return Se=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([O,[ve,null]]),ge],[Se,be];break}case 34:{var pe=he[1];return e.$finishCall$(b,pe)([q,$])}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ')' after arguments."]}}}}}},e.$finishCall=function(b,x){return e.$finishCall$(b,x)(null)},e.$parseCalls=function(b,x){if(x==null)return[b,x];var $=x,I=$[0];switch(I[1][0]){case 20:{var D=$[1],M=e.$finishCall(b,D),T=M[0],O=M[1];return e.$parseCalls(T,O)}case 33:{var B=I[0],E=$[1],L;if(E==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect property name after '.'."];var N=E,R=N[0],K=R[1];switch(K[0]){case 23:{L=[K[1],N[1],R[0]];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect property name after '.'."]}var Z=L[0],Q=L[1],z=L[2],G,X=[8,[b,Z]];return G=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([B,[z,null]]),X],e.$parseCalls(G,Q);break}default:return[b,x]}},e.$parseCall=function(b){var x=e.$parsePrimary(b),$=x[0],I=x[1];return e.$parseCalls($,I)},e.$parseUnary=function(b){var x,$=[[37],[[17],null]];if(b==null)x=[1];else{var I=b,D=I[0],M=I[1],T=D[1],O,B={};B.$exists=function(re){e:for(;;){if(re==null)return!1;var se=re,ue=se[0],q=se[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96(ue,T))return!0;var ne=q,re=ne;continue e}};var E=B.$exists;O=E($),x=O?[0,[D,M]]:[1]}switch(x[0]){case 1:return e.$parseCall(b);default:{var L=x[1],N=L[0],R=L[1],K=e.$parseUnary(R),Z=K[0],Q=K[1],z=N[0],G=Z[0],X,Y,te,ae;switch(N[1][0]){case 17:{ae=0;break}case 37:{ae=1;break}default:throw[i,["unary operator",N]]}return te=[ae,Z],Y=[1,te],X=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([z,[G,null]]),Y],[X,Q]}}},e.$parseFactor=function(b){var x=[[7],[[6],null]],$={};$.$parseBinaryLevel=function(D,M){var T=D(M),O=T[0],B=T[1],E=O[0],L;if(B==null)L=[1];else{var N=B,R=N[0],K=N[1],Z=R[1],Q,z={};z.$exists=function(ne){e:for(;;){if(ne==null)return!1;var he=ne,$e=he[0],ve=he[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96($e,Z))return!0;var be=ve,ne=be;continue e}};var G=z.$exists;Q=G(x),L=Q?[0,[R,K]]:[1]}switch(L[0]){case 1:return[O,B];default:{var X=L[1],Y=X[0],te=X[1],ae=$.$parseBinaryLevel(D,te),re=ae[0],se=ae[1],ue=re[0],q;switch(Y[1][0]){case 17:{q=3;break}case 13:{q=2;break}case 7:{q=1;break}case 6:{q=0;break}case 36:{q=10;break}case 29:{q=8;break}case 25:{q=7;break}case 24:{q=6;break}case 19:{q=5;break}case 18:{q=4;break}default:throw[i,["non-logical binary operator",Y]]}return[[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([E,[ue,null]]),[10,[q,O,re]]],se]}}};var I=$.$parseBinaryLevel;return I(function(D){return e.$parseUnary(D)},b)},e.$parseTerm=function(b){var x=[[17],[[13],null]],$={};$.$parseBinaryLevel=function(D,M){var T=D(M),O=T[0],B=T[1],E=O[0],L;if(B==null)L=[1];else{var N=B,R=N[0],K=N[1],Z=R[1],Q,z={};z.$exists=function(ne){e:for(;;){if(ne==null)return!1;var he=ne,$e=he[0],ve=he[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96($e,Z))return!0;var be=ve,ne=be;continue e}};var G=z.$exists;Q=G(x),L=Q?[0,[R,K]]:[1]}switch(L[0]){case 1:return[O,B];default:{var X=L[1],Y=X[0],te=X[1],ae=$.$parseBinaryLevel(D,te),re=ae[0],se=ae[1],ue=re[0],q;switch(Y[1][0]){case 17:{q=3;break}case 13:{q=2;break}case 7:{q=1;break}case 6:{q=0;break}case 36:{q=10;break}case 29:{q=8;break}case 25:{q=7;break}case 24:{q=6;break}case 19:{q=5;break}case 18:{q=4;break}default:throw[i,["non-logical binary operator",Y]]}return[[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([E,[ue,null]]),[10,[q,O,re]]],se]}}};var I=$.$parseBinaryLevel;return I(function(D){return e.$parseFactor(D)},b)},e.$parseComparison=function(b){var x=[[25],[[24],[[19],[[18],null]]]],$={};$.$parseBinaryLevel=function(D,M){var T=D(M),O=T[0],B=T[1],E=O[0],L;if(B==null)L=[1];else{var N=B,R=N[0],K=N[1],Z=R[1],Q,z={};z.$exists=function(ne){e:for(;;){if(ne==null)return!1;var he=ne,$e=he[0],ve=he[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96($e,Z))return!0;var be=ve,ne=be;continue e}};var G=z.$exists;Q=G(x),L=Q?[0,[R,K]]:[1]}switch(L[0]){case 1:return[O,B];default:{var X=L[1],Y=X[0],te=X[1],ae=$.$parseBinaryLevel(D,te),re=ae[0],se=ae[1],ue=re[0],q;switch(Y[1][0]){case 17:{q=3;break}case 13:{q=2;break}case 7:{q=1;break}case 6:{q=0;break}case 36:{q=10;break}case 29:{q=8;break}case 25:{q=7;break}case 24:{q=6;break}case 19:{q=5;break}case 18:{q=4;break}default:throw[i,["non-logical binary operator",Y]]}return[[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([E,[ue,null]]),[10,[q,O,re]]],se]}}};var I=$.$parseBinaryLevel;return I(function(D){return e.$parseTerm(D)},b)},e.$parseEquality=function(b){var x=[[36],[[29],null]],$={};$.$parseBinaryLevel=function(D,M){var T=D(M),O=T[0],B=T[1],E=O[0],L;if(B==null)L=[1];else{var N=B,R=N[0],K=N[1],Z=R[1],Q,z={};z.$exists=function(ne){e:for(;;){if(ne==null)return!1;var he=ne,$e=he[0],ve=he[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96($e,Z))return!0;var be=ve,ne=be;continue e}};var G=z.$exists;Q=G(x),L=Q?[0,[R,K]]:[1]}switch(L[0]){case 1:return[O,B];default:{var X=L[1],Y=X[0],te=X[1],ae=$.$parseBinaryLevel(D,te),re=ae[0],se=ae[1],ue=re[0],q;switch(Y[1][0]){case 17:{q=3;break}case 13:{q=2;break}case 7:{q=1;break}case 6:{q=0;break}case 36:{q=10;break}case 29:{q=8;break}case 25:{q=7;break}case 24:{q=6;break}case 19:{q=5;break}case 18:{q=4;break}default:throw[i,["non-logical binary operator",Y]]}return[[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([E,[ue,null]]),[10,[q,O,re]]],se]}}};var I=$.$parseBinaryLevel;return I(function(D){return e.$parseComparison(D)},b)},e.$parseAnd=function(b){var x=e.$parseEquality(b),$=x[0],I=x[1],D=$[0],M,T=[[38],null];if(I==null)M=[1];else{var O=I,B=O[0],E=O[1],L=B[1],N,R={};R.$exists=function(re){e:for(;;){if(re==null)return!1;var se=re,ue=se[0],q=se[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96(ue,L))return!0;var ne=q,re=ne;continue e}};var K=R.$exists;N=K(T),M=N?[0,[B,E]]:[1]}switch(M[0]){case 1:return[$,I];default:{var Z=M[1],Q=Z[1],z=e.$parseAnd(Q),G=z[0],X=z[1],Y=G[0],te,ae=[5,[1,$,G]];return te=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([D,[Y,null]]),ae],[te,X]}}},e.$parseOr=function(b){var x=e.$parseAnd(b),$=x[0],I=x[1],D=$[0],M,T=[[14],null];if(I==null)M=[1];else{var O=I,B=O[0],E=O[1],L=B[1],N,R={};R.$exists=function(re){e:for(;;){if(re==null)return!1;var se=re,ue=se[0],q=se[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96(ue,L))return!0;var ne=q,re=ne;continue e}};var K=R.$exists;N=K(T),M=N?[0,[B,E]]:[1]}switch(M[0]){case 1:return[$,I];default:{var Z=M[1],Q=Z[1],z=e.$parseOr(Q),G=z[0],X=z[1],Y=G[0],te,ae=[5,[0,$,G]];return te=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([D,[Y,null]]),ae],[te,X]}}},e.$parseAssignment=function(b){var x=e.$parseOr(b),$=x[0],I=x[1],D=$[0],M,T=[[30],null];if(I==null)M=[1];else{var O=I,B=O[0],E=O[1],L=B[1],N,R={};R.$exists=function(be){e:for(;;){if(be==null)return!1;var Se=be,ge=Se[0],pe=Se[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96(ge,L))return!0;var de=pe,be=de;continue e}};var K=R.$exists;N=K(T),M=N?[0,[B,E]]:[1]}switch(M[0]){case 1:return[$,I];default:{var Z=M[1],Q=Z[1],z=e.$parseAssignment(Q),G=z[0],X=z[1],Y=G[0],te=$[1];switch(te[0]){case 0:{var ae=te[1],re=ae[0],se,ue=[11,[[re,[1]],G]];return se=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([D,[Y,null]]),ue],[se,X];break}case 8:{var q=te[1],ne=q[0],he=q[1],$e,ve=[4,[ne,he,G]];return $e=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([D,[Y,null]]),ve],[$e,X];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expected ident."]}}}},e.$parseExpression=function(b){return e.$parseAssignment(b)},e.$parsePrimary=function(b){if(b==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unable to parse primary from empty tokens"];var x=b,$=x[0],I=x[1],D=$[1];switch(D[0]){case 28:return[[$[0],[6,[4]]],I];case 2:return[[$[0],[6,[0]]],I];case 16:return[[$[0],[6,[3]]],I];case 15:return[[$[0],[6,[2,D[1]]]],I];case 5:return[[$[0],[6,[1,D[1]]]],I];case 20:{var M=$[0],T=e.$parseExpression(I),O=T[0],B=T[1],E,L=[[9],null];if(B==null)E=[1];else{var N=B,R=N[0],K=N[1],Z=R[1],Q,z={};z.$exists=function(ge){e:for(;;){if(ge==null)return!1;var pe=ge,de=pe[0],xe=pe[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96(de,Z))return!0;var ye=xe,ge=ye;continue e}};var G=z.$exists;Q=G(L),E=Q?[0,[R,K]]:[1]}switch(E[0]){case 1:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ')' after expression."];default:{var X=E[1],Y=X[0],te=Y[0],ae=X[1],re,se=[7,O];return re=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([M,[te,null]]),se],[re,ae]}}break}case 4:{var ue=$[0],q;if(I==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '.' after 'super'."];var ne=I,he=ne[0];switch(he[1][0]){case 33:{q=ne[1];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '.' after 'super'."]}var $e;if(q==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect superclass method name."];var ve=q,be=ve[0],Se=be[1];switch(Se[0]){case 23:{$e=[Se[1],ve[1]];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect superclass method name."]}return[[ue,[3,$e[0]]],$e[1]]}case 3:return[[$[0],[2,[1]]],I];case 23:return[[$[0],[0,[D[1],[1]]]],I];default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect expression but found "+c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenToString$355($[1])]}};var t=e.$finishCall$,r=e.$finishCall,n=e.$parseCalls,s=e.$parseCall,a=e.$parseUnary,l=e.$parseFactor,o=e.$parseTerm,u=e.$parseComparison,h=e.$parseEquality,c=e.$parseAnd,f=e.$parseOr,d=e.$parseAssignment,m=e.$parseExpression,v=e.$parsePrimary,p=function(b){var x=m(b),$=x[0],I=x[1],D=$[0],M,T,O=[[8],null];if(I==null)T=[1];else{var B=I,E=B[0],L=B[1],N=E[1],R,K={};K.$exists=function(te){e:for(;;){if(te==null)return!1;var ae=te,re=ae[0],se=ae[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96(re,N))return!0;var ue=se,te=ue;continue e}};var Z=K.$exists;R=Z(O),T=R?[0,[E,L]]:[1]}switch(T[0]){case 1:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ';' after expression."];default:{var Q=T[1];M=[Q[0][0],Q[1]]}}var z=M[0],G=M[1],X,Y=[6,$];return X=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([D,[z,null]]),Y],[X,G]},g=function(b){if(b==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect variable name."];var x=b,$=x[1];if($==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect variable name."];var I=$,D=I[0],M=D[1];switch(M[0]){case 23:{var T=x[0],O=T[0],B=M[1],E=I[1],L,N=[[30],null];if(E==null)L=[1];else{var R=E,K=R[0],Z=R[1],Q=K[1],z,G={};G.$exists=function(Ee){e:for(;;){if(Ee==null)return!1;var De=Ee,Qe=De[0],tt=De[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96(Qe,Q))return!0;var Je=tt,Ee=Je;continue e}};var X=G.$exists;z=X(N),L=z?[0,[K,Z]]:[1]}switch(L[0]){case 1:{var Y=[1,[B,[[0],[6,[3]]]]],te;if(E==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ';' after variable declaration."];var ae=E,re=ae[0];switch(re[1][0]){case 8:{te=[re[0],ae[1]];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ';' after variable declaration."]}var se=te[0],ue=te[1];return[[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([O,[se,null]]),Y],ue]}default:{var q=L[1],ne=q[1],he=m(ne),$e=he[0],ve=he[1],be,Se,ge=[[8],null];if(ve==null)Se=[1];else{var pe=ve,de=pe[0],xe=pe[1],ye=de[1],Pe,Ce={};Ce.$exists=function(Ee){e:for(;;){if(Ee==null)return!1;var De=Ee,Qe=De[0],tt=De[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96(Qe,ye))return!0;var Je=tt,Ee=Je;continue e}};var Be=Ce.$exists;Pe=Be(ge),Se=Pe?[0,[de,xe]]:[1]}switch(Se[0]){case 1:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ';' after variable declaration."];default:{var Le=Se[1];be=[Le[0][0],Le[1]]}}var We=be[0],Ne=be[1],Xe,Fe=[1,[B,$e]];return Xe=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([O,[We,null]]),Fe],[Xe,Ne]}}break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect variable name."]}},k={};k.$parseParameters$=function(b,x){e:for(;;){if(b==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect parameter name."];var $=b,I=$[0],D=I[1];switch(D[0]){case 9:{var M=$[1];return[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(x),M]}case 23:{var T=D[1],O=$[1];if(O==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Only comma or rparen after param"];var B=O,E=B[0];switch(E[1][0]){case 34:{var L=B[1],N=L,R=[T,x],b=N,x=R;continue e}case 9:{var K=E[0],Z=B[1],Q=[[K,[9]],Z],z=[T,x],b=Q,x=z;continue e}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Only comma or rparen after param"]}break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect parameter name."]}}};var S=k.$parseParameters$,w={};w.$parseClassDeclaration=function(b){if(b==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect class name and left brace."];var x=b,$=x[1];if($==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect class name and left brace."];var I=$,D=I[0],M=D[1];switch(M[0]){case 23:{var T=x[0],O=T[0],B=M[1],E=I[1],L;if(E==null)L=[[1],E];else{var N=E,R=N[0];switch(R[1][0]){case 19:{var K=N[1];if(K==null)L=[[1],E];else{var Z=K,Q=Z[0],z=Q[1];switch(z[0]){case 23:{L=[[0,[Q[0],[0,[z[1],[1]]]]],Z[1]];break}default:L=[[1],E]}}break}default:L=[[1],E]}}var G=L[0],X=L[1],Y;if(X==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '{' before class body."];var te=X,ae=te[0];switch(ae[1][0]){case 21:{Y=te[1];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '{' before class body."]}var re={};re.$parseMethods=function(pe,de){e:for(;;){if(pe==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expected method name or right brace"];var xe=pe,ye=xe[0];switch(ye[1][0]){case 10:return[dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(de),pe];default:{var Pe=ye[0],Ce=w.$parseFunction(0,pe)(Pe),Be=Ce[0],Le=Ce[1],We=Le,Ne=[Be,de],pe=We,de=Ne;continue e}}}};var se=re.$parseMethods,ue=se(Y,null),q=ue[0],ne=ue[1];if(ne==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expected right brace after class definition"];var he=ne,$e=he[0];switch($e[1][0]){case 10:{var ve=$e[0],be=he[1],Se,ge=[7,[B,G,q]];return Se=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([O,[ve,null]]),ge],[Se,be];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expected right brace after class definition"]}break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect class name and left brace."]}},w.$parseFunction=function(b,x){return function($){if(x==null){var I,D,M,T="Expect ",O;switch(b){case 1:{O="function";break}default:O="method"}throw M=T+O,D=M+" name.",I=[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,D],I}else{var B=x,E=B[0],L=E[1];switch(L[0]){case 23:{var N=L[1],R=B[1];if(R==null){var K,Z,Q,z="Expect '(' after ",G;switch(b){case 1:{G="function";break}default:G="method"}throw Q=z+G,Z=Q+" name.",K=[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,Z],K}else{var X=R,Y=X[0];switch(Y[1][0]){case 20:{var te=X[1],ae=S(te,null),re=ae[0],se=ae[1],ue;if(se==null){var q,ne,he,$e="Expect '{' before ",ve;switch(b){case 1:{ve="function";break}default:ve="method"}throw he=$e+ve,ne=he+" body.",q=[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,ne],q}else{var be=se,Se=be[0];switch(Se[1][0]){case 21:{var ge=w.$parseBlock(se),pe=ge[0],de=pe[1];switch(de[0]){case 8:{ue=[de[1],ge[1],pe[0]];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unreachable."]}break}default:{var xe,ye,Pe,Ce="Expect '{' before ",Be;switch(b){case 1:{Be="function";break}default:Be="method"}throw Pe=Ce+Be,ye=Pe+" body.",xe=[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,ye],xe}}}var Le=ue[0],We=ue[1],Ne=ue[2],Xe,Fe=[5,[N,re,Le,b]];return Xe=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([$,[Ne,null]]),Fe],[Xe,We];break}default:{var Ee,De,Qe,tt="Expect '(' after ",Je;switch(b){case 1:{Je="function";break}default:Je="method"}throw Qe=tt+Je,De=Qe+" name.",Ee=[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,De],Ee}}}break}default:{var at,He,ze,ot="Expect ",lt;switch(b){case 1:{lt="function";break}default:lt="method"}throw ze=ot+lt,He=ze+" name.",at=[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,He],at}}}}},w.$parseForStatement=function(b){if(b==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '(' after 'for'."];var x=b,$=x[1];if($==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '(' after 'for'."];var I=$,D=I[0];switch(D[1][0]){case 20:{var M=x[0],T=M[0],O=I[1],B;if(O==null){var E=p(O);B=[[0,E[0]],E[1]]}else{var L=O,N=L[0];switch(N[1][0]){case 8:{B=[[1],L[1]];break}case 1:{var R=g(O);B=[[0,R[0]],R[1]];break}default:{var K=p(O);B=[[0,K[0]],K[1]]}}}var Z=B[0],Q=B[1],z;if(Q==null){var G=m(Q);z=[[0,G[0]],G[1]]}else{var X=Q,Y=X[0];switch(Y[1][0]){case 8:{z=[[1],Q];break}default:{var te=m(Q);z=[[0,te[0]],te[1]]}}}var ae=z[0],re=z[1],se;if(re==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ';' after loop condition."];var ue=re,q=ue[0];switch(q[1][0]){case 8:{se=ue[1];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ';' after loop condition."]}var ne;if(se==null){var he=m(se);ne=[[0,he[0]],he[1]]}else{var $e=se,ve=$e[0];switch(ve[1][0]){case 9:{ne=[[1],se];break}default:{var be=m(se);ne=[[0,be[0]],be[1]]}}}var Se=ne[0],ge=ne[1],pe;if(ge==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ')' after for clauses."];var de=ge,xe=de[0];switch(xe[1][0]){case 9:{pe=de[1];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ')' after for clauses."]}var ye=w.$parseStatement(pe),Pe=ye[0],Ce=ye[1],Be=Pe[0],Le;switch(Se[0]){case 1:{Le=Pe;break}default:{var We=Se[1];Le=[[0],[8,[Pe,[[We[0],[6,We]],null]]]]}}var Ne;switch(ae[0]){case 1:{Ne=[[0],[6,[0]]];break}default:Ne=ae[1]}var Xe=[[0],[0,[Ne,Le]]],Fe;switch(Z[0]){case 1:{Fe=Xe;break}default:{var Ee=Z[1];Fe=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([T,[Be,null]]),[8,[Ee,[Xe,null]]]]}}return[Fe,Ce]}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '(' after 'for'."]}},w.$parseIfStatement=function(b){if(b==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '(' after 'if'."];var x=b,$=x[1];if($==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '(' after 'if'."];var I=$,D=I[0];switch(D[1][0]){case 20:{var M=x[0],T=M[0],O=I[1],B=m(O),E=B[0],L=B[1];if(L==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ')' after if condition."];var N=L,R=N[0];switch(R[1][0]){case 9:{var K=N[1],Z=w.$parseStatement(K),Q=Z[0],z=Z[1],G=Q[0],X;if(z==null)X=[[1],z];else{var Y=z,te=Y[0];switch(te[1][0]){case 32:{var ae=Y[1],re=w.$parseStatement(ae);X=[[0,re[0]],re[1]];break}default:X=[[1],z]}}var se=X[0],ue=X[1],q;switch(se[0]){case 0:{q=se[1][0];break}default:q=G}var ne,he=[4,[E,Q,se]];return ne=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([T,[q,null]]),he],[ne,ue];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ')' after if condition."]}break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '(' after 'if'."]}},w.$parseWhileStatement=function(b){if(b==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '(' after 'while'."];var x=b,$=x[1];if($==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '(' after 'while'."];var I=$,D=I[0];switch(D[1][0]){case 20:{var M=x[0],T=M[0],O=I[1],B=m(O),E=B[0],L=B[1];if(L==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ')' after condition."];var N=L,R=N[0];switch(R[1][0]){case 9:{var K=N[1],Z=w.$parseStatement(K),Q=Z[0],z=Z[1],G=Q[0],X,Y=[0,[E,Q]];return X=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([T,[G,null]]),Y],[X,z];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ')' after condition."]}break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '(' after 'while'."]}},w.$parseBlock=function(b){if(b==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"unreachable"];var x=b,$=x[0],I=$[0],D=x[1],M=w.$parseBlock$(D,null),T=M[0],O=M[1],B=M[2];return[[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([I,[O,null]]),T],B]},w.$parseStatement=function(b){if(b==null)return p(b);var x=b,$=x[0];switch($[1][0]){case 27:return w.$parseForStatement(b);case 22:return w.$parseIfStatement(b);case 0:return w.$parseWhileStatement(b);case 11:{if(b==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unreachable"];var I=b,D=I[1];if(D==null){var M=b,T=M[0],O=T[0],B=M[1],E=m(B),L=E[0],N=E[1];if(N==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ';' after return value."];var R=N,K=R[0];switch(K[1][0]){case 8:{var Z=K[0],Q=R[1],z,G=[2,[0,L]];return z=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([O,[Z,null]]),G],[z,Q];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ';' after return value."]}}else{var X=D,Y=X[0];switch(Y[1][0]){case 8:{var te=I[0],ae=te[0],re=Y[0],se=X[1],ue,q=[2,[1]];return ue=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([ae,[re,null]]),q],[ue,se];break}default:{var ne=b,he=ne[0],$e=he[0],ve=ne[1],be=m(ve),Se=be[0],ge=be[1];if(ge==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ';' after return value."];var pe=ge,de=pe[0];switch(de[1][0]){case 8:{var xe=de[0],ye=pe[1],Pe,Ce=[2,[0,Se]];return Pe=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([$e,[xe,null]]),Ce],[Pe,ye];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ';' after return value."]}}}}break}case 12:{if(b==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"unreachable"];var Be=b,Le=Be[0],We=Le[0],Ne=Be[1],Xe=m(Ne),Fe=Xe[0],Ee=Xe[1],De,Qe,tt=[[8],null];if(Ee==null)Qe=[1];else{var Je=Ee,at=Je[0],He=Je[1],ze=at[1],ot,lt={};lt.$exists=function(yt){e:for(;;){if(yt==null)return!1;var Et=yt,Nt=Et[0],Ht=Et[1];if(c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.tokenEqual$96(Nt,ze))return!0;var Xt=Ht,yt=Xt;continue e}};var kt=lt.$exists;ot=kt(tt),Qe=ot?[0,[at,He]]:[1]}switch(Qe[0]){case 1:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect ';' after value."];default:{var jt=Qe[1];De=[jt[0][0],jt[1]]}}var Bt=De[0],Rt=De[1],Ot,Wt=[3,Fe];return Ot=[lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.merge_locations$244([We,[Bt,null]]),Wt],[Ot,Rt];break}case 21:return w.$parseBlock(b);default:return p(b)}},w.$parseDeclaration=function(b){if(b==null)return w.$parseStatement(b);var x=b,$=x[0];switch($[1][0]){case 35:return w.$parseClassDeclaration(b);case 26:{var I=$[0],D=x[1];return w.$parseFunction(1,D)(I)}case 1:return g(b);default:return w.$parseStatement(b)}},w.$parseBlock$=function(b,x){if(b==null)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Expect '}' after block."];var $=b,I=$[0];switch(I[1][0]){case 10:{var D=I[0],M=$[1];return[[8,dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(x)],D,M]}default:{var T=w.$parseDeclaration(b),O=T[0],B=T[1];return w.$parseBlock$(B,[O,x])}}};var A=w.$parseClassDeclaration,_=w.$parseFunction,W=w.$parseForStatement,J=w.$parseIfStatement,H=w.$parseWhileStatement,F=w.$parseBlock,V=w.$parseStatement,U=w.$parseDeclaration,y=w.$parseBlock$,P={};P.$parseDeclarations$=function(b,x){e:for(;;){if(b==null)return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(x);var $=b,I=$[0];switch(I[1][0]){case 31:{if($[1]==null)return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.rev$255(x);var D=U(b),M=D[0],T=D[1],O=T,B=[M,x],b=O,x=B;continue e;break}default:{var E=U(b),L=E[0],N=E[1],R=N,K=[L,x],b=R,x=K;continue e}}}};var C=P.$parseDeclarations$;return h4kjw4eCTBK2huqlQTXkBbe$3smlox$0parser$1.parse$288=function(b){var x=C(b,null);return[0,x]},0})();typeof nZZj4Oj1N6POlBzbtoy2Ch$3smlox$0resolver$1>"u"&&(nZZj4Oj1N6POlBzbtoy2Ch$3smlox$0resolver$1={});(function(){nZZj4Oj1N6POlBzbtoy2Ch$3smlox$0resolver$1.eq_function_kind$561=function(u,h){switch(u){case 0:{switch(h){case 0:return!0;default:return!1}break}case 1:{switch(h){case 1:return!0;default:return!1}break}case 2:{switch(h){case 2:return!0;default:return!1}break}case 3:{switch(h){case 3:return!0;default:return!1}break}}},nZZj4Oj1N6POlBzbtoy2Ch$3smlox$0resolver$1.eq_class_type$565=function(u,h){switch(u){case 0:{switch(h){case 0:return!0;default:return!1}break}case 1:{switch(h){case 1:return!0;default:return!1}break}}};var i=new String("UnknownVariable"),e=[i],t={};t.$getJumps$=function(u,h,c){e:for(;;){if(u==null)throw e;var f=u,d=f[0],m=f[1],v=xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.find$291(d,h);switch(v[0]){case 0:{if(v[1])return c;throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Can't refer to a variable within its own declaration."]}default:{var p=m,g=h,k=SmlPrims.chk_ovf_i32(c+1),u=p,h=g,c=k;continue e}}}};var r=t.$getJumps$,n={};n.$attachBindingToExpr=function(u,h,c){e:for(;;){var f=c[1],d=c[0],m;switch(f[0]){case 11:{var v=f[1],p=v[0],g=p[0],k=v[1],S=n.$attachBindingToExpr(u,h,k);m=[11,[[g,[0,r(u,g,0)]],S]];break}case 10:{var w=f[1],A=w[0],_=w[1],W=w[2];m=[10,[A,n.$attachBindingToExpr(u,h,_),n.$attachBindingToExpr(u,h,W)]];break}case 9:{var J=f[1],H=J[0],F=J[1];m=[9,[n.$attachBindingToExpr(u,h,H),dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(G){return function(X){var Y=G[0],te=G[1],ae=G[2];return ae(te,Y,X)}}([h,u,n.$attachBindingToExpr]),F)]];break}case 7:{var V=f[1],U=n.$attachBindingToExpr(u,h,V);m=[7,U];break}case 6:{m=f;break}case 5:{var y=f[1],P=y[0],C=y[1],b=y[2];m=[5,[P,n.$attachBindingToExpr(u,h,C),n.$attachBindingToExpr(u,h,b)]];break}case 1:{var x=f[1],$=x[0],I=x[1];m=[1,[$,n.$attachBindingToExpr(u,h,I)]];break}case 0:{var D=f[1],M=D[0],T,O=M,B;try{B=[0,r(u,M,0)]}catch(G){B=function(X){return function(Y){var te=Y;if(te[0]==i)return[1];throw Y}}([])(G)}T=[O,B],m=[0,T];break}case 8:{var E=f[1],L=E[0],N=E[1];m=[8,[n.$attachBindingToExpr(u,h,L),N]];break}case 4:{var R=f[1],K=R[0],Z=R[1],Q=R[2];m=[4,[n.$attachBindingToExpr(u,h,K),Z,n.$attachBindingToExpr(u,h,Q)]];break}case 3:{var z=f[1];r(u,"super",0),m=[3,z];break}default:switch(h){case 0:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Can't use 'this' outside of a class."];default:m=[2,[0,r(u,"this",0)]]}}return[d,m]}};var s=n.$attachBindingToExpr,a={};a.$attachBindings$=function(u,h,c){return function(f){return dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(d){return a.$attachBinding(u,h,c,d)},f)}},a.$attachBinding=function(u,h,c,f){var d=f[1],m=f[0],v;switch(d[0]){case 7:{var p=d[1],g=p[0],k=p[1],S=p[2],w=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(u),A;if(u==null)A=!1;else{var _=u;A=_[1]==null}if(!A&&xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.inDomain$203(w,g))throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Redeclaring variable "+g+" outside global scope."];xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(w,[g,!1]),xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(u),[g,!0]);var W;switch(k[0]){case 1:{W=[1];break}default:{var J=k[1],H=J[1];switch(H[0]){case 0:{var F=H[1],V=F[0];if(V==g)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"A class can't inherit from itself."];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unreachable"]}W=[0,s(u,c,J)]}}var U=[xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.mkTable$114(256,[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unknown variable."]),u];switch(W[0]){case 1:break;default:{var y=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(U),P;if(U==null)P=!1;else{var C=U;P=C[1]==null}if(!P&&xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.inDomain$203(y,"super"))throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Redeclaring variable super outside global scope."];xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(y,["super",!1]),xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(U),["super",!0])}}var b=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(U),x;if(U==null)x=!1;else{var $=U;x=$[1]==null}if(!x&&xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.inDomain$203(b,"this"))throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Redeclaring variable this outside global scope."];xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(b,["this",!1]),xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(U),["this",!0]),v=[7,[g,W,a.$attachBindings$(U,0,1)(S)]];break}case 8:{var I=d[1],D=[xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.mkTable$114(256,[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unknown variable."]),u],M=a.$attachBindings$(D,h,c)(I);v=[8,M];break}case 6:{var T=d[1],O=s(u,c,T);v=[6,O];break}case 5:{var B=d[1],E=B[0],L=B[1],N=B[2],R=B[3],K=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(u),Z;if(u==null)Z=!1;else{var Q=u;Z=Q[1]==null}if(!Z&&xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.inDomain$203(K,E))throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Redeclaring variable "+E+" outside global scope."];xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(K,[E,!1]),xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(u),[E,!0]);var z=[xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.mkTable$114(256,[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unknown variable."]),u],G={};G.$app=function(Fe){e:for(;;){if(Fe==null)return 0;var Ee=Fe,De=Ee[0],Qe=Ee[1],tt=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(z),Je;if(z==null)Je=!1;else{var at=z;Je=at[1]==null}if(!Je&&xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.inDomain$203(tt,De))throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Redeclaring variable "+De+" outside global scope."];xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(tt,[De,!1]),xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(z),[De,!0]);var He=Qe,Fe=He;continue e}};var X=G.$app;X(L);var Y;switch(R){case 1:{Y=3;break}default:Y=E=="init"?2:1}v=[5,[E,L,a.$attachBindings$(z,Y,c)(N),R]];break}case 4:{var te=d[1],ae=te[0],re=te[1],se=te[2],ue,q=s(u,c,ae),ne=a.$attachBinding(u,h,c,re),he;switch(se[0]){case 1:{he=se;break}default:{var $e=se[1];he=[0,a.$attachBinding(u,h,c,$e)]}}ue=[q,ne,he],v=[4,ue];break}case 0:{var ve=d[1],be=ve[0],Se=ve[1];v=[0,[s(u,c,be),a.$attachBinding(u,h,c,Se)]];break}case 3:{var ge=d[1],pe=s(u,c,ge);v=[3,pe];break}case 2:{var de=d[1];switch(h){case 0:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Can't return outside of a function"];case 2:{switch(de[0]){case 1:{v=[2,de];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Can't return a value from an initializer"]}break}default:{var xe;switch(de[0]){case 1:{xe=[1];break}default:{var ye=de[1];xe=[0,s(u,c,ye)]}}v=[2,xe]}}break}default:{var Pe=d[1],Ce=Pe[0],Be=Pe[1],Le=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(u),We;if(u==null)We=!1;else{var Ne=u;We=Ne[1]==null}if(!We&&xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.inDomain$203(Le,Ce))throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Redeclaring variable "+Ce+" outside global scope."];xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(Le,[Ce,!1]);var Xe=s(u,c,Be);xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.hd$674(u),[Ce,!0]),v=[1,[Ce,Xe]]}}return[m,v]};var l=a.$attachBindings$,o=a.$attachBinding;return nZZj4Oj1N6POlBzbtoy2Ch$3smlox$0resolver$1.attachBindings$527=function(u,h){var c,f=xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.mkTable$114(256,[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unknown variable."]),d=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(p){return[p,!0]},u),m={};m.$app=function(p){e:for(;;){if(p==null)return 0;var g=p,k=g[0],S=g[1];xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(f,k);var w=S,p=w;continue e}};var v=m.$app;return v(d),c=[f,null],[0,l(c,0,0)(h)]},0})();typeof h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1>"u"&&(h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1={});(function(){var i={};i.$evaluateExpr=function(t,r){e:for(;;){var n=r[1];switch(n[0]){case 11:{var s=n[1],a=s[0],l=a[0],o=a[1],u=s[1],h=i.$evaluateExpr(t,u);switch(o[0]){case 1:{h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.assign$134(t,[l,h]);break}default:{var c=o[1];h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.assignTo$236(t,[l,h],c)}}return h}case 10:{var f=n[1],d=f[0],m=f[1],v=f[2],p=i.$evaluateExpr(t,m),g=i.$evaluateExpr(t,v);switch(d){case 9:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unimplemented"];case 3:return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.minus$198(p,g);case 2:return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.plus$216(p,g);case 1:return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.divides$262(p,g);case 0:return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.times$244(p,g);case 10:return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.neq$184(p,g);case 8:return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.eq$108(p,g);case 7:return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.greater$280(p,g);case 6:return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.greaterEq$298(p,g);case 5:return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.less$316(p,g);default:return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.lessEq$334(p,g)}break}case 9:{var k=n[1],S=k[0],w=k[1],A=i.$evaluateExpr(t,S),_=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(de){return function(xe){var ye=de[0],Pe=de[1];return Pe(ye,xe)}}([t,i.$evaluateExpr]),w);try{return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.call$381(A,_)}catch(de){return function(xe){return function(ye){var Pe=ye;if(Pe[0]==h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$ReturnExn$67)return ye[1];throw ye}}([])(de)}break}case 7:{var W=n[1],J=t,H=W,t=J,r=H;continue e}case 6:{var F=n[1];switch(F[0]){case 2:{var V=F[1];return[1,V]}case 1:{var U=F[1];return[0,U]}case 0:return[6,!0];case 4:return[6,!1];default:return[2]}break}case 1:{var y=n[1],P=y[0],C=y[1],b=i.$evaluateExpr(t,C);switch(P){case 1:return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.logicalNot$377(b);default:return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.negate$352(b)}break}case 0:{var x=n[1],$=x[0],I=x[1];switch(I[0]){case 1:return h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.get$83(t,$);default:{var D=I[1];return h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.getFrom$203(t,$,D)}}break}case 5:{var M=n[1];switch(M[0]){case 0:{var T=M[1],O=M[2],B=i.$evaluateExpr(t,T);if(h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.isTruthy$363(B))return B;var E=t,L=O,t=E,r=L;continue e;break}default:{var N=M[1],R=M[2],K=i.$evaluateExpr(t,N);if(h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.isTruthy$363(K)){var Z=t,Q=R,t=Z,r=Q;continue e}else return K}}break}case 8:{var z=n[1],G=z[0],X=z[1],Y=i.$evaluateExpr(t,G);return h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.declare$69(t,["this",Y]),h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.get$418(Y,X);break}case 4:{var te=n[1],ae=te[0],re=te[1],se=te[2],ue=i.$evaluateExpr(t,ae),q=i.$evaluateExpr(t,se);return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.set$449(ue,re,q),q;break}case 3:{var ne=n[1],he,$e=h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.get$83(t,"super");switch($e[0]){case 5:{he=$e[1][0];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unreachable."]}var ve,be=h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.findMethod$77(he,ne);switch(be[0]){case 0:{ve=be[1];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Undefined property '"+ne+"'."]}var Se=h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.get$83(t,"this");return ve(Se)}default:{var ge=n[1];switch(ge[0]){case 1:return h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.get$83(t,"this");default:{var pe=ge[1];return h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.getFrom$203(t,"this",pe)}}}}}},h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.evaluateExpr$52=i.$evaluateExpr;var e={};return e.$evaluateStatement=function(t,r,n){var s=n[1];switch(s[0]){case 8:{var a=s[1],l,o,u=h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.makeNested$65(t);o=function(G){return e.$evaluateStatement(u,r,G)};var h={};h.$app=function(G){e:for(;;){if(G==null)return 0;var X=G,Y=X[0],te=X[1];o(Y);var ae=te,G=ae;continue e}};var c=h.$app;return l=function(G){return c(G)},l(a);break}case 7:{var f=s[1],d=f[0],m=f[1],v=f[2],p;switch(m[0]){case 1:{p=[1];break}default:{var g=m[1],k,S=h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.evaluateExpr$52(t,g);switch(S[0]){case 5:{k=S[1][0];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Superclass must be a class."]}p=[0,k]}}var w;switch(p[0]){case 1:{w=t;break}default:{var A=p[1],_=h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.makeNested$65(t);h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.declare$69(_,["super",[5,[A,h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.getId$69(0)]]]),w=_}}var W=xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.mkTable$114(256,[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Unknown method"]),J={};J.$app=function(G){e:for(;;){if(G==null)return 0;var X=G,Y=X[0],te=X[1],ae=Y[1],re;switch(ae[0]){case 5:{var se=ae[1],ue=h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.makeNested$65(w),q=e.$createFunction(ue,se),ne=q[0],he=q[1];re=[ne,function(be){return function(Se){var ge=be[0],pe=be[1],de=be[2];return de(pe,["this",Se]),ge}}([he,ue,h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.declare$69])];break}default:throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Non-method class contents?"]}xJucLroguPQvFdZXa3WhOq$3smlox$0string_table$1$2.insert$137(W,re);var $e=te,G=$e;continue e}};var H=J.$app;return H(v),h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.declare$69(t,[d,[5,[[0,[d,W,p]],h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.getId$69(0)]]]);break}case 6:{var F=s[1];return h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.evaluateExpr$52(t,F),0;break}case 5:{var V=s[1],U=e.$createFunction(t,V),y=U[0],P=U[1];return h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.declare$69(t,[y,P])}case 4:{var C=s[1],b=C[0],x=C[1],$=C[2],I=h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.evaluateExpr$52(t,b);return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.isTruthy$363(I)?e.$evaluateStatement(t,r,x):uGJPliIKyyWPY5F2OXJFgc$3basis$0Option$1.app$85(function(G){return e.$evaluateStatement(t,r,G)},$)}case 0:{var D=s[1],M=D[0],T=D[1],O=h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.evaluateExpr$52(t,M);return h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.isTruthy$363(O)?(e.$evaluateStatement(t,r,T),e.$evaluateStatement(t,r,n)):0}case 3:{var B=s[1],E=h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.evaluateExpr$52(t,B);return r(h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.toString$469(E)+`
`)}case 2:{var L=s[1],N;switch(L[0]){case 1:{N=[2];break}default:{var R=L[1];N=h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.evaluateExpr$52(t,R)}}throw[h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.en$ReturnExn$67,N]}default:{var K=s[1],Z=K[0],Q=K[1],z=h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.evaluateExpr$52(t,Q);return h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.declare$69(t,[Z,z])}}},e.$createFunction=function(t,r){var n=r[0],s=r[1],a=r[2];return[n,[4,["fn "+n,function(l){var o,u,h={};h.$acc=function(w,A){e:for(;;){if(w==null)return A;var _=w,W=_[1],J=W,H=SmlPrims.chk_ovf_i32(A+1),w=J,A=H;continue e}};var c=h.$acc;u=c(l,0);var f,d={};d.$acc=function(w,A){e:for(;;){if(w==null)return A;var _=w,W=_[1],J=W,H=SmlPrims.chk_ovf_i32(A+1),w=J,A=H;continue e}};var m=d.$acc;if(f=m(s,0),o=u!=f,o)throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"arity"];var v=h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.makeNested$65(t),p={};p.$app=function(w){e:for(;;){if(w==null)return 0;var A=w,_=A[0],W=A[1];h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.declare$69(v,_);var J=W,w=J;continue e}};var g=p.$app;g(Vwsel7DLjnjcj0nJu9pelh$3basis$0ListPair$1.zip$53(s,l));var k={};k.$app=function(w){e:for(;;){if(w==null)return 0;var A=w,_=A[0],W=A[1];e.$evaluateStatement(v,function(F){return function(V){var U=F[0];return U(V)}}([EJ47NxTIZkokCnHI8kSKKb$3basis$0General$1.print$161]),_);var J=W,w=J;continue e}};var S=k.$app;return S(a),[2]},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.getId$69(0)]]]},h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.evaluateStatement$268=e.$evaluateStatement,h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.createFunction$267=e.$createFunction,h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.interpret$451=function(t,r){var n={};n.$app=function(a){e:for(;;){if(a==null)return 0;var l=a,o=l[0],u=l[1];h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.evaluateStatement$268(t,r,o);var h=u,a=h;continue e}};var s=n.$app;return function(a){return s(a)}},0})();typeof Ydv7GoRfVqgQgKgX5ssNea$3js$0export$1$2>"u"&&(Ydv7GoRfVqgQgKgX5ssNea$3js$0export$1$2={});(function(){Ydv7GoRfVqgQgKgX5ssNea$3js$0export$1$2.startTimeSecs$88;var i=SmlPrims.getrealtime();return Ydv7GoRfVqgQgKgX5ssNea$3js$0export$1$2.startTimeSecs$88=i[0]- -2147483648+i[1]/1e6,Ydv7GoRfVqgQgKgX5ssNea$3js$0export$1$2.globals$89=[["clock",[4,["native fn",function(e){if(e==null){var t,r,n,s=SmlPrims.getrealtime();return n=s[0]- -2147483648+s[1]/1e6,r=n-Ydv7GoRfVqgQgKgX5ssNea$3js$0export$1$2.startTimeSecs$88,t=r,[1,t]}else throw[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"clock accepts 0 arguments"]},h8b2Q7unZsAbHbHAPG4OSde$3smlox$0lox_value$1.getId$69(0)]]],null],Ydv7GoRfVqgQgKgX5ssNea$3js$0export$1$2.run$95=function(e,t){var r=null,n,s={};s.$h=function(m,v){e:for(;;){if(m<0)return v;var p=SmlPrims.chk_ovf_i32(m-1),g=[t.charCodeAt(m),v],m=p,v=g;continue e}};var a=s.$h;n=a(SmlPrims.chk_ovf_i32(t.length-1),null);var l=null,o=c3Lb5I8AcYhKPJjgdfF6Xe$3smlox$0scanner$1.scanTokens$965(r,1,1,n,l),u=lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.fmap$62(function(m){return h4kjw4eCTBK2huqlQTXkBbe$3smlox$0parser$1.parse$288(m)},o),h=dQvcrgdPh2Rb0tWb4ecVml$3basis$0List$1.map$695(function(m){return m[0]},Ydv7GoRfVqgQgKgX5ssNea$3js$0export$1$2.globals$89),c=lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.fmap$62(function(m){return nZZj4Oj1N6POlBzbtoy2Ch$3smlox$0resolver$1.attachBindings$527(h,m)},u),f=lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.fmap$62(function(m){var v,p={};p.$app=function(k){e:for(;;){if(k==null)return 0;var S=k,w=S[0],A=S[1];h9q6HEXhZ64NbWMZHkIjZda$3smlox$0interpreter$1.evaluateStatement$268(e,function(J){return function(H){return fd(H)}}([]),w);var _=A,k=_;continue e}};var g=p.$app;return v=g(m),[0,v]},c);switch(f[0]){case 1:{var d=f[1];throw lSr5gYvFLH2lrD5hcEiRkg$3smlox$0common$1.print_errors$484(t,d),[sWBNi829bz3yxJwtxAWd8b$3basis$0Initial$1.en$Fail$52,"Errors"];break}default:return 0}},Ydv7GoRfVqgQgKgX5ssNea$3js$0export$1$2.runProgram$124=function(e){return Ydv7GoRfVqgQgKgX5ssNea$3js$0export$1$2.run$95(h5Dlwd2TDJjG8XpCrmYQmfb$3smlox$0environment$1.make$58(Ydv7GoRfVqgQgKgX5ssNea$3js$0export$1$2.globals$89),e)},0})();(function(){return SMLtoJs.runProgram=function(i){return Ydv7GoRfVqgQgKgX5ssNea$3js$0export$1$2.runProgram$124(i)},0})();var $b=new oe({doc:`fun fib(n) {
  if (n == 0) {
    return 0;
  }
  if (n == 1) {
    return 1;
  }
  return fib(n - 1) + fib(n - 2);
}

for (var i = 0; i <= 10; i = i + 1) {
  print fib(i);
}`,extensions:[cd],parent:document.getElementById("code")});function kb(){let i=$b.state.doc.toString();dd.runProgram(i)}function wb(){document.getElementById("output").value=""}document.getElementById("run").addEventListener("click",kb);document.getElementById("clear").addEventListener("click",wb);})();
